'use strict';var WAVE=function(){function q(a,c){f in a||(a[f]={});var g=a[f];c in g||(g[c]=[]);return g[c]}function p(a){h in a||(a[h]=[]);return a[h]}function y(){var a=d.id(m.DIV_SUMMARY);if(a){var c;c='<table style="width: 75%"><tr> <th>Area</th> <th>Total</th><th>Passed</th><th>Failed</th> </tr>';var g=0,l=0,b;for(b in n){var e=d.id(n[b]);e&&(c+=d.strHTMLTemplate("<tr @STL@> <td>@Area@</td> <td>@Total@</td><td>@Passed@</td><td>@Failed@</td> </tr>",{STL:0<e.STAT_FAILED_TESTS?"class="+m.CSS_CLASS_TABLEERROR:
"",Area:e.STAT_NAME,Total:e.STAT_TOTAL_TESTS,Passed:e.STAT_TOTAL_TESTS-e.STAT_FAILED_TESTS,Failed:e.STAT_FAILED_TESTS}),g+=e.STAT_TOTAL_TESTS,l+=e.STAT_FAILED_TESTS)}c+=d.strHTMLTemplate("<tr class=@CLS@> <td>TOTAL</td> <td>@Total@</td><td>@Passed@</td><td>@Failed@</td> </tr>",{CLS:m.CSS_CLASS_TABLETOTAL,Total:g,Passed:g-l,Failed:l});a.innerHTML=c+"</table>"}}function z(a,c,g,l,b,e,k,f){k=d.strDefault(k);f=d.strDefault(f);var m=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");
m.open(a,c);WAVE.isFunction(e)&&(m.onerror=e);m.onreadystatechange=function(){4===m.readyState&&(200===m.status?WAVE.isFunction(l)&&l(m.responseText):WAVE.isFunction(b)&&b(m.responseText))};d.strEmpty(k)||m.setRequestHeader("Accept",k);d.strEmpty(f)||m.setRequestHeader("Content-Type",f);null!==g?(d.isObject(g)&&!d.strEmpty(f)&&-1!==f.indexOf("application/json")&&(g=JSON.stringify(g)),m.send(g)):m.send();return m}Date.now||(Date.now=function(){return(new Date).getTime()});var d={TUNDEFINED:"undefined",
CONTENT_TYPE_JSON:"application/json",CONTENT_TYPE_JSON_UTF8:"application/json;charset=utf-8",CONTENT_TYPE_MULTIPART:"multipart/form-data",falseness:function(){return!1},falsefunc:function(){return!1},arrayDelete:function(a,c){for(var g in a)if(a[g]===c)return a.splice(g,1),!0;return!1},arrayShallowCopy:function(a){var c=[];if(a&&0<a.length)for(var g=0,l=a.length;g<l;g++)c.push(a[g]);return c},arrayClear:function(a){for(;0<a.length;)a.pop()},mergeArrays:function(a,c,g,l){if(!d.isArray(a)&&!d.isArray(c))return[];
g=d.isFunction(g)?g:function(a,c){return a===c};l=d.isFunction(l)?l:function(a){return a};d.isArray(a)||(a=c);d.isArray(c)||(c=a);a=a.concat(c);for(c=0;c<a.length;c++){for(var b=c+1;b<a.length;b++)g(a[c],a[b])&&a.splice(b--,1);a[c]=l(a[c])}return a}};d.inArray=Array.prototype.indexOf?function(a,c){return-1!==a.indexOf(c)}:function(a,c){for(var g=a.length;g--;)if(a[g]===c)return!0;return!1};d.isString=function(a){return"[object String]"===Object.prototype.toString.call(a)};d.isObject=function(a){return"undefined"===
typeof a?!1:a===Object(a)&&!d.isArray(a)&&!d.isFunction(a)};d.isArray=function(a){return"undefined"===typeof a?!1:"[object Array]"===Object.prototype.toString.call(a)};d.isFunction=function(a){return"function"===typeof a};d.isMapOrArray=function(a){return a===Object(a)&&!d.isFunction(a)};d.exists=function(a){return"undefined"!==typeof a&&null!==a};d.overrideFunction=function(a,c){return function(){this.baseFunction=a;return c.apply(this,arguments)}};d.each=function(a,c){if("undefined"===typeof a||
null===a)return null;if(!d.isFunction(c))return a;for(var g in a)c(a[g],g,a);return a};d.extend=function(a,c,g){var l;if(g)for(l in c)c.hasOwnProperty(l)&&!a.hasOwnProperty(l)&&(a[l]=c[l]);else for(l in c)c.hasOwnProperty(l)&&(a[l]=c[l]);return a};d.clone=function(a){return JSON.parse(JSON.stringify(a))};d.memberClone=function(a,c){var g;if(!d.isObject(a)){if(!d.isArray(a))return a;g=[];for(var l=a.length,b=0;b<l;b++)g.push(d.memberClone(a[b],c));return g}g={};for(l in a)g[c?l.toLowerCase():l]=d.memberClone(a[l],
c);return g};d.isSame=function(a,c){if(2>arguments.length)return!1;if(null===a&&null===c)return!0;if(null===a||null===c||typeof a!==typeof c)return!1;if("function"===typeof a.getTime)return a.getTime()===c.getTime();if(d.isMapOrArray(a)){if(a.length!==c.length||Object.keys(a).length!==Object.keys(c).length)return!1;for(var g in a)if(!d.isSame(a[g],c[g]))return!1;return!0}return a===c};d.propStrAsObject=function(a,c){if(null!==a&&!d.strEmpty(c)&&a.hasOwnProperty(c)){var g=a[c];if(null!==g&&"string"===
typeof g)try{a[c]=JSON.parse(g)}catch(l){throw console.error("WV.propStrAsObject, error parsing property '"+c+"' string as JSON: "+g),l;}}};d.tryParseJSON=function(a,c){if("undefined"!==typeof a&&null!==a){if(d.isMapOrArray(a))return{ok:!0,obj:a};try{return{ok:!0,obj:JSON.parse(a)}}catch(g){}}return{ok:!1,obj:"undefined"!==typeof c?c:{}}};d.checkKeysUnique=function(a){if(!d.isObject(a))return a;a=Object.keys(a);for(var c=0;c<a.length;++c)for(var g=c+1;g<a.length;++g)if(a[c].toLowerCase()===a[g].toLowerCase())return!0;
return!1};d.empty=function(a){if("undefined"===typeof a||null===a)return!0;for(var c in a)return!1;return!0};d.has=function(a,c){return a?hasOwnProperty.call(a,c):!1};d.get=function(a,c,g){return"undefined"!==typeof a&&null!==a&&"undefined"!==typeof c&&null!==c&&d.has(a,c)&&"undefined"!==typeof a[c]?a[c]:"undefined"===typeof g?null:g};d.tryParseInt=function(a,c){var g;g="undefined"===typeof a||null===a||0===a.length?NaN:Number(a);var l;c?(l=!isNaN(g)&&isFinite(g))&&(g=0>g?-Math.floor(-g):Math.floor(g)):
l=d.isFunction(Number.isInteger)?Number.isInteger(g):!isNaN(g)&&isFinite(g)&&Math.floor(g)===g;return{ok:l,value:g}};d.intValid=function(a){return d.tryParseInt(a).ok};d.intValidPositive=function(a){a=d.tryParseInt(a);return a.ok&&0<a.value};d.intValidPositiveOrZero=function(a){a=d.tryParseInt(a);return a.ok&&0<=a.value};d.formatMoney=function(a,c,g){d.tryParseInt(a,!0).ok||(a=0);c="undefined"===typeof c?".":c;g="undefined"===typeof g?",":g;var l=100*a,b=Math.round(l);a=1E-7>Math.abs(l-b)?b:0>a?-Math.floor(-l):
Math.floor(l);a=(a/100).toFixed(2);"."!==c&&(a=a.replace(".",c));return a.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+g)};d.strEmpty=function(a){return!a||0===a.length||/^\s*$/.test(a)};d.strAsBool=function(a,c){if("undefined"===typeof a||null===a)return"undefined"===typeof c?!1:c;a=a.toString();return d.strOneOf(a,["true","t","yes","1"])};d.strDefault=function(a,c){return"undefined"===typeof a||null===a?"undefined"===typeof c||null===c?"":c:a.toString()};d.strEmptyDefault=function(a,c){return d.strEmpty(a)?
"undefined"===typeof c||null===c?"":c:a.toString()};d.nlsNameDefault=function(a,c){return d.strEmptyDefault("undefined"===typeof a||null===a?null:a.n,c)};d.nlsDescrDefault=function(a,c){return d.strEmptyDefault("undefined"===typeof a||null===a?null:a.d,c)};d.nlsNameOrDescrDefault=function(a,c){var g=null;"undefined"!==typeof a&&null!==a&&(g=a.n,d.strEmpty(g)&&(g=a.d));return d.strEmptyDefault(g,c)};d.nlsDescrOrNameDefault=function(a,c){var g=null;"undefined"!==typeof a&&null!==a&&(g=a.d,d.strEmpty(g)&&
(g=a.n));return d.strEmptyDefault(g,c)};d.strTrim=function(a){return a.replace(/^\s+|\s+$/g,"")};d.strLTrim=function(a){return a.replace(/^\s+/,"")};d.strRTrim=function(a){return a.replace(/\s+$/,"")};d.strTrunc=function(a,c,g){if(!a||a.length<=c)return a;g=g||"...";return a.substr(0,c-g.length)+g};d.strCaps=function(a,c){if(d.strEmpty(a))return a;for(var g,l="",b=!1,e=0;e<a.length;e++)g=a[e]," "===g||"."===g?(b=!0,l+=g):(l=b||0===e?l+g.toUpperCase():l+(c?g.toLowerCase():g),b=!1);return l};d.joinPathSegs=
function(){if(0===arguments.length)return"";for(var a="",c=!0,g=0;g<arguments.length;g++){var l=arguments[g];l&&(l=(c?WAVE.strLTrim(l):l.replace(/^[\/\\\s]+/,"")).replace(/[\/\\\s]+$/,""),WAVE.strEmpty(l)||(c||(a+="/"),a+=l,c=!1))}return a};d.mapCurrencyISOToSymbol=function(a,c){a=d.strDefault(a,"");a=a.toUpperCase();switch(a){case "USD":return"$";case "RUB":return"\u20bd";case "EUR":return"\u20ac";case "GBP":return"\u00a3";default:return d.strDefault("?",c)}};d.content=function(a){return d.strStartsWith(a,
"###WV")?d.markup(a.slice(5)):d.strStartsWith(a,"###HTML")?a.slice(7):d.strEscapeHTML(a)};d.markup=function(){function a(a){return"_"===a||"A"<=a&&"Z">=a||"a"<=a&&"z">=a}function c(a){a=a.substr(1).split(".");var c={},g;for(g in a)c[a[g]]=0;a=[];for(var k in c)a.push("wv-markup-"+k.toLowerCase());return a.join(" ")}var g={" ":"&nbsp;","!":"&#33;","#":"&#35;",$:"&#36;","*":"&#42;","<":"&lt;","=":"&#61;",">":"&gt;","{":"&#123;","}":"&#125;"};return function(l){function b(a){for(var c;u>a&&"undefined"!==
typeof(c=t.pop());)k+="</li></"+c+">",u--;0!==u&&(k+="</li><li>")}function e(a){k+="</dd>";a||(k+="</dl>")}for(var k="",d=0,f=[],m=[],u=0,h,C,t=[],v,r=0,x=l.length;r<x;r++){var n=l.charAt(r),p=l.charAt(r+1);switch(n){case "\r":"\n"===p&&(r++,p=l.charAt(r+1));case "\n":n="\n";break;case "<":n="&lt;";break;case ">":n="&gt;";break;case "&":if(";"!==l.charAt(r+2))break;var w=g[p];"undefined"!==typeof w&&(n=w);r+=2}switch(d){case 0:case 2:case 11:case 16:switch(n){case "\n":2===d?k+="</p>":(11===d&&b(0),
16===d&&e(!1));d=0;break;case "{":2===d?k+=" ":(11===d&&b(0),16===d&&e(!1),k+="<p>");f.push(1);d=3;m.push(k);k=n;break;case "!":2===d?(d=1,k+=" "+n):(11===d&&b(0),16===d&&e(!1),d=7,m.push(k),k=n);break;case "#":case "*":2===d?(d=1,k+=" "+n):(16===d&&e(!1),h=n,d=9,m.push(k),k=n);break;case "$":2===d?(d=1,k+=" "+n):(16===d&&e(!0),v=16===d,d=12,m.push(k),k=n);break;default:2===d?k+=" ":(11===d&&b(0),16===d&&e(!1),k+="<p>"),d=1,k+=n}break;case 1:switch(n){case "\n":d=2;break;case "{":f.push(d);d=3;m.push(k);
k=n;break;default:k+=n}break;case 3:switch(n){case "\n":k+=" ";break;case "{":f.push(d);d=3;m.push(k);k=n;break;case "}":d=4;k=k.substr(1);break;default:k+=n}break;case 4:switch(n){case ".":if(a(p)){d=5;m.push(k);k=n;break}default:d=f.pop(),k=m.pop()+k,r--}break;case 5:k+=n;"."===p?d=6:"_"===p||"-"===p||"A"<=p&&"Z">=p||"a"<=p&&"z">=p||"0"<=p&&"9">=p||(d=f.pop(),k='<span class="'+c(k)+'">'+m.pop()+"</span>",k=m.pop()+k);break;case 6:switch(n){case ".":if(a(p)){d=5;k+=n;break}default:d=f.pop(),k='<span class="'+
c(k)+'">'+m.pop()+"</span>.",k=m.pop()+k}break;case 7:if("\n"===n){k=m.pop()+"<p>"+k;d=1;r--;break}if("!"===n&&6>k.length)k+=n;else switch(u=k.length,k=m.pop()+"<h"+u+">",d=8,n){case "{":f.push(d);d=3;m.push(k);k=n;break;default:k+=n}break;case 8:switch(n){case "\n":d=0;k+="</h"+u+">";u=0;break;case "{":f.push(d);d=3;m.push(k);k="{";break;default:k+=n}break;case 9:if("\n"===n){k=m.pop()+"<p>"+k;d=1;r--;break}if(n===h)k+=n;else{d=10;p=k.length;k=m.pop();u===p&&h!==C&&b(0);if(u===p)k+="</li><li>";else if(u<
p)for(;u<p;u++)switch(h){case "#":k+="<ol><li>";t.push("ol");break;case "*":k+="<ul><li>",t.push("ul")}else b(p);switch(n){case "{":f.push(d);d=3;m.push(k);k=n;break;default:k+=n}break}break;case 10:switch(n){case "\n":C=h;d=11;break;case "{":f.push(d);d=3;m.push(k);k="{";break;default:k+=n}break;case 12:if("\n"===n||"="===n){k=m.pop()+(v?"</dl>":"")+"<p>"+k;d=1;r--;break}d=13;switch(n){case "{":f.push(d);d=3;m.push(k);k=n;break;default:k+=n}break;case 13:if("\n"===n){k=m.pop()+(v?"</dl>":"")+"<p>"+
k;d=1;r--;break}switch(n){case "{":f.push(d);d=3;m.push(k);k=n;break;case "=":d=14;m.push(k);k=n;break;default:k+=n}break;case 14:if("\n"===n){k="<p>"+m.pop()+k;k=m.pop()+(v?"</dl>":"")+k;d=1;r--;break}k="<dt>"+m.pop().substr(1)+"</dt><dd>";k=(v?m.pop():m.pop()+"<dl>")+k;d=15;switch(n){case "{":f.push(d);d=3;m.push(k);k=n;break;default:k+=n}break;case 15:switch(n){case "\n":d=16;break;case "{":f.push(d);d=3;m.push(k);k="{";break;default:k+=n}break;default:throw"WAVE.markup(state)";}}for(f.push(d);"undefined"!==
typeof(d=f.pop());)switch(d){case 0:break;case 1:case 2:k+="</p>";break;case 14:k=m.pop()+k;case 12:case 13:v&&m.push(m.pop()+"</dl>");case 9:case 7:k="<p>"+k+"</p>";case 3:case 4:k=m.pop()+k;break;case 8:k+="</h"+u+">";break;case 10:case 11:b(0);break;case 15:case 16:e(!1);break;default:throw"WAVE.markup(last.state)";}return k}}();var A="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ");d.siNum=function(a,c){"undefined"===typeof c&&(c=2);if(0===a)return a.toFixed(c);var g=a;0>a&&(g=-g);for(var l=
0,b=g.toFixed(c)+A[l+8];1E3<=g;)g/=1E3,l++;for(;1>g;)g*=1E3,l--;b=Math.pow(10,c);for(g=Math.round(g*b)/b;1E3<=g;)g/=1E3,l++;for(;1>g;)g*=1E3,l--;0>a&&(g=-g);return b=g.toFixed(c)+A[l+8]};d.charIsAZLetterOrDigit=function(a){return null===a?!1:"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"0"<=a&&"9">=a};d.strStartsWith=function(a,c,g){return g?a.slice(0,c.length)===c:a.slice(0,c.length).toLowerCase()===c.toLowerCase()};d.strEndsWith=function(a,c,g){return g?a.slice(-c.length)===c:a.slice(-c.length).toLowerCase()===
c.toLowerCase()};d.strEnsureEnding=function(a,c){return a+(a.slice(-c.length)===c?"":c)};d.strContains=function(a,c,g){return g?-1<a.indexOf(c):-1<a.toLowerCase().indexOf(c.toLowerCase())};d.strSame=function(a,c){return"undefined"===typeof a||"undefined"===typeof c||null===a||null===c?!1:d.strTrim(a).toLowerCase()===d.strTrim(c).toLowerCase()};d.strOneOf=function(a,c,g){if(null===a||null===c||!d.isArray(c))return!1;g||(g="|");a=g+d.strTrim(a).toLowerCase()+g;return 0<=(g+c.join(g)+g).toLowerCase().indexOf(a)};
d.isParentOf=function(a,c){if(d.isFunction(a.contains))try{return a.contains(c)}catch(l){return!1}for(var g=c;;){g=g.parentNode;if(null===g)return!1;if(g===a)return!0}};d.styleOf=function(a,c){return"undefined"===typeof a||null===a||d.strEmpty(c)||!d.isFunction(window.getComputedStyle)?"":window.getComputedStyle(a,null).getPropertyValue(c)};d.removeElem=function(a){a=d.id(a);return null!==a?(a.parentNode.removeChild(a),!0):!1};d.removeChildren=function(a){for(;;){var c=a.lastChild;if(c)a.removeChild(c);
else break}};d.addClass=function(a,c){"undefined"===typeof a||null===a||d.strEmpty(c)||(d.removeClass(a,c),a.className+=" "+c)};d.removeClass=function(a,c){"undefined"===typeof a||null===a||d.strEmpty(c)||"undefined"===typeof a.className||(a.className=a.className.replace(new RegExp("(?:^|\\s)"+c+"(?!\\S)","g"),""))};d.fullHieght=function(a){if("undefined"!==typeof a&&null!==a)return a.clientHeight+parseFloat(d.styleOf(a,"margin-top"))+parseFloat(d.styleOf(a,"margin-bottom"))+parseFloat(d.styleOf(a,
"padding-top"))+parseFloat(d.styleOf(a,"padding-bottom"))+parseFloat(d.styleOf(a,"border-top-width"))+parseFloat(d.styleOf(a,"border-bottom-width"))};d.fullWidth=function(a){if("undefined"!==typeof a&&null!==a)return a.clientWidth+parseFloat(d.styleOf(a,"margin-left"))+parseFloat(d.styleOf(a,"margin-right"))+parseFloat(d.styleOf(a,"padding-left"))+parseFloat(d.styleOf(a,"padding-right"))+parseFloat(d.styleOf(a,"border-left-width"))+parseFloat(d.styleOf(a,"border-right-width"))};d.addEventHandler=
function(a,c,g,l){"undefined"!==typeof a&&null!==a&&(d.isFunction(a.addEventListener)?a.addEventListener(c,g,!0===l):d.isFunction(a.attachEvent)?a.attachEvent("on"+c,g):a["on"+c]=g)};d.removeEventHandler=function(a,c,g,l){"undefined"!==typeof a&&null!==a&&(d.isFunction(a.removeEventListener)?a.removeEventListener(c,g,!0===l):d.isFunction(a.detachEvent)?a.detachEvent("on"+c,g):a["on"+c]=null)};var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};d.strEscapeHTML=function(a){return String(a).replace(/[&<>"'\/]/g,
function(a){return b[a]})};d.strHTMLTemplate=function(a,c){return a.replace(/@([\-\.0-9a-zA-Z]+)@/g,function(a,l){return d.strEscapeHTML(c[l])})};d.strTemplate=function(a,c){return a.replace(/@([\-\.0-9a-zA-Z]+)@/g,function(a,l){return c[l]})};d.strHTMLTemplateFun=function(a,c){return a.replace(/@([\-\.0-9a-zA-Z]+)@/g,function(a,l){return d.strEscapeHTML(c(a,l))})};d.strTemplateFun=function(a,c){return a.replace(/@([\-\.0-9a-zA-Z]+)@/g,c)};d.strIsEMail=function(a){if(d.strEmpty(a))return!1;var c=
a.indexOf("@");if(1>c||c===a.length-1||0<=a.indexOf("@",c+1))return!1;var g=a.lastIndexOf(".");if(!(g>c+2&&g+2<=a.length))return!1;for(g=0;g<a.length;g++)if(c=a[g],"."!==c&&"@"!==c&&"-"!==c&&"_"!==c&&!d.isValidScreenNameLetterOrDigit(c))return!1;return!0};d.isValidScreenNameLetter=function(a){return"A"<=a&&"Z">=a||"a"<=a&&"z">=a||"\u0410"<=a&&"\u042f">=a||"\u0430"<=a&&"\u044f">=a||0<="\u0451\u0401\u00c0\u00c1\u00c2\u00c3\u00c4\u00c5\u00c6\u00c7\u00c8\u00c9\u00ca\u00cb\u00cc\u00cd\u00ce\u00cf\u00d0\u00d1\u00d2\u00d3\u00d4\u00d5\u00d6\u00d8\u00d9\u00da\u00db\u00dc\u00dd\u00de\u00df\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5\u00e6\u00e7\u00e8\u00e9\u00ea\u00eb\u00ec\u00ed\u00ee\u00ef\u00f0\u00f1\u00f2\u00f3\u00f4\u00f5\u00f6\u00f8\u00f9\u00fa\u00fb\u00fc\u00fd\u00fe\u00ff\u0100\u0101\u0102\u0103\u0104\u0105\u0106\u0107\u0108\u0109\u010a\u010b\u010c\u010d\u010e\u010f\u0110\u0111\u0112\u0113\u0114\u0115\u0116\u0117\u0118\u0119\u011a\u011b\u011c\u011d\u011e\u011f\u0120\u0121\u0122\u0123\u0124\u0125".indexOf(a)};
d.isValidScreenNameLetterOrDigit=function(a){return d.isValidScreenNameLetter(a)||"0"<=a&&"9">=a};d.isValidScreenNameSeparator=function(a){return"."===a||"-"===a||"_"===a};d.strIsScreenName=function(a){if(d.strEmpty(a))return!1;a=d.strTrim(a);if(0===a.length)return!1;for(var c=!1,g,l=0;l<a.length;l++)if(g=a[l],0===l){if(!d.isValidScreenNameLetter(g))return!1}else if(d.isValidScreenNameSeparator(g)){if(c)return!1;c=!0}else{if(!d.isValidScreenNameLetterOrDigit(g))return!1;c=!1}return!c};d.strNormalizeUSPhone=
function(a){if(d.strEmpty(a))return"";a=d.strTrim(a);if(0===a.length)return"";if(d.strStartsWith(a,"+",!0))return a;for(var c=!1,g=!1,l="",b="",e="",k,f=0;f<a.length;f++)if(k=a[f],c||"("!==k||0!==l.length)if(c&&")"===k)c=!1;else{c&&3===l.length&&(c=!1);if(0<b.length&&!g){if("x"===k||"X"===k||"."===k&&6<b.length){g=!0;continue}var m=a.substring(f).toUpperCase();if(d.strStartsWith(m,"EXT",!1)&&7<=b.length){g=!0;f+=2;continue}if(d.strStartsWith(m,"EXT.",!1)&&7<=b.length){g=!0;f+=3;continue}}d.charIsAZLetterOrDigit(k)&&
(c?l+=k:g?e+=k:b+=k)}else c=!0;for(;7>b.length;)b+="?";0===l.length&&(10<=b.length?(l=b.substring(0,3),b=b.substring(3)):l="???");7<b.length&&0===e.length&&(e=b.substring(7),b=b.substring(0,7));b=b.substring(0,3)+"-"+b.substring(3);0<e.length&&(e="x"+e);return"("+l+") "+b+e};d.LOCALIZER={eng:{},rus:{},deu:{},fra:{},esp:{},allLanguageISOs:function(){var a=[],c;for(c in d.LOCALIZER)d.has(d.LOCALIZER,c)&&3===c.length&&a.push(c);return a}};d.strLocalize=function(a,c,g,l){if(4>arguments.length||d.strEmpty(a)||
d.strEmpty(l))return l;d.strEmpty(c)&&(c="--ANY-SCHEMA--");d.strEmpty(g)&&(g="--ANY-FIELD--");var b=d.LOCALIZER;if(!b.hasOwnProperty(a))return l;b=b[a];if(b.hasOwnProperty(c))b=b[c];else{if(!b.hasOwnProperty("--ANY-SCHEMA--"))return l;b=b["--ANY-SCHEMA--"]}if(b.hasOwnProperty(g))b=b[g];else{if(!b.hasOwnProperty("--ANY-FIELD--"))return l;b=b["--ANY-FIELD--"]}return b.hasOwnProperty(l)?b[l]:l};d.DATE_TIME_FORMATS={LONG_DATE:"LongDate",SHORT_DATE:"ShortDate",LONG_DATE_TIME:"LongDateTime",SHORT_DATE_TIME:"ShortDateTime",
TRAN_DATE_TIME:"TranDateTime",SHORT_DAY_MONTH:"ShortDayMonth"};var x="January February March April May June July August September October November December".split(" ");d.dateTimeToString=function(a,c,g){function l(a){return("0"+a.toString()).slice(-2)}function b(a){return d.strLocalize(g,"date","",x[a])}function e(){return l(f.getMonth()+1)}function k(){return l(f.getDate())}if("undefined"===typeof a||null===a)return"";c=WAVE.strDefault(c,d.DATE_TIME_FORMATS.LONG_DATE);var f=WAVE.isString(a)?new Date(a):
a;switch(c){case d.DATE_TIME_FORMATS.LONG_DATE:return b(f.getMonth())+" "+k()+", "+f.getFullYear();case d.DATE_TIME_FORMATS.SHORT_DATE:return e()+"/"+k()+"/"+f.getFullYear();case d.DATE_TIME_FORMATS.LONG_DATE_TIME:return b(f.getMonth())+" "+k()+", "+f.getFullYear()+" "+l(f.getHours())+":"+l(f.getMinutes())+":"+l(f.getSeconds());case d.DATE_TIME_FORMATS.SHORT_DATE_TIME:return e()+"/"+k()+"/"+f.getFullYear()+" "+l(f.getHours())+":"+l(f.getMinutes());case d.DATE_TIME_FORMATS.TRAN_DATE_TIME:return e()+
"/"+k()+"/"+f.getFullYear()+" "+l(f.getHours())+":"+l(f.getMinutes())+":"+l(f.getSeconds());case d.DATE_TIME_FORMATS.SHORT_DAY_MONTH:return e()+"/"+k()}};d.toISODateTimeString=function(a){function c(a){return 10>a?"0"+a:a}return a.getUTCFullYear()+"-"+c(a.getUTCMonth()+1)+"-"+c(a.getUTCDate())+"T"+c(a.getUTCHours())+":"+c(a.getUTCMinutes())+":"+c(a.getUTCSeconds())+"Z"};d.toUSDateTimeString=function(a){function c(a){return 10>a?"0"+a:a}return c(a.getMonth()+1)+"/"+c(a.getDate())+"/"+c(a.getFullYear())+
" "+c(a.getHours())+":"+c(a.getMinutes())+":"+c(a.getSeconds())};d.toUSDateString=function(a){function c(a){return 10>a?"0"+a:a}return c(a.getMonth()+1)+"/"+c(a.getDate())+"/"+c(a.getFullYear())};d.toSeconds=function(a){var c=0,g=a.match(/(\d+)\s*d/),l=a.match(/(\d+)\s*h/),b=a.match(/(\d+)\s*m/);a=a.match(/(\d+)\s*s/);g&&(c+=86400*parseInt(g[1]));l&&(c+=3600*parseInt(l[1]));b&&(c+=60*parseInt(b[1]));a&&(c+=parseInt(a[1]));return c};d.genRndKey=function(a,c){var g="";d.intValidPositive(a)||(a=8);for(d.strEmpty(c)&&
(c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ");g.length<a;)g+=c.charAt(d.rnd(c.length));return g};var e={};d.genAutoincKey=function(a,c){var g=0;d.strEmpty(a)&&(a="Unspecified");d.intValidPositive(c)||(c=1);a in e&&(g=e[a]);var l=g;e[a]=g+c;return l};d.isScalar=function(a){return/boolean|number|string/.test(typeof a)};d.rnd=function(){var a=0,c=100;1===arguments.length?c=arguments[0]:2===arguments.length&&(a=arguments[0],c=arguments[1]);return a+Math.floor(Math.random()*(c-a+1))};d.id=function(a){return document.getElementById(a)};
d.ce=function(a){return document.createElement(a)};d.getRadioGroupValue=function(a){a=document.getElementsByName(a);for(var c=0;c<a.length;c++)if(a[c].checked)return a[c].value};d.getCookie=function(a){return(a=document.cookie.match(new RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(a[1]):!1};d.setCookie=function(a,c){var g=a+"="+escape(c)+"; path=/";document.cookie=g};d.deleteCookie=function(a){d.setCookie(a,null,{expires:-1})};d.isObjectType=
function(a){return d.strOneOf(a,["object","json","map","array"])};d.isIntType=function(a){return d.strOneOf(a,["int","integer"])};d.isRealType=function(a){return d.strOneOf(a,["float","real","double","money"])};d.isBoolType=function(a){return d.strOneOf(a,["bool","boolean","logical"])};d.isStringType=function(a){return d.strOneOf(a,"str string char[] char varchar text".split(" "))};d.isDateType=function(a){return d.strOneOf(a,["date","datetime","time","timestamp"])};d.isSimpleKeyStringMap=function(a){if(!d.exists(a)||
!d.isObject(a))return!1;var c=Object.keys(a),g;for(g in c){var l=a[c[g]];if("undefined"===typeof l||null!==l&&!d.isString(l))return!1}return!0};d.convertScalarType=function(a,c,g,l){function b(){if("undefined"!==typeof l&&null!==l)return l;null===c&&(c="<null>");throw"Can not convert '"+c+"' to type '"+g+"'";}if(d.strEmpty(g))return c;var e;if(d.isObjectType(g)){if(null===c)return a?null:{};if(d.isObject(c))return c;e=typeof c;if("boolean"===e)return c?{value:!0}:{value:!1};if(d.isFunction(c.getTime)||
"number"===e)return{value:c};if("string"===e)try{return JSON.parse(c)}catch(k){return{value:c}}}else if(d.isIntType(g)){if(null===c)return a?null:0;e=typeof c;if("boolean"===e)return c?1:0;if(d.isFunction(c.getTime))return c.getTime();if("number"===e||"object"===e)e="string",c=c.toString();if("string"===e){if(d.strEmpty(c))return a?null:0;a=d.tryParseInt(c,!0);if(a.ok)return a.value}}else{if(d.isStringType(g)){if(null===c)return a?null:"";e=typeof c;return"string"===e?c:"boolean"===e?c?"true":"false":
d.isFunction(c.getTime)?d.toUSDateTimeString(c):c.toString()}if(d.isRealType(g)){if(null===c)return a?null:0;e=typeof c;if("boolean"===e)return c?1:0;if(d.isFunction(c.getTime))return c.getTime();if("number"===e||"object"===e)e="string",c=c.toString();if("string"===e){if(d.strEmpty(c))return a?null:0;a=parseFloat(c);if(!isNaN(a))return a}}else{if(d.isBoolType(g))return c?!0:!1;if(d.isDateType(g)){if(null===c)return a?null:b();if("number"===typeof c)return new Date(Math.round(c));if(d.strEmpty(c)&&
a)return null;a=Date.parse(c);if(!isNaN(a))return new Date(a)}}}return b()};d.EventManager={ANY_EVENT:"*",eventBind:function(a,c){if(d.strEmpty(a)||!c)return!1;var g=q(this,a);if(d.inArray(g,c))return!1;g.push(c);return!0},eventUnbind:function(a,c){if(d.strEmpty(a)||!c)return!1;var g=q(this,a);return d.arrayDelete(g,c)},eventClear:function(a){if(d.strEmpty(a))return this[f]={},!0;a=q(this,a);d.arrayClear(a);return!0},eventInvocationSuspendCount:0,eventInvoke:function(a){if(d.strEmpty(a)||0!==this.eventInvocationSuspendCount)return!1;
var c=Array.prototype.slice.call(arguments,1);c.splice(0,0,this);var g=q(this,a),l;for(l in g)g[l].apply(this,c);c.splice(0,0,a);g=q(this,"*");for(l in g)g[l].apply(this,c);g=p(this);for(l in g){var b=g[l],e=b.eventNotify;WAVE.isFunction(e)&&e.apply(b,c)}return!0},eventSinkBind:function(a){if(null===a)return!1;var c=p(this);if(d.inArray(c,a))return!1;c.push(a);return!0},eventSinkUnbind:function(a){if(null===a)return!1;var c=p(this);return d.arrayDelete(c,a)},eventSinkClear:function(){this[h]=[]},
eventSinks:function(){return p(this)}};var f="@!WAVE EVENT FUN LIST",h="@!WAVE EVENT SINK LIST",m={CSS_CLASS_AREA:"wvUTestArea",CSS_CLASS_TESTTITLE:"wvUTestTitle",CSS_CLASS_TESTNUMBER:"wvUTestNumber",CSS_CLASS_OK:"wvUTestOK",CSS_CLASS_ERROR:"wvUTestError",CSS_CLASS_TABLEERROR:"wvUTestTableError",CSS_CLASS_TABLETOTAL:"wvUTestTableTotal",DIV_SUMMARY:"div_wv_utest_summary",DIV_AREA_PREFIX:"div_wv_utest_area_",DIV_TEST_PREFIX:"div_wv_utest_test_"},r=[],n={},v=!1,t=0;m.run=function(a,c,g){v||(v=!0,setTimeout(y,
1E3));d.strEmpty(a)&&(a="Unspecified");var l=null;a in n?l=n[a]:(l=m.DIV_AREA_PREFIX+d.genAutoincKey("UtestingArea"),n[a]=l);var b=d.id(l);b||(b=document.createElement("div"),b.id=l,b.className=m.CSS_CLASS_AREA,document.body.appendChild(b),b.innerHTML="<h2>"+a+"</h2>",b.STAT_NAME=a,b.STAT_TOTAL_TESTS=0,b.STAT_FAILED_TESTS=0);a="";try{r=[],t++,b.STAT_TOTAL_TESTS+=1,g()}catch(e){b.STAT_FAILED_TESTS+=1,a=e}g=!d.strEmpty(a);var f=m.DIV_TEST_PREFIX+d.genAutoincKey("UtestingCase"),l=document.createElement("div");
l.id=f;l.className=g?m.CSS_CLASS_ERROR:m.CSS_CLASS_OK;c="<div class='"+m.CSS_CLASS_TESTTITLE+"'><span class='"+m.CSS_CLASS_TESTNUMBER+"'>"+t+"</span>&nbsp;"+c+"&nbsp;&nbsp;:&nbsp;&nbsp;"+(g?"FAILED":"PASSED")+"</div>";g&&(c+="&nbsp;&nbsp;Error: "+a);if(0<r.length){c+="<pre>";for(var k in r)c+=" "+r[k];c+="</pre>"}l.innerHTML=c;b.appendChild(l)};m.testingStarted=function(){return v};m.log=function(a){r.push("  &gt; "+a+"\n")};m.logi=function(a){r.push(a)};m.assertTrue=function(a,c){d.strEmpty(c)&&
(c="Assertion not true");if(!a)throw c;};m.assertFalse=function(a,c){d.strEmpty(c)&&(c="Assertion not false");if(a)throw c;};d.UTest=m;var w={iPhone:navigator.userAgent.match(/iPhone/i),iPod:navigator.userAgent.match(/iPod/i),iPad:navigator.userAgent.match(/iPad/i),Android:navigator.userAgent.match(/Android/i),IE:-1!==navigator.appName.indexOf("Microsoft"),IEMobile:navigator.userAgent.match(/IEMobile/i),WinPhone:/windows phone/i.test(navigator.userAgent),Chrome:!!window.chrome,Safari:navigator.userAgent.match(/Safari/i)&&
!window.chrome,FireFox:-1<navigator.userAgent.indexOf("Firefox"),BlackBerry:navigator.userAgent.match(/BlackBerry/i),WebOS:navigator.userAgent.match(/webOS/i),Opera:window.opera,OperaMini:navigator.userAgent.match(/Opera Mini/i),OperaMobi:navigator.userAgent.match(/Opera Mobi/i),Silk:/silk/i.test(navigator.userAgent)};w.iOS=w.iPhone||w.iPod||w.iPad;w.Mobile=w.iOS||w.Android||w.OperaMini||w.OperaMobi||w.BlackBerry||w.WebOS||w.IEMobile||w.WinPhone||w.Silk;w.WebKit=w.Chrome||w.Safari;d.Platform=w;var u=
{EARTH_RADIUS_KM:6371,PI:3.14159265,PI2:6.28318531,MapDirection:{North:{Name:"North"},NorthEast:{Name:"NorthEast"},East:{Name:"East"},SouthEast:{Name:"SouthEast"},South:{Name:"South"},SouthWest:{Name:"SouthWest"},West:{Name:"West"},NorthWest:{Name:"NorthWest"}},distance:function(a,c,g,l){return Math.sqrt(Math.pow(a-g,2)+Math.pow(c-l,2))},distancePoints:function(a,c){return u.distance(a.x(),a.y(),c.x(),c.y())},radToDeg:function(a){return a/3.14159265*180},degToRad:function(a){return a/180*3.14159265},
azimuthRad:function(a,c,g,l){a=Math.atan2(l-c,g-a);0>a&&(a=6.28318531+a);return a},azimuthRadPoints:function(a,c){return u.azimuthRad(a.x(),a.y(),c.x(),c.y())},azimuthDeg:function(a,c,g,l){return u.azimuthRad(a,c,g,l)/6.28318531*360},azimuthDegPoints:function(a,c){return u.azimuthDeg(a.x(),a.y(),c.x(),c.y())},azimuthOfRadix:function(a,c,g,l,b){2>b&&(b=2);a=u.azimuthRad(a,c,g,l);a=u.wrapAngle(a,3.14159265/b);return Math.floor(a/6.28318531*b)},azimuthOfRadixPoints:function(a,c,g){return u.azimuthOfRadix(a.x(),
a.y(),c.x(),c.y(),g)},toRectXY:function(a,c,g,l){return new u.Rectangle(new u.Point(a,c),new u.Point(g,l))},toRectWH:function(a,c,g,l){return new u.Rectangle(new u.Point(a,c),new u.Point(a+g,c+l))},overlapAreaRect:function(a,c){var g=a.topLeft(),l=c.topLeft();return u.overlapAreaWH(g.x(),g.y(),a.width(),a.height(),l.x(),l.y(),c.width(),c.height())},overlapAreaWH:function(a,c,g,l,b,e,k,d){a=k>=g?a<=b?a+g-b:a+g>=b+k?b+k-a:g:b<=a?b+k-a:b+k>=a+g?a+g-b:k;c=d>=l?c<=e?c+l-e:c+l>=e+d?e+d-c:l:e<=c?e+d-c:e+
d>=c+l?c+l-e:d;0>a&&(a=0);0>c&&(c=0);return a*c},overlapAreaXY:function(a,c,g,l,b,e,k,d){return u.overlapAreaWH(a,c,g-a,l-c,b,e,k-b,d-e)},lineIntersectsRect:function(a,c,g,l,b,e,k,d){d=e-d;k-=b;b=-(d*b+k*e);e=d*a+k*c+b;var f=0===e?0:0<e?1:-1;e=d*a+k*l+b;if((0===e?0:0<e?1:-1)!==f)return!0;e=d*g+k*c+b;if((0===e?0:0<e?1:-1)!==f)return!0;e=d*g+k*l+b;return(0===e?0:0<e?1:-1)!==f?!0:!1},intersectionLengthRectLineXY:function(a,c,g,l,b,e,k,d){return u.lineIntersectsRect(a,c,g,l,b,e,k,d)?u.distance(b<a?a:
b>g?g:b,e<c?c:e>l?l:e,k<a?a:k>g?g:k,d<c?c:d>l?l:d):0},wrapAngle:function(a,c){c%=6.28318531;0>c&&(c=6.28318531+c);return(a+c)%6.28318531},mapDirectionToAngle:function(a){switch(a){case u.MapDirection.North:return 1.5707963275;case u.MapDirection.South:return 4.7123889825;case u.MapDirection.East:return 0;case u.MapDirection.West:return 3.141592655;case u.MapDirection.NorthEast:return.78539816375;case u.MapDirection.NorthWest:return 2.35619449125;case u.MapDirection.SouthEast:return 5.49778714625;
case u.MapDirection.SouthWest:return.625*6.28318531;default:return 0}},angleToMapDirection:function(a){a=u.wrapAngle(a,0);return 0<=a&&.392699081875>a?u.MapDirection.East:.392699081875<=a&&1.178097245625>a?u.MapDirection.NorthEast:1.178097245625<=a&&a<6.28318531*5/16?u.MapDirection.North:a>=6.28318531*5/16&&2.748893573125>a?u.MapDirection.NorthWest:2.748893573125<=a&&3.534291736875>a?u.MapDirection.West:3.534291736875<=a&&a<6.28318531*11/16?u.MapDirection.SouthWest:a>=6.28318531*11/16&&5.105088064375>
a?u.MapDirection.South:5.105088064375<=a&&a<6.28318531*15/16?u.MapDirection.SouthEast:u.MapDirection.East},perimeterViolationArea:function(a,c){var b=0,l=0;c.left()<a.left()?b=a.left()-c.left():c.right()>a.right()&&(b=c.right()-a.right());c.top()<a.top()?l=a.top()-c.top():c.bottom()>a.bottom()&&(l=c.bottom()-a.bottom());return b*c.height()+l*c.width()},findRayFromRectangleCenterSideIntersection:function(a,c){var b=new u.Point(a.left()+a.width()/2,a.top()+a.height()/2),l=a.width()>a.height()?a.width():
a.height();100>l&&(l=100);var e=new u.PolarPoint(l,c),l=e.toPoint(),d=0!==l.x()?l.y()/l.x():0,k=0,f=0,l=[],k=b.x()+(0!==d?(a.top()-b.y())/d:0),f=a.top();k>=a.left()&&k<=a.right()&&l.push(new u.Point(k,f));k=b.x()+(0!==d?(a.bottom()-b.y())/d:0);f=a.bottom();k>=a.left()&&k<=a.right()&&l.push(new u.Point(k,f));k=a.right();f=b.y()+d*(a.right()-b.x());f>=a.top()&&f<=a.bottom()&&l.push(new u.Point(k,f));k=a.left();f=b.y()+d*(a.left()-b.x());f>=a.top()&&f<=a.bottom()&&l.push(new u.Point(k,f));d=new u.Point(1E6,
1E6);k=1E6;e=e.toPoint();e.offset(b.x(),b.y());for(var m in l)b=l[m],f=u.distancePoints(b,e),f<k&&(d=b,k=f);return d},rotateRectAroundCircle:function(a,c,b,l,e,d){l/=2;e/=2;a+=Math.cos(d)*(l+b);c+=Math.sin(d)*(e+b);return new u.toRectXY(a-l,c-e,a+l,c+e)},getBBox:function(a){if(!a)return null;var c=a.length;if(0===c)return null;for(var b=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,e=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,k=0;k<c;k++){var f=a[k],m=f.x,f=f.y;m<b&&(b=m);m>l&&(l=m);
f<e&&(e=f);f>d&&(d=f)}return u.toRectXY(b,e,l,d)},Point:function(a,c){var b=a;this.x=function(a){"undefined"!==typeof a&&(b=a);return b};var l=c;this.y=function(a){"undefined"!==typeof a&&(l=a);return l};this.offset=function(a,c){b+=a;l+=c}}};u.Point.prototype.toPolarPoint=function(a){var c=u.distancePoints(a,this);a=Math.atan2(this.y()-a.y(),this.x()-a.x());0>a&&(a=6.28318531+a);return new u.PolarPoint(c,a)};u.Point.prototype.isEqual=function(a){return this.x()===a.x()&&this.y()===a.y()};u.Point.prototype.toString=
function(){return"("+this.x().toString()+" , "+this.y().toString()+")"};u.PolarPoint=function(a,c){function b(a){if(0>a||6.28318531<a)throw"Invalid polar coordinates angle";return a}var l=a;this.radius=function(a){"undefined"!==typeof a&&(l=a);return l};var e=b(c);this.theta=function(a){"undefined"!==typeof a&&(e=b(a));return e};this.toPoint=function(){return new u.Point(l*Math.cos(e),l*Math.sin(e))}};u.PolarPoint.prototype.isEqual=function(a){return this.radius()===a.radius()&&this.theta()===a.theta()};
u.PolarPoint.prototype.toString=function(){return"("+this.radius().toString()+" , "+u.radToDeg(this.theta()).toString()+"\u00b0)"};u.Rectangle=function(a,c){var b=this,l=a,e=c;this.corner1=function(a){"undefined"!==typeof a&&(l=a);return l};this.corner2=function(a){"undefined"!==typeof a&&(e=a);return e};this.topLeft=function(){var a=l.x(),c=e.x();c<a&&(a=c);var b=l.y(),c=e.y();c<b&&(b=c);return new u.Point(a,b)};this.bottomRight=function(){var a=l.x(),c=e.x();c>a&&(a=c);var b=l.y(),c=e.y();c>b&&
(b=c);return new u.Point(a,b)};this.width=function(){return Math.abs(l.x()-e.x())};this.height=function(){return Math.abs(l.y()-e.y())};this.left=function(){var a=l.x(),c=e.x();c<a&&(a=c);return a};this.right=function(){var a=l.x(),c=e.x();c>a&&(a=c);return a};this.top=function(){var a=l.y(),c=e.y();c<a&&(a=c);return a};this.bottom=function(){var a=l.y(),c=e.y();c>a&&(a=c);return a};this.centerPoint=function(){return new u.Point(b.left()+b.width()/2,b.top()+b.height()/2)};this.square=function(){return b.width()*
b.height()};this.contains=function(a){var c=b.topLeft(),l=b.bottomRight(),e=a.x();a=a.y();return e>=c.x()&&e<=l.x()&&a>=c.y()&&a<=l.y()}};u.Rectangle.prototype.isEqual=function(a){return this.left()===a.left()&&this.top()===a.top()&&this.width()===a.width()&&this.height()===a.height()};u.Rectangle.prototype.toString=function(){return"("+this.left().toString()+","+this.top().toString()+" ; "+this.width().toString()+"x"+this.height().toString()+")"};u.vectorizeBalloon=function(a,c,b){var l=[],e=new u.Point(a.left()+
a.width()/2,a.top()+a.height()/2),d=c.toPolarPoint(e),k=u.findRayFromRectangleCenterSideIntersection(a,u.wrapAngle(d.theta(),-b/2));b=u.findRayFromRectangleCenterSideIntersection(a,u.wrapAngle(d.theta(),+b/2));l.push(new u.Point(a.left(),a.top()));l.push(new u.Point(a.right(),a.top()));l.push(new u.Point(a.right(),a.bottom()));l.push(new u.Point(a.left(),a.bottom()));l.push(k);l.push(c);l.push(b);l.sort(function(a,c){var b=a.toPolarPoint(e),l=c.toPolarPoint(e);return b.theta()>l.theta()?-1:1});return l};
d.Geometry=u;d.Walkable={wSelect:function(a){var c=this,b={getWalker:function(){var b=c.getWalker(),g;return{reset:function(){b.reset()},moveNext:function(){if(!b.moveNext())return!1;g=a(b.current());return!0},current:function(){return g}}}};WAVE.extend(b,WAVE.Walkable);return b},wSelectMany:function(a){var c=this,b={getWalker:function(){var b=c.getWalker(),g,e;return{reset:function(){for(b.reset();b.moveNext();){var c=b.current();if(null!==c){g=(a?a(c):c).getWalker();break}}},moveNext:function(){if(g&&
g.moveNext())return e=g.current(),!0;for(;b.moveNext();){var c=b.current();if(null!==c&&(g=(a?a(c):c).getWalker(),g.moveNext()))return e=g.current(),!0}return!1},current:function(){return e}}}};WAVE.extend(b,WAVE.Walkable);return b},wWhere:function(a){var c=this,b={getWalker:function(){var b=c.getWalker();return{reset:function(){b.reset()},moveNext:function(){for(;b.moveNext();)if(a(b.current()))return!0;return!1},current:function(){return b.current()}}}};WAVE.extend(b,WAVE.Walkable);return b},wAt:function(a){for(var c=
this.getWalker(),b=-1;c.moveNext();)if(b++,b===a)return c.current();return null},wFirst:function(a){for(var c=this.getWalker();c.moveNext();)if(a){if(a(c.current()))return c.current()}else return c.current();return null},wFirstIdx:function(a){for(var c=this.getWalker(),b=-1;c.moveNext();)if(b++,a(c.current()))return b;return-1},wCount:function(a){for(var c=this.getWalker(),b=0;c.moveNext();)a?a(c.current())&&b++:b++;return b},wDistinct:function(a){var c=this,b={getWalker:function(){var b=c.getWalker();
return new function(){function c(g){return a?a(g,b.current()):g===b.current()}var g=[],e=WAVE.arrayWalkable(g);this.reset=function(){b.reset();g.splice(0,g.length)};this.moveNext=function(){for(;b.moveNext();)if(-1===e.wFirstIdx(c))return g.push(b.current()),!0;return!1};this.current=function(){return b.current()}}}};WAVE.extend(b,WAVE.Walkable);return b},wConcat:function(a){var c=this,b={getWalker:function(){var b=c.getWalker(),g=null;return{reset:function(){b.reset();g=null},moveNext:function(){if(null===
g){if(b.moveNext())return!0;g=a.getWalker()}return g.moveNext()},current:function(){return null===g?b.current():g.current()}}}};WAVE.extend(b,WAVE.Walkable);return b},wExcept:function(a,c){var b=this,l={getWalker:function(){function l(a){return c?c(e.current(),a):a===e.current()}var e=b.getWalker();return{reset:function(){e.reset()},moveNext:function(){for(;e.moveNext();)if(-1===a.wFirstIdx(l))return!0;return!1},current:function(){return e.current()}}}};WAVE.extend(l,WAVE.Walkable);return l},wGroup:function(a,
c){var b=this,l={getWalker:function(){return new function(){var l=b.wDistinct(function(c,b){return a(c)===a(b)}).getWalker();this.reset=function(){l.reset()};this.moveNext=function(){return l.moveNext()};this.current=function(){return{k:a(l.current()),v:b.wWhere(function(c){return a(c)===a(l.current())}).wSelect(function(a){return c(a)})}}}}};WAVE.extend(l,WAVE.Walkable);return l},wGroupIntoObject:function(){var a={};this.wEach(function(c){a[c.k]=c.v.wToArray()});return a},wGroupIntoArray:function(a,
c){var b=[];this.wEach(function(a){b.push({k:a.k,v:a.v.wToArray()})});return b},wGroupAggregate:function(a,c){var b=this,l={getWalker:function(){var c=b.getWalker();return{reset:function(){c.reset()},moveNext:function(){return c.moveNext()},current:function(){var b=c.current();return{k:b.k,v:b.v.wAggregate(function(c,l){return a(b.k,c,l)})}}}}};WAVE.extend(l,WAVE.Walkable);return l},wOrder:function(a){var c=this.wToArray();a||(a=function(a,c){return a<c?-1:a>c?1:0});c.sort(a);return WAVE.arrayWalkable(c)},
wTake:function(a){var c=this,b={getWalker:function(){var b=c.getWalker();return new function(){var c=0;this.reset=function(){b.reset();c=0};this.moveNext=function(){if(!(b.moveNext()&&c<a))return!1;c++;return!0};this.current=function(){return b.current()}}}};WAVE.extend(b,WAVE.Walkable);return b},wTakeWhile:function(a){var c=this,b={getWalker:function(){var b=c.getWalker();return{reset:function(){b.reset()},moveNext:function(){return b.moveNext()&&a(b.current())?!0:!1},current:function(){return b.current()}}}};
WAVE.extend(b,WAVE.Walkable);return b},wSkip:function(a){var c=this,b={getWalker:function(){var b=c.getWalker();return new function(){var c=-1;this.reset=function(){b.reset();c=-1};this.moveNext=function(){for(;b.moveNext();)if(c++,c>=a)return!0;return!1};this.current=function(){return b.current()}}}};WAVE.extend(b,WAVE.Walkable);return b},wAny:function(a){var c=this.getWalker();if(!a)return c.moveNext();for(;c.moveNext();)if(a(c.current()))return!0;return!1},wAll:function(a){var c=this.getWalker();
if(!a)return!c.moveNext();for(;c.moveNext();)if(!a(c.current()))return!1;return!0},wMin:function(a){a||(a=function(a,c){return a<c});var c=this.getWalker();if(!c.moveNext())return null;for(var b=c.current();c.moveNext();)a(c.current(),b)&&(b=c.current());return b},wMax:function(a){a||(a=function(a,c){return a>c});var c=this.getWalker();if(!c.moveNext())return null;for(var b=c.current();c.moveNext();)a(c.current(),b)&&(b=c.current());return b},wAggregate:function(a,c){var b=c;this.wEach(function(c){b=
a(b,c)});return b},wSum:function(a){"undefined"===typeof a&&(a=0);return this.wAggregate(function(a,b){return a+b},a)},wEqual:function(a,c){var b=this.getWalker(),l=a.getWalker();do{var e=b.moveNext(),d=l.moveNext();if(!e&&!d)return!0;if(e!==d)return!1;e=b.current();d=l.current();if(!c){if(e!==d)return!1}else if(!c(e,d))return!1}while(1)},wToArray:function(){for(var a=this.getWalker(),c=[];a.moveNext();)c.push(a.current());return c},wEach:function(a){for(var c=this.getWalker(),b=0;c.moveNext();)a(c.current(),
b++);return this},wWMA:function(a){var c=this;"undefined"===typeof a&&(a=.5);var b={getWalker:function(){var b=c.getWalker(),e=null,g={s:-1,a:0};return{reset:function(){e=null;g={s:-1,a:0};b.reset()},moveNext:function(){if(!b.moveNext())return!1;g.s=b.current().s;var c=b.current().a;g.a=0===g.s?c:(1-a)*c+a*e;e=g.a;return!0},current:function(){return g},samplingRate:function(){return b.samplingRate?b.samplingRate():2}}}};WAVE.extend(b,WAVE.Walkable);return b},wHarmonicFrequencyFilter:function(a,c){var b=
this;"undefined"===typeof a&&(a=1);"undefined"===typeof c&&(c=1);1.0001>a&&(a=1.0001);1E-4>c&&(c=1E-4);var l={getWalker:function(){var l=b.getWalker(),e=0,d={s:-1,a:0},f=0,m=0;return{reset:function(){m=f=e=0;d={s:-1,a:0};l.reset()},moveNext:function(){if(!l.moveNext())return!1;d.s=l.current().s;var b=l.current().a,g=b-m;m=b;f+=(g-c*e)/a;f*=.98;d.a=e+f;e=d.a;return!0},current:function(){return d},samplingRate:function(){return l.samplingRate?l.samplingRate():2}}}};WAVE.extend(l,WAVE.Walkable);return l},
wConstLinearSampling:function(a){var c=this,b={getWalker:function(){a=a||1;var b=c.getWalker(),e=!1,g=null,d=a/2,f=0,m,u,h,n=[],C={};return new function(){this.reset=function(){n.splice(0,n.length);f=0;e=!1;g=null;b.reset()};this.moveNext=function(){function c(a,b){for(var C=0;C<n.length;C++){var e=n[C].s;if(e>a&&e<=b)return!0}return!1}function t(){if(b.moveNext())return g=b.current().s,!0;e=!0;return!1}function r(a,c){for(var b=0,C=0,e=0;e<n.length;e++){var l=n[e];l.s>a&&l.s<=c&&(b+=l.a,C++)}return b/
C}function v(a){for(;t();)if(b.current().s>=a){n.push(b.current());break}else n.push(b.current())}if(!f){if(!t())return!1;n.push(b.current());m=b.current().s;u=m-d;h=m+d;v(h);C.s=f++;var x=r(-Number.MAX_VALUE,h);C.a=x;return!0}m+=a;u=m-d;h=m+d;if(e&&g<u)return!1;C.s=f++;(function(a,c){for(;1<n.length&&n[0].s<a&&n[1].s<c;)n.shift()})(u,h);if(c(u,h))return C.a=r(u,h),!0;v(h);if(c(u,h))return C.a=r(u,h),!0;var x=n[0],p=n[1],p=(p.a-x.a)/(p.s-x.s);C.a=p*m+(x.a-p*x.s);return!0};this.current=function(){return C}}}};
WAVE.extend(b,WAVE.Walkable);return b},wSineGen:function(a){var c=this,b={getWalker:function(){var b=c.getWalker();a=a||{};var e=a.f||1,d="undefined"===typeof a.a?1:a.a,g=a.d||0,f=a.r||(b.samplingRate?b.samplingRate():2),m=a.p||0;2>f&&(f=2);var h=6.28318531/f*e,n=0,t=m,C={},b=c.getWalker();return new function(){this.reset=function(){n=0;t=m;b.reset()};this.moveNext=function(){if(!b.moveNext())return!1;C.s=n++;C.a=d*Math.sin(t)+g+b.current().a;t=u.wrapAngle(t,h);return!0};this.current=function(){return C};
this.samplingRate=function(){return f}}}};WAVE.extend(b,WAVE.Walkable);return b},wSawGen:function(a){var c=this,b={getWalker:function(){var b=c.getWalker();a=a||{};var e=a.f||1,d="undefined"===typeof a.a?1:a.a,g=a.d||0,f=a.r||(b.samplingRate?b.samplingRate():2),m=a.p||0,n=a.s||.9;2>f&&(f=2);var h=1/3.14159265/n,t=1/3.14159265/(n-1),C=1-2*n/(n-1),r=6.28318531/f*e,v=0,x=m,p={},b=c.getWalker();return new function(){this.reset=function(){v=0;x=m;b.reset()};this.moveNext=function(){if(!b.moveNext())return!1;
p.s=v++;p.a=d*(x<6.28318531*n?h*x+-1:t*x+C)+g+b.current().a;x=u.wrapAngle(x,r);return!0};this.current=function(){return p};this.samplingRate=function(){return f}}}};WAVE.extend(b,WAVE.Walkable);return b},wSquareGen:function(a){var c=this,b={getWalker:function(){var b=c.getWalker();a=a||{};var e=a.f||1,d="undefined"===typeof a.a?1:a.a,g=a.d||0,f=a.r||(b.samplingRate?b.samplingRate():2),m=a.p||0,n=a.s||.9;2>f&&(f=2);var h=-2/3.14159265/(1-n),t=1-3.14159265*h*n,C=2/3.14159265/(1-n),r=-1-3.14159265*C*
(1+n),v=6.28318531/f*e,x=0,p=m,w={},b=c.getWalker();return new function(){this.reset=function(){x=0;p=m;b.reset()};this.moveNext=function(){if(!b.moveNext())return!1;w.s=x++;w.a=d*(3.14159265>p?p<3.14159265*n?1:h*p+t:p<3.14159265+3.14159265*n?-1:C*p+r)+g+b.current().a;p=u.wrapAngle(p,v);return!0};this.current=function(){return w};this.samplingRate=function(){return f}}}};WAVE.extend(b,WAVE.Walkable);return b},wRandomGen:function(a){var c=this,b={getWalker:function(){var b=c.getWalker();a=a||{};var e=
"undefined"===typeof a.a?1:a.a,d=a.r||(c.samplingRate?c.samplingRate():2);2>d&&(d=2);var g=0,f={},b=c.getWalker();return new function(){this.reset=function(){b.reset();g=0};this.moveNext=function(){if(!b.moveNext())return!1;f.s=g++;f.a=b.current().a+2*e*(Math.random()-.5);return!0};this.current=function(){return f};this.samplingRate=function(){return d}}}};WAVE.extend(b,WAVE.Walkable);return b}};d.signalConstSrc=function(a){function c(a){var c=a.a||0,b=a.qty,e=a.r||2;2>e&&(e=2);var d=0,g={};this.reset=
function(){d=0};this.moveNext=function(){if(b&&d>=b)return!1;g.s=d;g.a=c;d++;return!0};this.current=function(){return g};this.samplingRate=function(){return e}}a=a||{};var b={getWalker:function(){return new c(a)}};WAVE.extend(b,WAVE.Walkable);return b};d.arrayWalkable=function(a){var c=function(){var c=-1;this.reset=function(){c=-1};this.moveNext=function(){return++c<a.length};this.current=function(){return 0>c||c>=a.length?null:a[c]}},b={getWalker:function(){return new c},OriginalArray:a};WAVE.extend(b,
WAVE.Walkable);return b};d.groupWalkable=function(a){var c=function(){var c=-1,b=null;this.reset=function(){c=-1;b=null};this.moveNext=function(){if(++c<a.length){var e=a[c];b={k:e.k,v:WAVE.arrayWalkable(e.v)};return!0}return!1};this.current=function(){return b}},b={getWalker:function(){return new c},OriginalArray:a};WAVE.extend(b,WAVE.Walkable);return b};d.SVG=function(){var a={createCircle:function(c,b,e,d){d=d||{};d.cx=c;d.cy=b;d.r=e;return a.createShape("circle",d)},createRect:function(c,b,e,
d,f){f=f||{};f.x=c;f.y=b;f.width=e;f.height=d;return a.createShape("rect",f)},createLine:function(c,b,e,d,f){f=f||{};f.x1=c;f.y1=b;f.x2=e;f.y2=d;return a.createShape("line",f)},createPath:function(c){return a.createShape("path",c)},createText:function(c,b,e,d){d=d||{};d.x=b;d.y=e;b=a.createShape("text",d);c=document.createTextNode(c);b.appendChild(c);return b},createGroup:function(c){return a.createShape("g",c)},createMarker:function(a,b){var e=this.createShape("marker",a),d;for(d in b)e.appendChild(b[d]);
return e},createDefs:function(a){var b=this.createShape("defs"),e;for(e in a)b.appendChild(a[e]);return b},createUse:function(b,e,d){e=a.createShape("use",{x:e,y:d});e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+b);return e},createClipPath:function(b,e,d){d=d||{};d.id=b;b=a.createShape("clipPath",d);for(var f in e)b.appendChild(e[f]);return b},createShape:function(a,b){var e=document.createElementNS("http://www.w3.org/2000/svg",a),d;for(d in b)try{e.setAttribute(d,b[d])}catch(f){console.error(f)}return e}};
return a}();d.ajaxCall=function(a,b,e,d,f,m,k,u){z(a,b,e,d,f,m,k,u)};d.ajaxGet=function(a,b,e,d,f){z("GET",a,null,b,e,d,f)};d.ajaxGetJSON=function(a,b,e,f,m){z("GET",a,b,e,f,m,d.CONTENT_TYPE_JSON,d.CONTENT_TYPE_JSON_UTF8)};d.ajaxPost=function(a,b,e,d,f,m,k){z("POST",a,b,e,d,f,m,k)};d.ajaxPostJSON=function(a,b,e,f,m){z("POST",a,b,e,f,m,d.CONTENT_TYPE_JSON,d.CONTENT_TYPE_JSON_UTF8)};d.ajaxPatch=function(a,b,e,d,f){z("PATCH",a,null,b,e,d,f)};d.ajaxPatchJSON=function(a,b,e,f,m){z("PATCH",a,b,e,f,m,d.CONTENT_TYPE_JSON,
d.CONTENT_TYPE_JSON_UTF8)};d.onReady=function(a){d.isFunction(a)&&("loading"!==document.readyState?a():d.isFunction(document.addEventListener)?document.addEventListener("DOMContentLoaded",a):d.isFunction(document.attachEvent)&&document.attachEvent("onreadystatechange",function(){"loading"!==document.readyState&&a()}))};d.copyToClipboard=function(a){if("undefined"!==typeof a&&null!==a){var b,e=!1;if(d.isString(a)){if(d.strEmpty(a))return;e=!0;b=document.createElement("p");b.style.border="0";b.style.padding=
"0";b.style.margin="0";b.style.position="absolute";b.style.left="-9999px";b.style.top="-9999px";b.setAttribute("readonly","");b.innerHTML=a;document.body.appendChild(b)}else b=a;var f;try{d.selectElement(b),f=document.execCommand("copy")}catch(m){f=!1}e&&document.body.removeChild(b);return f}};d.selectElement=function(a){var b,e;document.body.createTextRange?(b=document.body.createTextRange(),b.moveToElementText(a),b.select()):window.getSelection&&(e=window.getSelection(),b=document.createRange(),
b.selectNodeContents(a),e.removeAllRanges(),e.addRange(b))};return d}();
WAVE.RecordModel=function(){var q={FIELDDEF_DEFAULTS:{Description:"",Placeholder:"",Type:"string",Key:!1,Kind:"text",Case:"asis",Stored:!0,Required:!1,Applicable:!0,Enabled:!0,ReadOnly:!1,Visible:!0,Password:!1,MinValue:null,MaxValue:null,MinSize:0,Size:0,ControlType:"auto",ScriptType:null,DefaultValue:null,Hint:null,Marked:!1,LookupDict:{},Lookup:{},DeferValidation:!1,Config:null},EVT_VALIDATION_DEFINITION_CHANGE:"validation-definition-change",EVT_INTERACTION_CHANGE:"interaction-change",EVT_DATA_CHANGE:"data-change",
EVT_RECORD_LOAD:"record-load",EVT_VALIDATE:"validate",EVT_VALIDATED:"validated",EVT_FIELD_LOAD:"field-load",EVT_FIELD_RESET:"field-reset",EVT_FIELD_DROP:"field-drop",EVT_PHASE_BEFORE:"before",EVT_PHASE_AFTER:"after",CTL_TP_AUTO:"auto",CTL_TP_CHECK:"check",CTL_TP_RADIO:"radio",CTL_TP_COMBO:"combo",CTL_TP_TEXT:"text",CTL_TP_NLS:"nls",CTL_TP_SCRIPT:"script",CTL_TP_TEXTAREA:"textarea",CTL_TP_HIDDEN:"hidden",CTL_TP_PUZZLE:"puzzle",CTL_TP_ERROR_REC:"error-rec",CTL_TP_ERROR_SUMMARY:"error-summary",CTL_TP_CHAIN_SELECTOR:"chain-selector",
KIND_TEXT:"text",KIND_SCREENNAME:"screenname",KIND_COLOR:"color",KIND_DATE:"date",KIND_DATETIME:"datetime",KIND_DATETIMELOCAL:"datetime-local",KIND_EMAIL:"email",KIND_MONTH:"month",KIND_NUMBER:"number",KIND_RANGE:"range",KIND_SEARCH:"search",KIND_TEL:"tel",KIND_TIME:"time",KIND_URL:"url",KIND_WEEK:"week",CASE_ASIS:"asis",CASE_UPPER:"upper",CASE_LOWER:"lower",CASE_CAPS:"caps",CASE_CAPSNORM:"capsnorm"},p=[];q.records=function(){return WAVE.arrayShallowCopy(p)};q.isDirty=function(){for(var q in p)if(p[q].isGUIModified())return!0;
return!1};q.Record=function(y,z){if(!y)throw"Record.ctor(need id+fieldFunc or initObject)";var d=this,A=!1;WAVE.extend(d,WAVE.EventManager);this.eventInvoke(q.EVT_RECORD_LOAD,q.EVT_PHASE_BEFORE);var b=null,x=null,e="unspecified",f="",h="";WAVE.isObject(y)&&y.fields?(b=y.ID,x=y.ISOLang,y.__FormMode&&(e=y.__FormMode),y.__CSRFToken&&(f=y.__CSRFToken),y.__Roundtrip&&(h=y.__Roundtrip)):(b=y.toString(),y=null);var m=WAVE.strEmpty(b)?WAVE.genRndKey(16):b,r=WAVE.strEmpty(x)?"eng":x,n=[],v=!1,t=null;this.ID=
function(){return m};this.ISOLang=function(){return r};this.formMode=function(){return e};this.csrfToken=function(){return f};this.roundtrip=function(){return h};this.loaded=function(){return A};this.fields=function(){return WAVE.arrayShallowCopy(n)};this.data=function(b,a){var c={},d;for(d in n){var l=n[d];b&&!l.isModified()&&!l.isGUIModified()||!a&&!l.stored()||(c[l.name()]=l.value())}WAVE.strEmpty(e)||"unspecified"===e||(c.__FormMode=e);WAVE.strEmpty(f)||(c.__CSRFToken=f);WAVE.strEmpty(h)||(c.__Roundtrip=
h);return c};this.fieldByName=function(b){if(WAVE.strEmpty(b))return null;for(var a in n){var c=n[a];if(WAVE.strSame(c.name(),b))return c}return null};this.allValidationErrors=function(){var b=[];null!==t&&b.push(t);for(var a in n){var c=n[a].validationError();null!==c&&b.push(c)}return b};this.allValidationErrorStrings=function(){var b="",a=this.allValidationErrors(),c;for(c in a)b+=a[c].toString()+"\n";return b};this.validate=function(){v=!1;t=null;var b=v=!0,a;for(a in n)n[a].validate()||(b=!1);
if(b)try{d.eventInvoke(q.EVT_VALIDATE)}catch(c){t=c,b=!1}d.eventInvoke(q.EVT_VALIDATED);return b};this.validated=function(){return v};this.validationError=function(){return t};this.valid=function(){return v&&null===t&&this.fieldsValid()};this.setExternalValidationError=function(b,a){WAVE.strEmpty(a)||(t=a,v=!1)};this.fieldsValidated=function(){for(var b in n)if(!n[b].validated())return!1;return!0};this.fieldsValid=function(){for(var b in n)if(!n[b].valid())return!1;return!0};this.isModified=function(){for(var b in n)if(n[b].isModified())return!0;
return!1};this.isGUIModified=function(){for(var b in n)if(n[b].isGUIModified())return!0;return!1};this.resetModified=function(){for(var b in n){var a=n[b];a.resetModified();a.resetGUIModified()}return!1};this.resetSchema=function(){for(var b in n)n[b].resetSchema()};this.applyDefaultValue=function(b){for(var a in n)n[a].applyDefaultValue(b)};this.latchAllEvents=function(b){this.eventInvocationSuspendCount+=b;for(var a in n)n[a].eventInvocationSuspendCount+=b};this.resetRecord=function(b){b&&d.latchAllEvents(1);
try{v=!1,t=null,this.resetSchema(),this.applyDefaultValue(!0),this.resetModified()}finally{b&&d.latchAllEvents(-1)}for(var a in n)b=n[a],b.eventInvoke(q.EVT_FIELD_RESET,b)};this.Field=function(b){function a(){v=!1;t=null;w=!1;y=null}function c(a,b){d.eventInvoke(q.EVT_VALIDATION_DEFINITION_CHANGE,m,a,b);m.eventInvoke(q.EVT_VALIDATION_DEFINITION_CHANGE,a,b)}function e(a,b){d.eventInvoke(q.EVT_INTERACTION_CHANGE,m,a,b);m.eventInvoke(q.EVT_INTERACTION_CHANGE,a,b)}var f=!1;if(!WAVE.isObject(b))throw"Field.ctor(fieldDef must be a map)";
if(WAVE.strEmpty(b.Name))throw"Field def must have a name";if(WAVE.strEmpty(b.Type))throw"Field def must have a type";b.Key=WAVE.strAsBool(b.Key,q.FIELDDEF_DEFAULTS.Key);b.Stored=WAVE.strAsBool(b.Stored,q.FIELDDEF_DEFAULTS.Stored);b.Required=WAVE.strAsBool(b.Required,q.FIELDDEF_DEFAULTS.Required);b.Applicable=WAVE.strAsBool(b.Applicable,q.FIELDDEF_DEFAULTS.Applicable);b.Enabled=WAVE.strAsBool(b.Enabled,q.FIELDDEF_DEFAULTS.Enabled);b.ReadOnly=WAVE.strAsBool(b.ReadOnly,q.FIELDDEF_DEFAULTS.ReadOnly);
b.Visible=WAVE.strAsBool(b.Visible,q.FIELDDEF_DEFAULTS.Visible);b.Password=WAVE.strAsBool(b.Password,q.FIELDDEF_DEFAULTS.Password);b.Marked=WAVE.strAsBool(b.Marked,q.FIELDDEF_DEFAULTS.Marked);b.DeferValidation=WAVE.strAsBool(b.DeferValidation,q.FIELDDEF_DEFAULTS.DeferValidation);var m=this;WAVE.extend(m,WAVE.EventManager);n.push(m);var h="fld"+b.Name;d[h]=m;d.eventInvoke(q.EVT_FIELD_LOAD,m,q.EVT_PHASE_BEFORE);WAVE.propStrAsObject(b,"LookupDict");WAVE.propStrAsObject(b,"Lookup");var k=WAVE.clone(b);
WAVE.extend(k,q.FIELDDEF_DEFAULTS,!0);var r=null,x=!1,p=!1,w=!1,y=null;this.record=function(){return d};this.loaded=function(){return f};this.drop=function(){if(!d[h])return!1;this.eventInvoke(q.EVT_FIELD_DROP,q.EVT_PHASE_BEFORE);d.eventInvoke(q.EVT_FIELD_DROP,m,q.EVT_PHASE_BEFORE);WAVE.arrayDelete(n,this);delete d[h];d.eventInvoke(q.EVT_FIELD_DROP,m,q.EVT_PHASE_AFTER);this.eventInvoke(q.EVT_FIELD_DROP,q.EVT_PHASE_AFTER);return!0};this.schemaDef=function(){return b};this.name=function(){return k.Name};
this.type=function(){return k.Type};this.isTypeLogical=function(){return WAVE.strOneOf(k.Type,["bool","boolean","logical"])};this.isLookupDict=function(){return 0<Object.keys(k.LookupDict).length};this.key=function(){return k.Key};this.stored=function(){return k.Stored};this.about=function(){var a=k.Description;WAVE.strEmpty(a)&&(a=k.Name);return a};this.inferControlType=function(){return this.isTypeLogical()?q.CTL_TP_CHECK:this.isLookupDict()?4<Object.keys(k.LookupDict).length?q.CTL_TP_COMBO:q.CTL_TP_RADIO:
64<k.Size?q.CTL_TP_TEXTAREA:q.CTL_TP_TEXT};this.getOrInferControlType=function(){var a=k.ControlType;if(WAVE.strEmpty(a)||WAVE.strOneOf(a,[q.CTL_TP_AUTO,"automatic","infer"]))a=this.inferControlType();return a};this.resetSchema=function(){k=WAVE.clone(b);WAVE.extend(k,q.FIELDDEF_DEFAULTS,!0);a();c(null,null);e(null,null)};this.validate=function(){function a(b,c){return WAVE.strTemplate(WAVE.strLocalize(d.ISOLang(),"RMField","error",b),c)}w=!0;y=null;try{if(k.Required&&(null===r||WAVE.strEmpty(r.toString())))throw a("Field '@f@' must have a value",
{f:this.about()});if(null!==r&&!WAVE.strEmpty(r.toString())){var b=k.MinValue;if(null!==b)try{if(r<b)throw 1;}catch(c){throw a("Field '@f@' value can not be less than '@b@'",{f:this.about(),b:b});}var e=k.MaxValue;if(null!==e)try{if(r>e)throw 1;}catch(c){throw a("Field '@f@' value can not be greater than '@b@'",{f:this.about(),b:e});}var f=k.Size;if(null!==f&&0<f&&r.toString().length>f)throw a("Field '@f@' value can not be longer than @b@ characters",{f:this.about(),b:f});f=k.MinSize;if(null!==f&&
0<f&&r.toString().length<f)throw a("Field '@f@' value can not be shorter than @b@ characters",{f:this.about(),b:f});var l=Object.keys(k.LookupDict),g=WAVE.isSimpleKeyStringMap(k.LookupDict);if(0<l.length&&g){var n=WAVE.convertScalarType(!1,r,"string","<unconvertible>");if(!WAVE.strOneOf(n,l))throw a("Field '@f@' value '@v@' is not allowed",{f:this.about(),v:n});}if(k.Kind===q.KIND_EMAIL&&!WAVE.strIsEMail(r))throw a("Field '@f@' must be a valid e-mail address",{f:this.about()});if(k.Kind===q.KIND_SCREENNAME&&
!WAVE.strIsScreenName(r))throw a("Field '@f@' must start from letter and contain only letters or digits separated by single '.' or '-' or '_'",{f:this.about()});}m.eventInvoke(q.EVT_VALIDATE)}catch(c){y=c}m.eventInvoke(q.EVT_VALIDATED);return null===y};this.validationError=function(){return y};this.setExternalValidationError=function(a,b){WAVE.strEmpty(b)||(y=b,w=!1)};this.required=function(b){if("undefined"===typeof b||b===k.Required)return k.Required;k.Required=b;a();c("required",b)};this.value=
function(b,c){if("undefined"===typeof b)return r;var e=r,f=WAVE.convertScalarType(!0,b,k.Type,k.DefaultValue),l=WAVE.isSame(e,f);if(c)var g=f,f=this.preProcessValueFromGUI(f),l=l&&WAVE.isSame(g,f);if(l)return r;d.eventInvoke(q.EVT_DATA_CHANGE,q.EVT_PHASE_BEFORE,m,e,f);this.eventInvoke(q.EVT_DATA_CHANGE,q.EVT_PHASE_BEFORE,e,f);r=f;x=!0;c&&(p=!0);k.DeferValidation?a():this.validate();this.eventInvoke(q.EVT_DATA_CHANGE,q.EVT_PHASE_AFTER,e,f);d.eventInvoke(q.EVT_DATA_CHANGE,q.EVT_PHASE_AFTER,m,e,f);return r};
this.preProcessValueFromGUI=function(a){if(null===a)return null;"string"===typeof a&&(a=WAVE.strTrim(a),k.Kind===q.KIND_TEL&&(a=WAVE.strNormalizeUSPhone(a)),k.Case===q.CASE_UPPER?a=a.toUpperCase():k.Case===q.CASE_LOWER?a=a.toLowerCase():k.Case===q.CASE_CAPS?a=WAVE.strCaps(a,!1):k.Case===q.CASE_CAPSNORM&&(a=WAVE.strCaps(a,!0)));return a};this.isNull=function(){return null===r};this.displayValue=function(){return null===r?"":WAVE.isDateType(k.Type)?k.Kind===q.KIND_DATE?WAVE.toUSDateString(r):WAVE.toUSDateTimeString(r):
r.toString()};this.setGUIValue=function(a){this.value(a,!0)};this.applyDefaultValue=function(a){(a||this.isNull())&&this.value(k.DefaultValue);return r};this.valid=function(){return null===y};this.validated=function(){return w};this.validationError=function(){return y};this.isModified=function(){return x};this.resetModified=function(){var a=x;x=!1;e("modified",!1);return a};this.isGUIModified=function(){return p};this.resetGUIModified=function(){var a=p;p=!1;e("guimodified",!1);return a};this.isEnabled=
function(){return this.enabled()&&this.applicable()};this.kind=function(a){if("undefined"===typeof a||a===k.Kind)return k.Kind;k.Kind=a;e("kind",a)};this.case=function(a){if("undefined"===typeof a||a===k.Case)return k.Case;k.Case=a;WAVE.isStringType(k.Type)&&this.value(r,!1)};this.applicable=function(a){if("undefined"===typeof a||a===k.Applicable)return k.Applicable;k.Applicable=a;e("applicable",a)};this.enabled=function(a){if("undefined"===typeof a||a===k.Enabled)return k.Enabled;k.Enabled=a;e("enabled",
a)};this.readonly=function(a){if("undefined"===typeof a||a===k.ReadOnly)return k.ReadOnly;k.ReadOnly=a;e("readonly",a)};this.visible=function(a){if("undefined"===typeof a||a===k.Visible)return k.Visible;k.Visible=a;e("visible",a)};this.password=function(a){if("undefined"===typeof a||a===k.Password)return k.Password;k.Password=a;e("password",a)};this.deferValidation=function(b){if("undefined"===typeof b||b===k.DeferValidation)return k.DeferValidation;k.DeferValidation=b;a();c("defervalidation",b)};
this.minValue=function(b){if("undefined"===typeof b||b===k.MinValue)return k.MinValue;k.MinValue=b;a();c("minvalue",b)};this.maxValue=function(b){if("undefined"===typeof b||b===k.MaxValue)return k.MaxValue;k.MaxValue=b;a();c("maxvalue",b)};this.minSize=function(b){if("undefined"===typeof b||b===k.MinSize)return k.MinSize;k.MinSize=b;a();c("minsize",b)};this.size=function(b){if("undefined"===typeof b||b===k.Size)return k.Size;k.Size=b;a();c("size",b)};this.controlType=function(a){if("undefined"===
typeof a||a===k.ControlType)return k.ControlType;k.ControlType=a;e("controltype",a)};this.scriptType=function(a){if("undefined"===typeof a||a===k.ScriptType)return k.ScriptType;k.ScriptType=a;e("scripttype",a)};this.defaultValue=function(b){if("undefined"===typeof b||b===k.DefaultValue)return k.DefaultValue;k.DefaultValue=b;a();c("defaultvalue",b)};this.lookupDict=function(b){if("undefined"===typeof b)return k.LookupDict;null===b&&(b={});if(WAVE.isSame(k.DefaultValue,b))return k.LookupDict;k.LookupDict=
b;a();c("lookupDict",b)};this.hint=function(a){if("undefined"===typeof a||a===k.Hint)return k.Hint;k.Hint=a;e("hint",a)};this.marked=function(a){if("undefined"===typeof a||a===k.Marked)return k.Marked;k.Marked=a;e("marked",a)};this.description=function(a){if("undefined"===typeof a||a===k.Description)return k.Description;k.Description=a;e("description",a)};this.placeholder=function(a){if("undefined"===typeof a||a===k.Placeholder)return k.Placeholder;k.Placeholder=a;e("placeholder",a)};this.config=
function(b){if("undefined"===typeof b||b===k.Config)return k.Config;if(!WAVE.isObject(b))throw"RecordView.config(val: must be object)";k.Config=b;a();c("config",null);e("config",null)};this.toString=function(){return"["+this.type()+"]Field("+this.name()+" = '"+this.value()+"')"};f=!0;d.eventInvoke(q.EVT_FIELD_LOAD,m,q.EVT_PHASE_AFTER)};if(y){for(var w in y.fields)b=y.fields[w],x=new this.Field(b.def),b.hasOwnProperty("val")&&x.value(b.val),b.hasOwnProperty("errorText")&&x.setExternalValidationError(WAVE.strDefault(b.error),
b.errorText),x.resetModified();y.hasOwnProperty("errorText")&&this.setExternalValidationError(WAVE.strDefault(y.error),y.errorText)}else WAVE.isFunction(z)&&z.apply(d);A=!0;p.push(this);this.eventInvoke(q.EVT_RECORD_LOAD,q.EVT_PHASE_AFTER)};q.Record.prototype.toString=function(){return"Record["+this.ID()+"]"};q.DATA_RECVIEW_ID_ATTR="data-wv-rid";q.DATA_FIELD_NAME_ATTR="data-wv-fname";q.DATA_CTL_TP_ATTR="data-wv-ctl";q.RecordView=function(p,z,d,A){if(WAVE.strEmpty(p))throw"RecordView.ctor(id: must specify)";
if(!WAVE.isObject(z))throw"RecordView.ctor(rec: must be Record)";WAVE.isObject(d)||(d=WAVE.RecordModel.GUI);var b=d,x=this,e=[],f=null;this.ID=function(){return p};this.record=function(){return z};this.gui=function(){return b};this.rootElement=function(){return f};this.destroyViews=function(){for(;0<e.length;)e[0].destroy()};var h=null;this.buildViews=function(){f=null;this.destroyViews();for(var b=document.getElementsByTagName("form"),e=0,d=b.length;e<d;e++){var v=b[e],t=v.getAttribute(q.DATA_RECVIEW_ID_ATTR);
if(WAVE.strSame(p,t)){f=v;break}}if(null===f)for(b=document.getElementsByTagName("div"),e=0,d=b.length;e<d;e++)if(v=b[e],t=v.getAttribute(q.DATA_RECVIEW_ID_ATTR),WAVE.strSame(p,t)){f=v;break}if(null===f)throw"No 'form' or 'div' element could be found with record binding '"+q.DATA_RECVIEW_ID_ATTR+"' annotation";b=WAVE.arrayShallowCopy(f.getElementsByTagName("div"));e=0;for(d=b.length;e<d;e++)v=b[e],t=v.getAttribute(q.DATA_FIELD_NAME_ATTR),WAVE.strEmpty(t)||("#"===t?new this.FieldView(v,null):(t=z.fieldByName(t),
null!==t&&new this.FieldView(v,t)));WAVE.strEmpty(z.formMode())&&WAVE.strEmpty(z.csrfToken())&&WAVE.strEmpty(z.roundtrip())||(null===h&&(h=document.createElement("div"),h.style.display="none",f.appendChild(h)),b="",WAVE.strEmpty(z.formMode())||(b+="<input type='hidden' name='__FormMode' value='"+z.formMode()+"'>"),WAVE.strEmpty(z.csrfToken())||(b+="<input type='hidden' name='__CSRFToken' value='"+z.csrfToken()+"'>"),WAVE.strEmpty(z.roundtrip())||(b+="<input type='hidden' name='__Roundtrip' value='"+
z.roundtrip()+"'>"),h.innerHTML=b)};this.views=function(){return WAVE.arrayShallowCopy(e)};this.FieldView=function(d,f){if(!d)throw"FieldView.ctor(div: element must be passed)";if(null!==f&&!WAVE.isObject(f))throw"FieldView.ctor(fld: must be Record.Field)";var n=this;e.push(n);null!==f?f.eventSinkBind(this):z.eventSinkBind(this);var h="";null!==f&&(h="fld"+f.name(),x[h]=n);this.eventNotify=function(e,h,v){WAVE.strOneOf(e,[WAVE.RecordModel.EVT_DATA_CHANGE,WAVE.RecordModel.EVT_INTERACTION_CHANGE,WAVE.RecordModel.EVT_VALIDATION_DEFINITION_CHANGE,
WAVE.RecordModel.EVT_VALIDATED])&&("undefined"===typeof v&&(v=""),v!==WAVE.RecordModel.EVT_PHASE_BEFORE&&(null!==f&&(d.style.visibility=f.visible()?"visible":"hidden"),b.eventNotifyFieldView(n,e,h,v)))};this.destroy=function(){d.innerHTML="";null!==f?f.eventSinkUnbind(this):z.eventSinkUnbind(this);WAVE.arrayDelete(e,this);null!==f&&delete x[h]};this.record=function(){return z};this.recView=function(){return x};this.field=function(){return f};this.DIV=function(){return d};this.getOrInferControlType=
function(){var b=d.getAttribute(q.DATA_CTL_TP_ATTR);return WAVE.strEmpty(b)?null===f?WAVE.RecordModel.CTL_TP_ERROR_REC:f.getOrInferControlType():b};(null===f||f.visible())&&b.buildFieldViewAnew(this)};A||this.buildViews()};return q}();
WAVE.Pay=function(){var q={Providers:{},Brands:{VISA:"Visa",MASTER_CARD:"MasterCard",AMERICAN_EXPRESS:"AmEx",DISCOVER:"Discover",JCB:"JCB",DINERS_CLUB:"Diners Club",UNKNOWN:"Card"},ErrorTypes:{OK:0,API_CONNECTION_ERROR:1,API_ERROR:2,AUTHENTICATION_ERROR:3,CARD_ERROR:4,INVALID_REQUEST_ERROR:5,RATE_LIMIT_ERROR:6,GENERAL_ERROR:100},CardErrors:{OK:0,INVALID_NUMBER:1,INVALID_EXPIRY_MONTH:2,INVALID_EXPIRY_YEAR:3,INVALID_CVC:4,INCORRECT_NUMBER:5,EXPIRED_CARD:6,INCORRECT_CVC:7,INCORRECT_ZIP:8,CARD_DECLINED:9,
MISSING:10,PROCESSING_ERROR:11,GENERAL_ERROR:100},Facade:function(p,q,z){if(WAVE.strEmpty(p))throw new WAVE.Pay.RequiredArgumentError("Facade.ctor()","providerName");if(WAVE.strEmpty(q))throw new WAVE.Pay.RequiredArgumentError("Facade.ctor()","provider");if(WAVE.strEmpty(z))throw new WAVE.Pay.RequiredArgumentError("Facade.ctor()","init");var d=this;this.providerName=function(){return p};WAVE.extend(d,WAVE.EventManager);try{q.initialize(z)}catch(A){throw new WAVE.Pay.ProviderInitError(A);}this.tokenize=
function(p,b){if(WAVE.strEmpty(p))throw new WAVE.Pay.RequiredArgumentError("tokenize()","paymentData");if(WAVE.strEmpty(b))throw new WAVE.Pay.RequiredArgumentError("tokenize()","callback");try{q.tokenize(d,p,b)}catch(x){throw new WAVE.Pay.TokenizeError(x);}}},RequiredArgumentError:function(p,q,z){this.name="RequiredArgumentError";this.message=p+" requires argument '"+q+"'";this.inner=z}};q.RequiredArgumentError.prototype=Error.prototype;q.ProviderInitError=function(p){this.name="ProviderInitError";
var q="Critical error during provider setup";"undefined"===typeof p||WAVE.strEmpty(p.message)||(q+=": "+p.message);this.message=q;this.inner=p};q.ProviderInitError.prototype=Error.prototype;q.TokenizeError=function(p){this.name="TokenizeError";var q="Critical error during tokenization";"undefined"===typeof p||WAVE.strEmpty(p.message)||(q+=": "+p.message);this.message=q;this.inner=p};q.TokenizeError.prototype=Error.prototype;q.CardValidationError=function(p){this.name="CardValidationError";var q="Card is invalid";
"undefined"===typeof p||WAVE.strEmpty(p.message)||(q+=": "+p.message);this.message=q;this.inner=p};q.CardValidationError.prototype=Error.prototype;q.validateCardNumber=function(p){if(WAVE.strEmpty(p))return!1;p=p.replace(/\s+|-/g,"");return 10<=p.length&&16>=p.length&&q.checkLuhn(p)};q.checkLuhn=function(p){if(WAVE.strEmpty(p))return!1;var q=0,z=0,d=!1;p=p.replace(/\D/g,"");for(var A=p.length-1;0<=A;A--)z=p.charAt(A),z=parseInt(z,10),d&&9<(z*=2)&&(z-=9),q+=z,d=!d;return 0===q%10};q.validateCVC=function(p){return WAVE.strEmpty(p)?
!1:3<=p.length&&4>=p.length&&/^\d+$/.test(p)};q.validateExpirationDate=function(p,q){if(WAVE.strEmpty(p)||WAVE.strEmpty(q))return!1;2===q.length&&(q="20"+q);return/^\d+$/.test(p)&&/^\d+$/.test(q)&&1<=p&&12>=p&&4===q.length&&2015<q};q.getCardBrand=function(p){return WAVE.strEmpty(p)||!/^\d{2}/.test(p)?q.Brands.UNKNOWN:/^4/.test(p)?q.Brands.VISA:/^5[1-5]/.test(p)?q.Brands.MASTER_CARD:/^3[47]/.test(p)?q.Brands.AMERICAN_EXPRESS:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/.test(p)?
q.Brands.DISCOVER:/^35(2[89]|[3-8][0-9])/.test(p)?q.Brands.JCB:/^3[0689]/.test(p)?q.Brands.DINERS_CLUB:q.Brands.UNKNOWN};return q}();WAVE.GUI=function(){function q(a){if(0<e.length){var b=e[e.length-1];a=a.target;"undefined"===typeof a||null===a||WAVE.isParentOf(b,a)||(b.tabIndex=0,b.focus())}}function p(){v||WAVE.Platform.Mobile||(window.addEventListener("focus",q,!0),f=window.pageYOffset||document.documentElement.scrollTop,r=document.body.style.top,h=document.body.style.position,m=document.body.style.overflowY,n=document.body.style.paddingRight,document.body.parentElement.offsetHeight>window.innerHeight&&(v=!0,document.body.style.position=
"fixed",document.body.style.paddingRight=n+b.getScrollBarWidth()+"px",document.body.style.overflow="hidden",document.body.style.top=-f+"px"))}function y(){v&&!WAVE.Platform.Mobile&&(window.removeEventListener("focus",q,!0),document.body.style.top=r,document.body.style.position=h,document.body.style.overflowY=m,document.body.style.paddingRight=n,document.documentElement.scrollTop=document.body.scrollTop=f,v=!1)}function z(a,b){if(a===b)return!0;if("undefined"===typeof a||"undefined"===typeof b)return!1;
WAVE.isObject(a)||(a={url:a});WAVE.isObject(b)||(b={url:b});if(a.url===b.url)if(WAVE.has(a,"clip")){if(WAVE.has(b,"clip"))return a.left|0===b.left|0&&a.right|0===b.right|0&&a.bottom|0===b.bottom|0&&a.top|0===b.top|0}else if(!WAVE.has(b,"clip"))return!0;return!1}function d(a,b,c,e){WAVE.isObject(a)||(a={url:a});a.url=WAVE.strDefault(function(a){return 0===a.indexOf("$")&&WAVE.isObject(e)?e[a.substr(1)]:a}(WAVE.strDefault(a.url)));var d=new Image;d.onerror=function(){a.error=!0;"undefined"!==typeof c&&
c.apply(d,arguments)};if(WAVE.has(a,"clip")){var f=a.clip,l=f.left|0,g=f.top|0,k=(f.right|0)-l,m=(f.bottom|0)-g,h=document.createElement("canvas");h.width=k;h.height=m;d.onload=function(){a.load=!0;a.width=k;a.height=m;h.getContext("2d").drawImage(this,l,g,k,m,0,0,k,m);"undefined"!==typeof b&&b.apply(h,arguments);delete a.img};a.element=h}else d.onload=function(){a.load=!0;a.width=this.width;a.height=this.height;"undefined"!==typeof b&&b.apply(d,arguments)},a.element=d;d.src=a.url;a.free=function(){a.element.parentNode&&
a.element.parentNode.removeChild(a.element);delete a.element;delete a.error;delete a.load;delete a.img;delete a.width;delete a.height;delete a.free};return a}function A(a,b,c,e,d){function f(d,l){function g(b){b.preventDefault();var e=b.pageX;b=b.pageY;var f=d-e,k=l-b;"undefined"!==typeof c&&c.call(a,d,l);a.scrollLeft+=f;a.scrollTop+=k;d=e;l=b}function k(b){b.preventDefault();var e=b.touches;b=e[0].pageX;var e=e[0].pageY,f=d-b,g=l-e;"undefined"!==typeof c&&c.call(a,d,l);a.scrollLeft+=f;a.scrollTop+=
g;d=b;l=e}function m(b){"undefined"!==typeof e&&e.call(a,b.pageX,b.pageY);n()}function h(b){"undefined"!==typeof e&&e.call(a,d,l);n()}function n(){document.removeEventListener("mousemove",g,!1);document.removeEventListener("touchmove",k,!1);document.removeEventListener("mouseup",m,!1);document.removeEventListener("touchend",h,!1)}"undefined"!==typeof b&&b.call(a,d,l);document.addEventListener("mousemove",g,!1);document.addEventListener("touchmove",k,!1);document.addEventListener("mouseup",m,!1);document.addEventListener("touchend",
h,!1)}a.addEventListener("mousedown",function(a){0===a.button&&(d&&a.preventDefault(),f(a.pageX,a.pageY))},!1);a.addEventListener("touchstart",function(a){var b=a.touches;1===b.length&&(d&&a.preventDefault(),f(b[0].pageX,b[0].pageY))},!1)}var b={TUNDEFINED:"undefined",CLS_TOAST:"wvToast",CLS_CURTAIN:"wvCurtain",CLS_DIALOG_BASE:"wvDialogBase",CLS_DIALOG_CONTENT:"wvDialogContent",CLS_DIALOG_HEADER:"wvDialogHeader",CLS_DIALOG_BODY:"wvDialogBody",CLS_DIALOG_FOOTER:"wvDialogFooter",CLS_DIALOG_CONFIRM_FOOTER:"wvConfirmDialogFooter",
CLS_DIALOG_CONFIRM_BUTTON:"wvConfirmDialogButton",DLG_UNDEFINED:"",DLG_CANCEL:"cancel",DLG_OK:"ok",DLG_YES:"yes",DLG_NO:"no",EVT_DIALOG_CLOSE:"dlg-close",EVT_PUZZLE_KEYPAD_CHANGE:"puzzle-change",CLS_TREE_NODE:"wvTreeNode",CLS_TREE_NODE_OWN_SELECTED:"wvTreeNodeOwnSelected",CLS_TREE_NODE_BUTTON_EXPANDED:"wvTreeNodeButtonExpanded",CLS_TREE_NODE_BUTTON_COLLAPSED:"wvTreeNodeButtonCollapsed",CLS_TREE_NODE_CONTENT:"wvTreeNodeContent",CLS_TREE_NODE_OWN:"wvTreeNodeOwn",CLS_TREE_NODE_CHILDREN:"wvTreeNodeChildren",
EVT_PHASE_BEFORE:"before",EVT_PHASE_AFTER:"after",EVT_TREE_NODE_ADD:"tree-node-add",EVT_TREE_NODE_REMOVE:"tree-node-remove",EVT_TREE_NODE_CONTENT:"tree-node-content",EVT_TREE_NODE_DATA:"tree-node-data",EVT_TREE_NODE_EXPANSION:"tree-node-expansion",EVT_TREE_NODE_SELECTION:"tree-node-selection",EVT_RULER_MOUSE_MOVE:"ruler-mouse-move",EVT_RULER_MOUSE_ENTER:"ruler-mouse-enter",EVT_RULER_MOUSE_LEAVE:"ruler-mouse-leave",TREE_SELECTION_NONE:0,TREE_SELECTION_SINGLE:1,TREE_SELECTION_MULTI:2,CLS_OBJECTINSPECTOR_EDITOR:"wvObjectInspectorEditor",
EVT_PS_EDITOR_UPDATED:"editor-updated",CLS_PS_DIV_LANGS_CONTAINER:"wvPSLangsContainer",CLS_PS_BTN_ADD:"wvPSBtnAdd",CLS_PS_BTN_DEL:"wvPSBtnDel",CLS_PS_BTN_RAW:"wvPSBtnRaw",CLS_PS_BTN_CLEAR:"wvPSBtnClear",CLS_PS_DIV_LANG_NAME:"wvPSLangLabel",CLS_PS_LANG_SELECTOR:"wvPSLangSelector",CLS_PS_TEXTAREA_RAW_EDITOR:"wvPSTextareaRawEditor",CLS_PS_LABEL_CONTAINER:"wvPSLabelContainer",CLS_PS_INPUT_CONTAINER:"wvPSInputContainer",CLS_TABS_ACTIVE_TAB:"wvTabsActive",CLS_TABS_UL:"wvTabsUl",CLS_TABS_CONTENT_DIV:"wvTabsContentDiv",
CLS_TABS_CONTENT_DIV_HIDDEN:"wvTabsContentDivHidden",CLS_TABS_CONTENT_DIV_SHOWN:"wvTabsContentDivShown",CLS_TABS_CONTENT_CONTAINER:"wvTabsContentContainer",CLS_TABS_UL_CONTAINER:"wvTabsUlContainer",CLS_TABS_LI_DISABLED:"wvTabDisabled",EVT_TABS_TAB_CHANGED:"wv-active-tab-changed",EVT_TABS_TAB_ADD:"wv-tab-add",EVT_TABS_TAB_REMOVE:"wv-tab-remove",EVT_MULTI_LINE_TEXT_UPDATED:"wv-multiline-updated",CLS_OBJECT_EDITOR_NODE_CONTAIER:"wvObjEditNode",CLS_OBJECT_EDITOR_ARRAY_ITEM:"wvObjEditItem",CLS_OBJECT_EDITOR_ARRAY_ITEM_SEPARATOR:"wvObjEditItemSeparator",
CLS_OBJECT_EDITOR_ARRAY_CONTAIER:"wvObjEditArrDiv",CLS_OBJECT_EDITOR_OBJECT_CONTAIER:"wvObjEditObjDiv",CLS_OBJECT_EDITOR_INPUT_CONTAIER:"wvObjEditInputDiv",EVT_OBJECT_EDITOR_UPDATED:"wv-objectEditor-updated",EVT_OBJECT_EDITOR_VALIDATION_ERROR:"wv-objectEditor-validation-error",EVT_OBJECT_EDITOR_VALIDATION_SUCCESS:"wv-objectEditor-validation-success",CLS_IMAGE_BOX_LOADING:"wvImageBox_loading",CLS_IMAGE_BOX_ERROR:"wvImageBox_error",CLS_IMAGE_BOX_WIDER:"wvImageBox_wider",CLS_IMAGE_BOX_HIGHER:"wvImageBox_higher",
CLS_IMAGE_VIEW:"wvImageView",CLS_IMAGE_VIEW_ZOOM:"wvImageView_zoom",CLS_IMAGE_VIEW_IMAGE:"wvImageView_image",CLS_GALLERY:"wvGallery",CLS_GALLERY_PREV:"wvGallery_prev",CLS_GALLERY_NEXT:"wvGallery_next",CLS_GALLERY_DISABLED:"wvGallery_disabled",CLS_GALLERY_LIST:"wvGallery_list",CLS_GALLERY_ITEM:"wvGallery_item",CLS_GALLERY_THUMBNAIL:"wvGallery_thumbnail",CLS_GALLERY_CONTENT:"wvGallery_content",CLS_GALLERY_IMAGE:"wvGallery_image",CLS_GALLERY_SELECTED:"wvGallery_selected",CLS_GALLERY_SIMPLE_THUMBNAILS:"wvGallerySimple_thumbnails",
CLS_GALLERY_SIMPLE_PREVIEW:"wvGallerySimple_preview",EVT_GALLERY_ADD:"wv-gallery-add",EVT_GALLERY_REMOVE:"wv-gallery-remove",EVT_GALLERY_CHANGE:"wv-gallery-change",CLS_DETAILS:"wvDetails",CLS_DETAILS_TITLE:"wvDetailsTitle",CLS_DETAILS_TITLE_SHOWN:"wvDetailsTitleShown",CLS_DETAILS_TITLE_HIDDEN:"wvDetailsTitleHidden",CLS_DETAILS_CONTENT:"wvDetailsContent",CLS_DETAILS_CONTENT_VISIBLE:"wvDetailsContentVisible",CLS_DETAILS_CONTENT_HIDDEN:"wvDetailsContentHidden",CLS_DETAILS_MODAL:"wvDetailsModal",CLS_CHAIN_SELECTOR:"wvChainSelector",
CLS_CS_DIV_INFO:"wvChainSelectorInfo",CLS_CS_DIV_NAME:"wvChainSelectorName",CLS_CS_DIV_DESCR:"wvChainSelectorDescription",CLS_CS_DIV_COMBO_WRAP:"wvChainSelectorComboWrap",CLS_CS_DIV_ARROW:"wvChainSelectorComboArrow",EVT_CHAIN_SELECTOR_UPDATED:"chain-selector-updated",EVT_DETAILS_SHOW:"wv-details-show",EVT_DETAILS_HIDE:"wv-details-hide"},x=0;b.pageWidth=function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth};b.pageHeight=function(){return window.innerHeight||
document.documentElement.clientHeight||document.body.clientHeight};b.toast=function(a,c,e){var d={};WAVE.intValidPositive(e)||(e=2500);var f=document.createElement("div");c=WAVE.strEmpty(c)?"":"_"+c;f.className=b.CLS_TOAST+c;f.style.zIndex=1E6;f.innerHTML=a;f.style.left=0;document.body.appendChild(f);a=Math.round(f.offsetWidth/2);f.style.left="50%";f.style.marginLeft=-a+"px";x++;1<x&&(f.style.marginLeft=-(a+4*x)+"px",f.style.marginTop=-(4*x)+"px");var l=!1;d.close=function(){if(l)return!1;document.body.removeChild(f);
x--;return l=!0};d.closed=function(){return l};setTimeout(function(){d.close()},e);return d};var e=[],f=0,h=null,m=null,r=null,n=null,v=!1;b.getScrollBarWidth=function(){var a=document.createElement("div");a.style.height="100px";a.style.position="absolute";a.style.top="-10000px";a.style.width="100px";a.style.overflow="scroll";document.body.appendChild(a);var b=a.offsetWidth-a.clientWidth;document.body.removeChild(a);return b};b.curtainOn=function(a,c,d){if(!d)try{document.activeElement.blur()}catch(f){}d=
document.createElement("div");c=WAVE.strAsBool(c,!0);d.style.backgroundColor="rgba(127,127,127,0.45)";d.className=b.CLS_CURTAIN;WAVE.strEmpty(a)||(d.className+=" "+a);d.style.position="fixed";d.style.left="0";d.style.top="0";d.style.width="100%";d.style.height="100%";d.style.zIndex=5E5+e.length;d.mbu=c;document.body.appendChild(d);e.push(d);c&&p();return d};b.curtainOff=function(){if(0!==e.length){var a=e[e.length-1];"undefined"!==typeof a.__DIALOG?a.__DIALOG.cancel():(document.body.removeChild(a),
WAVE.arrayDelete(e,a),!0===a.mbu&&y())}};b.isCurtain=function(){return 0<e.length};b.currentDialog=function(){for(var a=e.length-1;0<=a;a--)if("undefined"!==typeof e[a].__DIALOG)return e[a].__DIALOG;return null};b.Dialog=function(a){function c(a,b,e){WAVE.isObject(b)?a.appendChild(b):a.innerHTML=WAVE.strDefault(b,e)}function d(){if(0!==v||0!==r){var a=b.pageWidth(),c=b.pageHeight(),e=0===v?q.offsetWidth:Math.round(v/100*a),f=0===r?q.offsetHeight:Math.round(r/100*c);q.style.width=0===v?"auto":e+"px";
q.style.left=Math.round(a/2-q.offsetWidth/2)+"px";a=Math.round(c/2-q.offsetHeight/2);0>a&&(a=0);q.style.top=a+"px";q.style.width=0===v?"auto":e-2*q.offsetLeft+"px";q.style.height=0===v?"auto":f-(q.offsetTop+q.offsetLeft)+"px"}}function f(a){WAVE.isParentOf(q,a.target)||k.close()}function l(a){27===a.keyCode&&k.close()}function g(){E&&clearTimeout(E);E=setTimeout(function(){d();E=null},500)}WAVE.isObject(a)||(a={});var k=this,m=WAVE.isFunction(a.onShow)?a.onShow:function(){},h=WAVE.isFunction(a.onClose)?
a.onClose:function(){return!0},n=WAVE.strAsBool(a.closeOnClickOutside,!1),t=WAVE.strAsBool(a.closeOnEscape,!0),v=WAVE.intValidPositive(a.widthpct)?a.widthpct:0,r=WAVE.intValidPositive(a.heightpct)?a.heightpct:0,x=WAVE.strAsBool(a.preventScroll,!0),na=a.header,u=a.body,qa=a.footer,w=null,q=null,P=null,I=null,N=null;WAVE.extend(k,WAVE.EventManager);100<v&&(v=100);100<r&&(r=100);w=document.createElement("div");w.__DIALOG=this;w.className=b.CLS_DIALOG_BASE+" "+WAVE.strDefault(a.cls);w.style.position=
"fixed";w.style.zIndex=5E5+e.length;document.body.appendChild(w);e.push(w);q=document.createElement("div");q.className=b.CLS_DIALOG_CONTENT;w.appendChild(q);P=document.createElement("div");P.className=b.CLS_DIALOG_HEADER;c(P,na,"Dialog");q.appendChild(P);I=document.createElement("div");I.className=b.CLS_DIALOG_BODY;c(I,u,"&nbsp;");q.appendChild(I);N=document.createElement("div");N.className=b.CLS_DIALOG_FOOTER;c(N,qa,"");q.appendChild(N);var E=null,D=b.DLG_UNDEFINED;this.result=function(){return D};
this.close=function(a){"undefined"===typeof a&&(a=b.DLG_CANCEL);if(D!==b.DLG_UNDEFINED)return D;if(!h(this,a))return b.DLG_UNDEFINED;D=a;document.body.removeChild(w);WAVE.arrayDelete(e,w);WAVE.removeEventHandler(window,"resize",g);x&&y();n&&WAVE.removeEventHandler(window,"click",f);t&&WAVE.removeEventHandler(window,"keyup",l);k=m=h=N=I=P=q=w=w.__DIALOG=null;this.eventInvoke(b.EVT_DIALOG_CLOSE,a);return a};this.ok=function(){this.close(b.DLG_OK)};this.cancel=function(){this.close(b.DLG_CANCEL)};this.title=
function(a){if("undefined"===typeof a||null===a)return P.innerHTML;P.innerHTML=a;d()};this.content=function(a){if("undefined"===typeof a||null===a)return I.innerHTML;$(I).html(a);d()};this.baseDIV=function(){return w};this.headerDIV=function(){return P};this.bodyDIV=function(){return I};this.footerDIV=function(){return N};this.widthpct=function(a){if("undefined"===typeof a||a===v)return v;v=a;d()};this.widthpct=function(a){if("undefined"===typeof a||a===r)return r;r=a;d()};this.adjustBounds=function(){d()};
WAVE.addEventHandler(window,"resize",g);(function(){n&&setTimeout(function(){WAVE.addEventHandler(window,"click",f)},1);t&&WAVE.addEventHandler(window,"keyup",l);m(k)})();d();x&&p();return k};b.showConfirmationDialog=function(a,c,e,d,f){function l(a,c){return WAVE.strHTMLTemplate('<button class="@btnClass@" onclick="WAVE.GUI.currentDialog().close(\'@result@\');">@label@</button>',{btnClass:b.CLS_DIALOG_CONFIRM_BUTTON+" "+k,result:c,label:a})}WAVE.isObject(f)||(f={});WAVE.isArray(e)||(e=[]);c=WAVE.strDefault(c,
"Please confirm");var k=WAVE.strDefault(f.btnCls),g=WAVE.strDefault(f.footerCls),m="",h="",n="",v="";WAVE.inArray(e,b.DLG_YES)&&(m=l("Yes",b.DLG_YES));WAVE.inArray(e,b.DLG_NO)&&(h=l("No",b.DLG_NO));WAVE.inArray(e,b.DLG_OK)&&(n=l("OK",b.DLG_OK));WAVE.inArray(e,b.DLG_CANCEL)&&(v=l("Cancel",b.DLG_CANCEL));c="<div>"+c+"<div>";g='<div class="'+b.CLS_DIALOG_CONFIRM_FOOTER+" "+g+'">'+m+h+n+v+"</div>";new b.Dialog({header:WAVE.strDefault(a,"Confirmation"),body:c,footer:g,cls:WAVE.strDefault(f.cls),onShow:function(a){},
onClose:d})};var t=!1;b.dirty=function(a){if("undefined"===typeof a)return t;t=a};b.isDirty=function(){return t||null!==b.currentDialog()};b.SUPPRESS_UNLOAD_CHECK=!1;window.onbeforeunload=function(a){b.SUPPRESS_UNLOAD_CHECK||!b.isDirty()&&!WAVE.RecordModel.isDirty()||((a||window.event).returnValue="The page is in the middle of the data entry. If you navigate away/close the page now some changes will be lost. Are you sure?")};b.PuzzleKeypad=function(a){if("undefined"===typeof a||null===a||"undefined"===
typeof a.DIV||WAVE.strEmpty(a.Image))throw"PuzzleKeypad.ctor(init.DIV, init.Image)";var c=this;WAVE.extend(c,WAVE.EventManager);var e=WAVE.genRndKey(4),d=a.DIV,f=WAVE.strEmpty(a.Help)?"Please enter the following security information by touching the symbols below":a.Help,l=WAVE.strEmpty(a.Question)?"":a.Question,g=[],k=a.Image,m=null,h=null,n=null,v=null;this.destroy=function(){d.innerHTML=""};this.value=function(){return g};this.jsonValue=function(){return JSON.stringify(g)};this.help=function(a){if("undefined"===
typeof a)return f;f=WAVE.strEmpty(a)?"Please enter the following security information by touching the symbols below":a;m.innerHTML=f};this.question=function(a){if("undefined"===typeof a)return l;l=WAVE.strEmpty(a)?"":a;h.innerHTML=l};this.image=function(a){if("undefined"===typeof a)return k;k=WAVE.strEmpty(a)?"":a;v.src=k+"&req="+WAVE.genRndKey()};(function(){var a="pzl_"+e+"_"+WAVE.genAutoincKey("_puzzle#-?Keypad@Elements"),a={hid:"divHelp_"+a,qid:"divQuestion_"+a,tid:"tbValue_"+a,bid:"btnClear_"+
a,iid:"img_"+a,help:f,question:l,img:k+"&req="+WAVE.genRndKey(),clear:"Clear"},C=WAVE.strTemplate("<div class='wvPuzzleHelp'     id='@hid@'>@help@</div><div class='wvPuzzleQuestion' id='@qid@'>@question@</div><div class='wvPuzzleInputs'> <input id='@tid@' placeholder='\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7' type='text' disabled /><button id='@bid@'>@clear@</button> </div><div class='wvPuzzleImg'> <img id='@iid@' src='@img@'/></div>",a);d.innerHTML=
C;$("#"+a.bid).click(function(a){a.preventDefault();n.value="";g=[];c.eventInvoke(b.EVT_PUZZLE_KEYPAD_CHANGE,g)});$("#"+a.iid).click(function(a){var e=$(this).offset();g.push({x:Math.round(a.pageX-e.left),y:Math.round(a.pageY-e.top)});n.value+="*";c.eventInvoke(b.EVT_PUZZLE_KEYPAD_CHANGE,g)});m=WAVE.id(a.hid);h=WAVE.id(a.qid);n=WAVE.id(a.tid);WAVE.id(a.bid);v=WAVE.id(a.iid)})()};var w=function(a){function c(a){return x.wFirst(function(b){return b.element===a})}function e(a){return t.wFirst(function(b){return b.name===
a})}function d(a,b){var c=e(a);null===c?(c={name:a,cfg:b||{},elementInfos:[]},v.push(c)):b&&(c.cfg=b);return c}function f(a){var e=a.currentTarget,d=c(e);null!==d&&(a=d.ruler.onMouseMove(a),k(e,d.scopeInfos,a),e=WAVE.arrayWalkable(d.scopeInfos).wSelect(function(a){return a.name}).wToArray(),n.eventInvoke(b.EVT_RULER_MOUSE_MOVE,a,e))}function l(a){a=a.currentTarget;var e=c(a);null!==e&&(e.ruler.onMouseEnter(),m(a,e.scopeInfos),a=WAVE.arrayWalkable(e.scopeInfos).wSelect(function(a){return a.name}).wToArray(),
n.eventInvoke(b.EVT_RULER_MOUSE_ENTER,a))}function g(a){var e=a.currentTarget,d=c(e);null!==d&&(d.ruler.onMouseLeave(a),h(e,d.scopeInfos),a=WAVE.arrayWalkable(d.scopeInfos).wSelect(function(a){return a.name}).wToArray(),n.eventInvoke(b.EVT_RULER_MOUSE_LEAVE,a))}function k(a,b,c){c={scope:null,masterRes:c};for(var e in b){var d=b[e];c.scope=d;for(var f in d.elementInfos){var l=d.elementInfos[f];if(a!==l.element)l.ruler.onScopeMouseMove(c)}}}function m(a,b){for(var c in b){var e=b[c],d;for(d in e.elementInfos){var f=
e.elementInfos[d];if(a!==f.element)f.ruler.onScopeMouseEnter(e)}}}function h(a,b){for(var c in b){var e=b[c],d;for(d in e.elementInfos){var f=e.elementInfos[d];if(a!==f.element)f.ruler.onScopeMouseLeave(e)}}}var n=this;WAVE.extend(this,WAVE.EventManager);var v=[],t=WAVE.arrayWalkable(v),r=[],x=WAVE.arrayWalkable(r);this.set=function(a){var b=a.element,e=a.elementCfg;a=d(a.scopeName||"",a.scopeCfg);var k=c(b);if(null===k){var k={element:b,cfg:e||{},scopeInfos:[]},m=$(b);m.bind("mouseenter",l);m.bind("mouseleave",
g);m.bind("mousemove",f);b=new u(b,e);k.ruler=b;r.push(k)}else e&&(k.cfg=e,k.ruler.cfg(e));b=k;-1===a.elementInfos.indexOf(b)&&a.elementInfos.push(b);-1===b.scopeInfos.indexOf(a)&&b.scopeInfos.push(a)};this.unset=function(a){var b=a.element,d=a.scopeName,k=c(a.element);null!==k&&(d?(a=e(d),null!==a&&WAVE.arrayDelete(a.elements,k),WAVE.arrayDelete(k.scopes,a)):(WAVE.arrayWalkable(k.scopeInfos).wEach(function(a){WAVE.arrayDelete(a.elementInfos,k)}),k.scopeInfos.splice(0,k.scopeInfos.length)),0===k.scopeInfos.length&&
(b=$(b),b.unbind("mouseenter",l),b.unbind("mouseleave",g),b.unbind("mousemove",f),WAVE.arrayDelete(r,k)))};this.setScope=function(a,b){d(a,b)};this.mouseMove=function(a,b){var c=t.wWhere(function(a){return-1!==b.indexOf(a.name)}).wToArray();k(null,c,a)};this.mouseEnter=function(a){var b=t.wWhere(function(b){return-1!==a.indexOf(b.name)}).wToArray();m(null,b)};this.mouseLeave=function(a){var b=t.wWhere(function(b){return-1!==a.indexOf(b.name)}).wToArray();h(null,b)}},u=function(a,b){function c(a,b,
e){a=new WAVE.arrayWalkable([x,p,u,w,q,null,I,N,E,D,null,F]);e?a.wEach(function(a){null!==a&&"hidden"===a.style.visibility&&(a.style.visibility="visible")}):a.wEach(function(a){null!==a&&"hidden"!==a.style.visibility&&(a.style.visibility="hidden")})}function e(){t||(x=document.createElement("div"),x.id="WAVE_GUI_Ruler",x.innerHTML="Hint DIV",x.className=h,x.style.position="absolute",document.body.appendChild(x),w=l(!0),p=l(!0),E=l(!1),I=l(!1),u=l(!1),q=l(!1),N=l(!0),D=l(!0),t=!0)}function d(){t&&
(k(x),x=null,k(w),w=null,k(p),p=null,k(E),E=null,k(I),I=null,k(u),u=null,k(q),q=null,k(N),N=null,k(D),D=null,t=!1)}function f(){r&&(k(F),F=null,r=!1)}function l(a){var b=document.createElement("div");a?b.style.height="1px":b.style.width="1px";b.style.position="absolute";b.className=n;document.body.appendChild(b);return b}function k(a){null!==a&&document.body.removeChild(a)}var g=this,m=b||{};this.cfg=function(a){"undefined"!==typeof a&&a!==b&&(m=a);return m};var h=m.hintCls||"wvRulerHint",n=m.sightCls||
"wvRulerSight",v=m.sightSize||8,t=!1,r=!1,x=null,p=null,u=null,w=null,q=null,I=null,N=null,E=null,D=null,F=null;this.onMouseEnter=function(a){e()};this.onMouseLeave=function(a){d()};this.onMouseMove=function(b){f();e();var d;if(m.parentRc)d=m.parentRc;else{var l=a.getBoundingClientRect();d=WAVE.Geometry.toRectWH(l.left,l.top,l.width,l.height)}var l=b.clientX-d.left(),k=b.clientY-d.top();x.style.left=b.clientX+"px";x.style.top=b.clientY+"px";var g=null,g=m.getTxt?m.getTxt({clientPoint:new WAVE.Geometry.Point(b.clientX,
b.clientY),divHint:x}):l+", "+k;x.innerHTML=g;for(var g=x.getBoundingClientRect(),g=WAVE.Geometry.toRectWH(g.left,g.top,g.width,g.height),h=b.clientX,n=b.clientY,t=d,r=null,ea=g.square(),na=Number.MAX_VALUE,G=0;G<2*Math.PI;G+=Math.PI/4){var oa=WAVE.Geometry.rotateRectAroundCircle(h,n,20,g.width(),g.height(),G),O=WAVE.Geometry.overlapAreaRect(t,oa),O=ea-O;if(0===O){r=oa;break}O<na&&(na=O,r=oa)}g=r.topLeft();x.style.left=g.x()+"px";x.style.top=g.y()+"px";g=b.clientX;h=b.clientY;n=g-v;n<d.left()&&(n=
d.left());t=g+v;t>d.right()&&(t=d.right());r=h-v;r<d.top()&&(r=d.top());ea=h+v;ea>d.bottom()&&(ea=d.bottom());p.style.left=d.left()+"px";p.style.width=n-d.left()+"px";p.style.top=h+"px";w.style.left=t+"px";w.style.width=d.right()-t+"px";w.style.top=h+"px";u.style.top=d.top()+"px";u.style.height=r-d.top()+"px";u.style.left=g+"px";q.style.top=ea+"px";q.style.height=d.bottom()-ea+"px";q.style.left=g+"px";I.style.top=r+"px";I.style.height=ea-r+"px";I.style.left=n+"px";E.style.top=r+"px";E.style.height=
ea-r+"px";E.style.left=t+"px";N.style.left=n+"px";N.style.width=t-n+"px";N.style.top=r+"px";D.style.left=n+"px";D.style.width=t-n+"px";D.style.top=ea+"px";l=m.getMasterInfo?m.getMasterInfo({clientPoint:new WAVE.Geometry.Point(b.clientX,b.clientY)}):{elementRcPoint:new WAVE.Geometry.Point(l,k),isInParentRc:!0};c(b.clientX,b.clientY,l.isInParentRc);return l};this.onScopeMouseEnter=function(a){r||(F=l(!1),r=!0)};this.onScopeMouseLeave=function(a){f()};this.onScopeMouseMove=function(a){d();r||(F=l(!1),
r=!0);var b=g.getParentRc(),e,f,k;m.getSlaveInfo?(f=m.getSlaveInfo({masterRes:a.masterRes}),k=f.isInParentRc,e=f.clientPoint.x(),f=f.clientPoint.y()):(f=a.masterRes.elementRcPoint,k=!0,e=b.left()+f.x(),f=b.top()+f.y());c(e,f,a.masterRes.isInParentRc&&k);F.style.top=b.top()+"px";F.style.height=b.height()+"px";F.style.left=e+"px"};this.getParentRc=function(){var b;m.parentRc?b=m.parentRc:(b=a.getBoundingClientRect(),b=WAVE.Geometry.toRectWH(b.left,b.top,b.width,b.height));return b}},a=null;b.rulerSet=
function(b){null===a&&(a=new w);a.set(b)};b.rulerUnset=function(b){null!==a&&a.unset(b)};b.rulerSetScope=function(b,c){null===a&&(a=new w);a.setScope(b,c)};b.rulerMouseMove=function(b,c){null!==a&&a.mouseMove(b,c)};b.rulerMouseEnter=function(b){null!==a&&a.mouseEnter(b)};b.rulerMouseLeave=function(b){null!==a&&a.mouseLeave(b)};b.rulerEventBind=function(b,c){null===a&&(a=new w);a.eventBind(b,c)};b.WindowConnector=function(a){a=a||{};var b=this,c=a.wnd||window,e=[],d=WAVE.arrayWalkable(e);this.connectedWindows=
function(){return WAVE.arrayShallowCopy(e)};this.openWindow=function(a){var c=window.open(a||window.location.href);d.wEach(function(a){a.Connector.addWindow(c)});b.addWindow(c)};this.closeCurrentWindow=function(){d.wEach(function(a){a.Connector.removeWindow(c)})};this.addWindow=function(a){e.push(a.window)};this.removeWindow=function(a){WAVE.arrayDelete(e,a)};this.callWindowFunc=function(a){var c;d.wEach(function(b){b.closed?(c||(c=[]),c.push(b)):a(b)});if(c){var e=WAVE.arrayWalkable(c);e.wEach(function(a){b.removeWindow(a)});
e.wEach(function(a){d.wEach(function(b){b.Connector.removeWindow(a)})})}};this.logMsg=function(a){console.log(a)};if(c.opener&&c.opener.Connector){b.addWindow(c.opener);a=c.opener.Connector.connectedWindows();for(var f in a){var l=a[f];l!==c&&(l.closed||b.addWindow({window:l}))}}};b.connectorEnsure=function(a){a=a||window;a.Connector||(a.Connector=new b.WindowConnector({wnd:a}))};var c=0;b.Tree=function(a){function e(a,c){var f;h===b.TREE_SELECTION_SINGLE?(!0===c&&r.getDescendants().wEach(function(c){if(c.node!==
a&&!0===c.node.selected()){var e={phase:b.EVT_PHASE_BEFORE,node:c.node,value:c.node.selected()};d(b.EVT_TREE_NODE_SELECTION,e);c.node.selected(!1,!0);c={phase:b.EVT_PHASE_AFTER,node:c.node,value:c.node.selected()};d(b.EVT_TREE_NODE_SELECTION,c)}}),f={phase:b.EVT_PHASE_AFTER,node:a,value:c},d(b.EVT_TREE_NODE_SELECTION,f)):h===b.TREE_SELECTION_MULTI&&(f={phase:b.EVT_PHASE_AFTER,node:a,value:c},d(b.EVT_TREE_NODE_SELECTION,f))}function d(a,b){n||l.eventInvoke(a,b)}var f=function(a){a=a||{};var n=this;
c++;var t="tvn_"+c,v=a.parent||null;if(null!==v&&v.tree()!==l)throw"Tree.Node.ctor(wrong parent tree)";this.parent=function(){return v};var C,x,p,u,w;this.__divChildren=function(){return null!==v?w:k};var q="undefined"!==typeof a.id?a.id.toString():c.toString();this.id=function(){return q};var Y="undefined"===typeof a.expandedContent?l.DEFAULT_NODE_EXPANDED_CONTENT:a.expandedContent;this.expandedContent=function(a){if("undefined"===typeof a)return Y;Y=a;x&&(x.innerHTML=z?Y:E)};var E="undefined"===
typeof a.collapsedContent?l.DEFAULT_NODE_COLLAPSED_CONTENT:a.collapsedContent;this.collapsedContent=function(a){if("undefined"===typeof a)return E;E=a;x&&(x.innerHTML=z?Y:E)};this.path=function(){return null===v?"":v===r?q:v.path()+"/"+q};this.level=function(){return null===v?-1:v===r?0:v.level()+1};this.html=function(a){if(null===v)return null;if("undefined"===typeof a)return u.innerHTML;var c={phase:b.EVT_PHASE_BEFORE,node:n,oldContent:u.innerHTML,newContent:a,abort:!1};d(b.EVT_TREE_NODE_CONTENT,
c);!0!==c.abort&&(u.innerHTML=a,d(b.EVT_TREE_NODE_CONTENT,{phase:b.EVT_PHASE_AFTER,node:n,oldContent:u.innerHTML,newContent:a}))};var D=!1!==a.selectable;this.selectable=function(a){if("undefined"===typeof a)return D;D=a;F&&!a&&n.selected(!1)};var F=!0===a.selected;this.selected=function(a,c){if(h===b.TREE_SELECTION_NONE)return!1;if("undefined"===typeof a)return F;if(a!==F&&(D||!D&&!a)){if(!0!==c){var f={phase:b.EVT_PHASE_BEFORE,node:n,value:a,abort:!1};d(b.EVT_TREE_NODE_SELECTION,f);if(!0===f.abort)return}F=
a;u.className=F?n.wvTreeNodeOwnSelected():n.wvTreeNodeOwn();!0!==c&&e(n,a)}};this.wvTreeNode=function(a){if("undefined"===typeof a)return C.className;C.className=a};this.wvTreeNodeButton=function(a){if("undefined"===typeof a)return x.className;x.className=a};this.wvTreeNodeContent=function(a){if("undefined"===typeof a)return p.className;p.className=a};var B=a.wvTreeNodeButtonExpanded||g.wvTreeNodeButtonExpanded;this.wvTreeNodeButtonExpanded=function(a){if("undefined"===typeof a)return B||g.wvTreeNodeButtonExpanded;
a!==B&&(B=a,x.className=z?n.wvTreeNodeButtonExpanded():n.wvTreeNodeButtonCollapsed())};var X=a.wvTreeNodeButtonCollapsed||g.wvTreeNodeButtonCollapsed;this.wvTreeNodeButtonCollapsed=function(a){if("undefined"===typeof a)return X||g.wvTreeNodeButtonCollapsed;a!==X&&(X=a,x.className=z?n.wvTreeNodeButtonExpanded():n.wvTreeNodeButtonCollapsed())};var ra=a.wvTreeNodeOwn||g.wvTreeNodeOwn;this.wvTreeNodeOwn=function(a){if("undefined"===typeof a)return ra||g.wvTreeNodeOwn;a!==ra&&(ra=a,u.className=F?n.wvTreeNodeOwnSelected():
n.wvTreeNodeOwn())};var y=a.wvTreeNodeOwnSelected||g.wvTreeNodeOwnSelected;this.wvTreeNodeOwnSelected=function(a){if("undefined"===typeof a)return y||g.wvTreeNodeOwnSelected;a!==y&&(y=a,u.className=F?n.wvTreeNodeOwnSelected():n.wvTreeNodeOwn())};this.wvTreeNodeChildren=function(a){if("undefined"===typeof a)return w.className;w.className=a};var ja=a.childrenDisplayVisible||m;this.childrenDisplayVisible=function(a){if("undefined"===typeof a)return ja;a!==ja&&(ja=a,z&&(w.style.display=ja))};var ma=a.data;
this.data=function(a){if("undefined"===typeof a)return ma;if(ma!==a){var c={phase:b.EVT_PHASE_BEFORE,node:n,oldData:ma,newData:a,abort:!1};d(b.EVT_TREE_NODE_DATA,c);!0!==c.abort&&(ma=a,d(b.EVT_TREE_NODE_DATA,{phase:b.EVT_PHASE_AFTER,node:n,oldData:ma,newData:a}))}};var z=!0===a.expanded;this.expanded=function(a){if("undefined"===typeof a)return z;if(null!==v&&z!==a){var c={phase:b.EVT_PHASE_BEFORE,node:n,value:a,abort:!1};d(b.EVT_TREE_NODE_EXPANSION,c);!0!==c.abort&&(z=a,x.className=z?n.wvTreeNodeButtonExpanded():
n.wvTreeNodeButtonCollapsed(),x.innerHTML=a?Y:E,w.style.display=a?ja:"none",d(b.EVT_TREE_NODE_EXPANSION,{phase:b.EVT_PHASE_AFTER,node:n,value:a}))}};var K=[];this.children=function(){return WAVE.arrayShallowCopy(K)};this.__children=function(){return K};this.tree=function(){return l};this.getDescendants=function(){return n.__getDescendants(0)};this.__getDescendants=function(a){var b=function(){var b=WAVE.arrayWalkable(K).getWalker(),c=null,e=0,d=-1;this.reset=function(){b=WAVE.arrayWalkable(K).getWalker();
e=0;d=-1};this.moveNext=function(){function f(){if(b.moveNext())return d++,e=1,!0;e=0;return!1}if(0===e)return f();if(1===e)if(c=b.current().__getDescendants(a+1).getWalker(),c.moveNext())e=2;else return f();else if(2===e&&!c.moveNext())return f();return!0};this.current=function(){if(1===e)return{level:a,nodeNum:d,node:b.current()};if(2===e)return c.current()}},c={getWalker:function(){return new b},tree:l};WAVE.extend(c,WAVE.Walkable);return c};this.getChildIdx=function(a,b){return b?n.getDescendants(0).wFirstIdx(function(b){return WAVE.strSame(b.node.id(),
a)}):WAVE.arrayWalkable(K).wFirstIdx(function(b){return WAVE.strSame(b.id(),a)})};this.getChild=function(a,b){if(b){var c=n.getDescendants(0).wFirst(function(b){return WAVE.strSame(b.node.id(),a)});return c?c.node:null}return WAVE.arrayWalkable(K).wFirst(function(b){return WAVE.strSame(b.id(),a)})};this.navigate=function(a){function b(a){return function(b){return b.id()===a}}if("undefined"===typeof a||null===a)return null;if(!WAVE.isArray(a)){if(WAVE.strEmpty(a))return null;a=a.split(/[\\/]+/)}var c=
null,e=WAVE.arrayWalkable(K),d;for(d in a){c=e.wFirst(b(a[d]));if(null===c)return null;e=WAVE.arrayWalkable(c.__children())}return c};this.unveil=function(){var a=v;if(null!==a)for(;null!==a;){var b=a.parent();null!==b&&a.expanded(!0);a=b}};this.addChild=function(a){"undefined"===typeof a&&(a={});var c={phase:b.EVT_PHASE_BEFORE,parentNode:n,childNodeInit:a,abort:!1};d(b.EVT_TREE_NODE_ADD,c);if(!0!==c.abort)return a.parent=n,a=new f(a),K.push(a),null!==v&&(x.style.visibility="visible"),d(b.EVT_TREE_NODE_ADD,
{phase:b.EVT_PHASE_AFTER,parentNode:n,childNode:a}),a};this.__removeChild=function(a){WAVE.arrayDelete(K,a);0===K.length&&null!==v&&(x.style.visibility="hidden")};this.remove=function(){if(null===v)console.error("Root node couldn't be removed");else{var a={phase:b.EVT_PHASE_BEFORE,parentNode:v,childNode:n,abort:!1};d(b.EVT_TREE_NODE_REMOVE,a);!0!==a.abort&&(C.parentNode.removeChild(C),v.__removeChild(n),d(b.EVT_TREE_NODE_REMOVE,{phase:b.EVT_PHASE_AFTER,parentNode:v,childNode:n}))}};this.removeAllChildren=
function(){var a=WAVE.arrayShallowCopy(K),b;for(b in a)a[b].remove()};if(null!==v){var A={id:t,wvTreeNode:a.wvTreeNode||g.wvTreeNode,wvTreeNodeContent:a.wvTreeNodeContent||g.wvTreeNodeContent,wvTreeNodeOwn:a.wvTreeNodeOwn||g.wvTreeNodeOwn,wvTreeNodeOwnSelected:a.wvTreeNodeOwnSelected||g.wvTreeNodeOwnSelected,wvTreeNodeChildren:a.wvTreeNodeChildren||g.wvTreeNodeChildren};A.wvTreeNodeButton=z?n.wvTreeNodeButtonExpanded():n.wvTreeNodeButtonCollapsed();var ka=WAVE.strTemplate("<div id='exp_@id@' class='@wvTreeNodeButton@'></div><div id='content_@id@' class='@wvTreeNodeContent@'>  <div id='own_@id@' class='@wvTreeNodeOwn@'></div>  <div id='children_@id@' class='@wvTreeNodeChildren@'>  </div></div>",
A),R=v.__divChildren();C=document.createElement("div");C.id="root_"+t;C.className=A.wvTreeNode;C.innerHTML=ka;R.appendChild(C);p=WAVE.id("content_"+t);u=WAVE.id("own_"+t);w=WAVE.id("children_"+t);u.innerHTML=a.html;u.className=F?n.wvTreeNodeOwnSelected():n.wvTreeNodeOwn();$(u).click(function(){n.selected(!F)});a=!0===a.expanded;x=WAVE.id("exp_"+t);x.innerHTML=z?Y:E;x.style.visibility="hidden";$(x).click(function(){n.expanded(!z)});w.style.display=a?ja:"none"}};if("undefined"===typeof a||null===a||
"undefined"===typeof a.DIV||null===a.DIV)throw"Tree.ctor(init.DIV)";var l=this;WAVE.extend(l,WAVE.EventManager);this.DEFAULT_NODE_EXPANDED_CONTENT="-";this.DEFAULT_NODE_COLLAPSED_CONTENT="+";var k=a.DIV,g={wvTreeNode:a.wvTreeNode||b.CLS_TREE_NODE,wvTreeNodeButtonExpanded:a.wvTreeNodeButtonExpanded||b.CLS_TREE_NODE_BUTTON_EXPANDED,wvTreeNodeButtonCollapsed:a.wvTreeNodeButtonCollapsed||b.CLS_TREE_NODE_BUTTON_COLLAPSED,wvTreeNodeContent:a.wvTreeNodeContent||b.CLS_TREE_NODE_CONTENT,wvTreeNodeOwn:a.wvTreeNodeOwn||
b.CLS_TREE_NODE_OWN,wvTreeNodeOwnSelected:a.wvTreeNodeOwnSelected||b.CLS_TREE_NODE_OWN_SELECTED,wvTreeNodeChildren:a.wvTreeNodeChildren||b.CLS_TREE_NODE_CHILDREN},m=a.childrenDisplayVisible||"block",h=a.treeSelectionType||b.TREE_SELECTION_NONE;this.treeSelectionType=function(a){if("undefined"===typeof h)return h;h=a};this.selectedNodes=function(a){if("undefined"===typeof a)return r.getDescendants().wWhere(function(a){return!0===a.node.selected()});if(null===a)throw"val couldn't be null";var b;if(WAVE.isFunction(a.wAny))b=
a;else if(WAVE.isArray(a))b=WAVE.arrayWalkable(a);else throw"val type is invalid";r.getDescendants().wEach(function(a){a.node.selected(b.wAny(function(b){return b===a.node.id()}),!0)})};var n=!0===a.supressEvents;this.supressEvents=function(a){if("undefined"===typeof a)return n;n=a};var r=new f;this.root=function(){return r}};var g=0;b.ObjectInspector=function(a,c){function e(b){for(var c=b.target.getAttribute("objpath").split(/\//),d=a,f=0;f<c.length-1;f++)d=d[c[f]];d[c[c.length-1]]=b.target.value}
function d(a,b,c){var f=Object.keys(b),k,m;for(m in f){var n=f[m],h=b[n];if(null!==h&&"object"!==typeof h){var v="objinsp_edit_"+g++;k=WAVE.strTemplate('<div class="@cls@">  <label for="@id@">@key@</label>  <input type="textbox" id="@id@" value="@val@" objpath="@objpath@"></div>',{id:v,key:n,val:h,objpath:c?c+"/"+n:n,cls:l});k=a.addChild({html:k});v=WAVE.id(v);v.objpath=k.path();v.addEventListener("input",e)}else k=a.addChild({html:n}),d(k,h,c?c+"/"+n:n)}}WAVE.extend(this,WAVE.EventManager);var f=
new b.Tree({DIV:c.div});c=c||{};var l=c.wvObjectInspectorEditor||b.CLS_OBJECTINSPECTOR_EDITOR;this.wvObjectInspectorEditor=function(a){if("undefined"===typeof a)return l;l=a};d(f.root(),a,"")};b.MultiLineTextBox=function(a){if("undefined"===typeof a||null===a||"undefined"===typeof a.DIV||null===a.DIV)throw"MultiLineTextBox.ctor(init.DIV)";if(WAVE.strEmpty(a.id))throw"MultiLineTextBox.ctor(init.id)";var c=this;WAVE.extend(c,WAVE.EventManager);var e=a.DIV,d=a.id,f=WAVE.strAsBool(a.addLabel,!0),l="shdw_div_"+
d,k=WAVE.strDefault(a.placeholder),g=WAVE.strAsBool(a.readonly,!1),m=WAVE.strAsBool(a.disabled,!1),n=WAVE.strDefault(a.value);a=WAVE.tryParseJSON(a.attrs).obj;e.innerHTML=WAVE.strHTMLTemplate("<div id='@shdwDivId@' style='position: fixed;visibility: hidden;height: auto;width: auto;'></div>"+(f?"<label for='@id@'>@placeholder@</label>":"")+"<textarea id='@id@' @disabled@ @readonly@ style='resize: none' placeholder='@placeholder@' title='@placeholder@'></textarea>",{shdwDivId:l,id:d,disabled:m?"disabled":
"",readonly:g?"readonly":"",placeholder:k});var h=WAVE.id(d),v=WAVE.id(l);h.onresize=function(){v.style.maxWidth=WAVE.styleOf(h,"width")};h.style.overflow="hidden";for(var r in a)h.setAttribute(r,a[r]);v.innerText=h.value=n;v.style.maxWidth=WAVE.styleOf(h,"width");v.style.font=WAVE.styleOf(h,"font");v.style.minHeight=WAVE.styleOf(h,"height");v.style.paddingTop=WAVE.styleOf(h,"padding-top");v.style.paddingRight=WAVE.styleOf(h,"padding-right");v.style.paddingBottom=WAVE.styleOf(h,"padding-bottom");
v.style.paddingLeft=WAVE.styleOf(h,"padding-left");v.style.wordWrap=WAVE.styleOf(h,"word-wrap");v.style.wordSpacing=WAVE.styleOf(h,"word-spacing");v.style.whiteSpace=WAVE.styleOf(h,"white-space");v.style.borderSpacing=WAVE.styleOf(h,"border-spacing");v.style.letterSpacing=WAVE.styleOf(h,"letter-spacing");v.style.lineHeight=WAVE.styleOf(h,"line-height");v.style.boxSizing=WAVE.styleOf(h,"box-sizing");v.style.border=WAVE.styleOf(h,"border");v.style.borderWidth=WAVE.styleOf(h,"border-width");v.style.borderRadius=
WAVE.styleOf(h,"border-radius");v.style.textIndent=WAVE.styleOf(h,"text-indent");var t=function(a){v.innerText=WAVE.strEmpty(a.value)?"W":a.value.replace(/\r\n|\r|\n/g,"\n ");a.style.height=v.clientHeight+"px"};h.onchange=function(a){t(this);v.style.maxWidth=WAVE.styleOf(h,"width");c.eventInvoke(b.EVT_MULTI_LINE_TEXT_UPDATED,{phase:b.EVT_PHASE_AFTER,target:a.target,value:this.value})};h.onkeydown=h.onkeyup=function(a){t(this)};t(h);return c};var l=0;b.PropSetEditor=function(a){function c(a,b){return WAVE.strLocalize(P,
"PSEditor","ps",WAVE.strDefault(B[a],b))}function e(){var a=[],b;for(b in y)WAVE.has(t,y[b])||a.push(y[b]);return a}function d(){v.innerHTML=WAVE.strHTMLTemplate("<input id='@outerId@' type='hidden' name='@outerName@'/><div id='@divEditorsContainerId@' class='@divEditorsContainerClass@'></div>"+(x||p?"":(w?"<input type='button' id='@btnAddId@' class='@btnAddClass@' value='@add@' />":"")+(u?"<input type='button' id='@btnRawId@' class='@btnRawClass@' value='@raw@' />":"")+(q?"<input type='button' id='@btnClearId@' class='@btnClearClass@' value='@clear@' />":
"")),{outerId:F.outputHiddenId,outerName:WAVE.strDefault(r,""),divEditorsContainerId:F.divEditorsContainerId,divEditorsContainerClass:b.CLS_PS_DIV_LANGS_CONTAINER,btnAddId:F.btnAddId,btnAddClass:E.addBtnCls,btnRawId:F.btnRawId,btnRawClass:E.rawBtnCls,btnClearId:F.btnClearId,btnClearClass:E.clearBtnCls,add:B.btnAdd,raw:B.btnRaw,clear:B.btnClear});x||p||!w||0!==e().length||(WAVE.id(F.btnAddId).disabled=!0);x||p||(w&&0<e().length&&(WAVE.id(F.btnAddId).onclick=function(){var a=this,c=e(),d="",f;for(f in c)d+=
"<option>"+c[f]+"</option>";var l="newIso_"+D;b.showConfirmationDialog(n()+B.addTitle,"<div>"+B.addBody+"</div><div><select class='"+b.CLS_PS_LANG_SELECTOR+"' id='"+l+"'>"+d+"</select></div>",[b.DLG_OK,b.DLG_CANCEL],function(e,d){if(d===b.DLG_OK){var f=WAVE.id(l).value;h.addLang(f);1===c.length&&(a.disabled=!0)}return!0},{btnCls:E.modalBtnCls});WAVE.id(l).focus()}),u&&(WAVE.id(F.btnRawId).onclick=function(){var a="raw"+D;b.showConfirmationDialog(n()+B.rawTitle,"<div>"+B.rawBody+"</div><div><textarea style='width: 70vw; height: 70vh;' class='"+
b.CLS_PS_TEXTAREA_RAW_EDITOR+"' type='text' id='"+a+"'></textarea></div>",[b.DLG_OK,b.DLG_CANCEL],function(c,e){if(e===b.DLG_OK){var d=WAVE.id(a).value,f=WAVE.tryParseJSON(d);if(f.ok){if(WAVE.checkKeysUnique(f.obj))return b.toast(WAVE.strLocalize(P,"PSEditor","ps","JSON is valid, but some keys are duplicated"),"error"),!1;h.content(d)}else return b.toast(WAVE.strLocalize(P,"PSEditor","ps","Invalid JSON"),"error"),!1}return!0},{btnCls:E.modalBtnCls});WAVE.id(a).value=h.content();WAVE.id(a).focus()}),
q&&(WAVE.id(F.btnClearId).onclick=function(){b.showConfirmationDialog(n()+B.clearConfirmTitle,"<div>"+B.clearConfirmBody+"</div>",[b.DLG_OK,b.DLG_CANCEL],function(a,c){c===b.DLG_OK&&h.clear();return!0},{btnCls:E.modalBtnCls})}))}function f(a){var c=D+"_"+a,e=WAVE.id(F.divEditorsContainerId),d=F.divDeleteButtonId+"_"+a,l=F.divLangNameId+"_"+a,k=F.divTextTemplateId+"_"+a;e.insertAdjacentHTML("beforeend",WAVE.strHTMLTemplate("<fieldset id='@langId@'><legend id='@isoLabelId@' class='@langClass@'></legend><div class='@textEditorsContainerClass@' id='@controlContainerId@'></div>"+
(!q||x||p?"":"<input type='button' id='@deleteButtonId@' class='@delCls@' value='@delText@'/>")+"</fieldset>",{langId:c,controlContainerId:k,deleteButtonId:d,isoLabelId:l,langClass:b.CLS_PS_DIV_LANG_NAME,labelContainerClass:b.CLS_PS_LABEL_CONTAINER,textEditorsContainerClass:b.CLS_PS_INPUT_CONTAINER,delCls:E.delBtnCls,disabled:p?"disabled":"",readonly:x?"readonly":"",delText:B.btnDel}));WAVE.id(l).innerText=a;(new b.ObjectEditor({DIV:WAVE.id(k),meta:{type:"object",schema:N},content:t[a],disabled:p,
readonly:x})).eventBind(b.EVT_OBJECT_EDITOR_UPDATED,function(b,c){t[a]=c;h.content(JSON.stringify(t),!1)});!q||x||p||(WAVE.id(d).onclick=function(){b.showConfirmationDialog(n()+B.delConfirmTitle+" : "+a.toUpperCase(),"<div>"+B.delConfirmBody+"</div>",[b.DLG_OK,b.DLG_CANCEL],function(c,e){e===b.DLG_OK&&h.deleteLang(a);return!0},{btnCls:E.modalBtnCls})})}function k(){if(WAVE.isObject(t))for(var a in t)f(a)}function g(){for(;v.hasChildNodes();)v.removeChild(v.lastChild);d();k();m()}function m(){null!==
r&&(WAVE.id(F.outputHiddenId).value=h.content())}function n(){return WAVE.strEmpty(I)?"":I+": "}if("undefined"===typeof a||null===a||"undefined"===typeof a.DIV||null===a.DIV)throw"PropSetEditor.ctor(init.DIV)";var h=this;WAVE.extend(h,WAVE.EventManager);l++;var v=a.DIV,t=WAVE.memberClone(WAVE.tryParseJSON(a.content).obj),r=WAVE.strDefault(a.outputFormFieldName,null),x=WAVE.strAsBool(a.readonly,!1),p=WAVE.strAsBool(a.disabled,!1),u=WAVE.strAsBool(a.canRaw,!0),w=WAVE.strAsBool(a.canAdd,!0),q=WAVE.strAsBool(a.canDel,
!0),y=WAVE.mergeArrays(["eng"],a.sets,function(a,b){return a.toLowerCase()===b.toLowerCase()},function(a){return a.toLowerCase()}),P=WAVE.strDefault(a.local,"eng"),I=WAVE.strDefault(a.title),N=WAVE.get(a,"schema",{n:{type:"text",plh:"Name"},d:{type:"textarea",plh:"Description"}}),E=WAVE.get(a,"btnClasses",{});E.addBtnCls=WAVE.strDefault(E.addBtnCls,b.CLS_PS_BTN_ADD);E.delBtnCls=WAVE.strDefault(E.delBtnCls,b.CLS_PS_BTN_DEL);E.rawBtnCls=WAVE.strDefault(E.rawBtnCls,b.CLS_PS_BTN_RAW);E.clearBtnCls=WAVE.strDefault(E.clearBtnCls,
b.CLS_PS_BTN_CLEAR);E.modalBtnCls=WAVE.strDefault(E.modalBtnCls,"");var D="ps_"+l,F={btnAddId:"addLang_"+D,btnRawId:"rawEdit_"+D,btnClearId:"clearBtn_"+D,divTextTemplateId:"textTemplate_"+D,divEditorsContainerId:"divEditorsContainer_"+D,divDeleteButtonId:"deleteButtonId_"+D,inputId:"_inputId_"+D,divLangNameId:"islLabel_"+D,outputHiddenId:"hidden_"+D},B=WAVE.get(a,"texts",{});B.addTitle=c("add-title","Add New Language");B.addBody=c("add-body","");B.rawTitle=c("raw-title","Raw Edit");B.rawBody=c("raw-body");
B.clearConfirmTitle=c("clear-confirm-title","Confirm Clear");B.clearConfirmBody=c("clear-confirm-body","Clear all language data?");B.delConfirmTitle=c("del-confirm-title","Confirm Delete");B.delConfirmBody=c("del-confirm-body");B.btnDel=c("btn-del","Delete");B.btnAdd=c("btn-add","Add");B.btnRaw=c("btn-raw","Edit Raw");B.btnClear=c("btn-clear","Clear");d();this.DIV=function(){return v};this.jsonContent=function(){return t};this.content=function(a,c){if("undefined"===typeof a)return WAVE.empty(t)?"":
JSON.stringify(t,null,2);var e=WAVE.tryParseJSON(a);if(e.ok){if(c=WAVE.strAsBool(c,!0))for(var d in t)WAVE.removeElem(D+"_"+d);t=WAVE.memberClone(e.obj);c&&k();m();h.eventInvoke(b.EVT_PS_EDITOR_UPDATED,t)}return a};this.title=function(a){if("undefined"===typeof a)return I;I=WAVE.strDefault(a)};this.enable=function(a){if("undefined"===typeof a)return!p;p=!0!==a;g();return a};this.readOnly=function(a){if("undefined"===typeof a)return x;x=!0===a;g();return a};this.canAdd=function(a){if("undefined"===
typeof a)return w;w=!0===a;g();return a};this.canDel=function(a){if("undefined"===typeof a)return q;q=!0===a;g();return a};this.canRaw=function(a){if("undefined"===typeof a)return u;u=!0===a;g();return a};this.addLang=function(a){if(WAVE.strEmpty(a))return!1;a=a.toLowerCase();if(WAVE.has(t,a))return!1;t[a]={};f(a);h.content(JSON.stringify(t));return!0};this.deleteLang=function(a){if(WAVE.strEmpty(a))return!1;a=a.toLowerCase();if(!WAVE.has(t,a))return!1;delete t[a];WAVE.removeElem(D+"_"+a);x||p||(WAVE.id(F.btnAddId).disabled=
!1);h.content(JSON.stringify(t));return!0};this.clear=function(){x||p||(WAVE.id(F.btnAddId).disabled=!1);h.content("{}")};g();return h};var R=0;b.ObjectEditor=function(a){function c(a,b){return WAVE.strLocalize(y,"ObjectEditor","objEd",WAVE.strDefault(D[a],b))}function e(a,c,d,f,k,g,m,h){a=a(l,d,f);a.ok?(h(),l.eventInvoke(b.EVT_OBJECT_EDITOR_VALIDATION_SUCCESS,{phase:b.EVT_PHASE_AFTER,target:c})):(m(),l.eventInvoke(b.EVT_OBJECT_EDITOR_VALIDATION_ERROR,{phase:b.EVT_PHASE_AFTER,target:c}));return a}
function d(){N=[];g.innerHTML=WAVE.strHTMLTemplate("<div id='@contId@'></div><div id='@buttonsId@'></div>",{contId:E.editorContainerId,buttonsId:E.buttonsContainerId});var a=WAVE.id(E.editorContainerId),c=WAVE.id(E.buttonsContainerId);if("array"===h){if(WAVE.isArray(t))for(var e=0;e<t.length;e++)f(e,a)}else for(e in n)new F(e,a);"array"!==h||!w||r||x||WAVE.isArray(t)&&!(t.length<q)||(a="add_"+k,c.insertAdjacentHTML("beforeend","<input type='button' value='"+D.btnAdd+"' id='"+a+"' class='"+B.addBtnCls+
"'/>"),WAVE.id(a).onclick=function(){WAVE.isArray(t)||(t=[]);t.push({});l.content(t,!0);l.validate()});p&&(c.insertAdjacentHTML("beforeend","<input type='button' value='"+D.btnRaw+"' id='"+E.btnRawId+"' class='"+B.addBtnCls+"'/>"),WAVE.id(E.btnRawId).onclick=function(){var a="raw"+k;b.showConfirmationDialog(D.rawTitle,"<div>"+D.rawBody+"</div><div><textarea style='width: 70vw; height: 70vh;' class='"+b.CLS_PS_TEXTAREA_RAW_EDITOR+"' type='text' id='"+a+"'></textarea></div>",[b.DLG_OK,b.DLG_CANCEL],
function(c,e){if(e===b.DLG_OK){var d=WAVE.id(a).value,f=WAVE.tryParseJSON(d);if(f.ok){if("array"!==h&&WAVE.checkKeysUnique(f.obj))return b.toast(WAVE.strLocalize(y,"ObjectEditor","objEd","JSON is valid, but some keys are duplicated"),"error"),!1;l.content(d,!0)}else return b.toast(WAVE.strLocalize(y,"ObjectEditor","objEd","Invalid JSON"),"error"),!1}return!0},{btnCls:B.modalBtnCls});WAVE.id(a).value=l.content();WAVE.id(a).focus()})}function f(a,c){var e=WAVE.memberClone(m);e.type="object";for(var d in e.schema)e.schema[d].index=
a;var k=E.editorContainerId+"_"+a;d="del"+k;c.insertAdjacentHTML("beforeend",WAVE.strHTMLTemplate(X,{divCLS:b.CLS_OBJECT_EDITOR_ARRAY_ITEM,divId:k,BtnId:d,BtnCls:B.delBtnCls,delText:D.btnDel,arrSep:b.CLS_OBJECT_EDITOR_ARRAY_ITEM_SEPARATOR}));e=new b.ObjectEditor({DIV:WAVE.id(k),content:t[a],meta:e,disabled:x,readonly:r});e.eventBind(b.EVT_OBJECT_EDITOR_UPDATED,function(b,c){t[a]=c;l.content(t)});e.eventBind(b.EVT_OBJECT_EDITOR_VALIDATION_ERROR,function(a,c){l.eventInvoke(b.EVT_OBJECT_EDITOR_VALIDATION_ERROR,
{phase:b.EVT_PHASE_AFTER,target:c.target})});e.eventBind(b.EVT_OBJECT_EDITOR_VALIDATION_SUCCESS,function(a,c){l.eventInvoke(b.EVT_OBJECT_EDITOR_VALIDATION_SUCCESS,{phase:b.EVT_PHASE_AFTER,target:c.target})});var e=e.validators(),g;for(g in e)N.push(e[g]);!u||r||x||(WAVE.id(d).onclick=function(){b.showConfirmationDialog(D.delConfirmTitle,"<div>"+D.delConfirmBody+"</div>",[b.DLG_OK,b.DLG_CANCEL],function(c,e){e===b.DLG_OK&&(t.splice(a,1),l.content(t,!0));return!0},{btnCls:B.modalBtnCls})})}if("undefined"===
typeof a||null===a||"undefined"===typeof a.DIV||null===a.DIV)throw"ObjectEditor.ctor(init.DIV)";var l=this;WAVE.extend(l,WAVE.EventManager);R++;var k="wvObjEditor_"+R,g=a.DIV,m=WAVE.get(a,"meta",{}),h=WAVE.strDefault(m.type,"text"),n=WAVE.get(m,"schema",{});WAVE.strDefault(m.plh);WAVE.mergeArrays([],m.sets,function(a,b){return a.toLowerCase()===b.toLowerCase()},function(a){return a.toLowerCase()});var v=m.dflt,t=WAVE.get(a,"content","undefined"!==typeof v?v:{}),r=WAVE.strAsBool(a.readonly,!1),x=WAVE.strAsBool(a.disabled,
!1),p=WAVE.strAsBool(a.canRaw,!1)&&!r&&!x,u=WAVE.strAsBool(a.canDel,!0)&&!r&&!x,w=WAVE.strAsBool(a.canAdd,!0)&&!r&&!x,q=WAVE.intValidPositive(m.maxLength)?m.maxLength:2,P=WAVE.strDefault(a.outputFormFieldName,""),y=WAVE.strDefault(a.local,"eng"),N=[],E={editorContainerId:"edit_cont_"+k,buttonsContainerId:"edit_buttons_"+k,inputId:"edit_input_"+k,outputHiddenId:"edit_conf_out_"+k,btnRawId:"edit_raw_"+k,btnDelId:"edit_del_"+k},D=WAVE.get(a,"texts",{});D.addTitle=c("add-title","Add New Language");D.addBody=
c("add-body","");D.rawTitle=c("raw-title","Raw Edit");D.rawBody=c("raw-body");D.clearConfirmTitle=c("clear-confirm-title","Confirm Clear");D.clearConfirmBody=c("clear-confirm-body","Clear all language data?");D.delConfirmTitle=c("del-confirm-title","Confirm Delete");D.resetConfirmTitle=c("reset-confirm-title","Confirm Reset");D.delConfirmBody=c("del-confirm-body");D.resetConfirmBody=c("reset-confirm-body");D.btnDel=c("btn-del","Delete");D.btnAdd=c("btn-add","Add");D.btnRaw=c("btn-raw","Edit Raw");
D.btnClear=c("btn-clear","Clear");D.btnReset=c("btn-reset","Reset");D.required=c("err-meg","Required");var F=function(a,c){function d(){var b=aa();b.ok&&(t=WAVE.isObject(t)?t:{},t[a]=b.value,l.content(t))}var f=n[a],k=WAVE.get(f,"DIV",c),g=f.dflt,m=WAVE.get(t,a,g),h=WAVE.strDefault(f.type,"text");WAVE.get(f,"schema",{});var v=WAVE.strDefault(f.plh,""),p=WAVE.intValidPositiveOrZero(f.index)?f.index:-1,u=WAVE.mergeArrays([],f.sets,function(a,b){return a.toLowerCase()===b.toLowerCase()},function(a){return a.toLowerCase()}),
C=WAVE.isObject(f.items)?f.items:{},w=WAVE.strAsBool(f.disabled,x),q=WAVE.strAsBool(f.readonly,r),P=WAVE.strAsBool(f.canRaw,!1),ia=WAVE.strAsBool(f.canDel,!0),qa=WAVE.strAsBool(f.canAdd,!0),B=WAVE.strAsBool(f.required,!1),va=WAVE.strDefault(f.cls),y=WAVE.strDefault(f.errMsg,B?D.required:""),F=WAVE.isFunction(f.showError)?f.showError:function(){WAVE.id(X).innerText=y},Y=WAVE.isFunction(f.hideError)?f.hideError:function(){WAVE.id(X).innerText=""},pa=WAVE.isFunction(f.validate)?f.validate:function(a,
b,c){a=!0;if(B){if("text"===h||"textarea"===h||"radio"===h||"combo"===h)a=!WAVE.strEmpty(b);if("array"===h||"multiple"===h)a=WAVE.isArray(b)&&0<b.length;if("object"===h||"ps"===h)a=WAVE.isObject(b)&&!WAVE.empty(b)}return{ok:a,value:b,index:c}},I=a+E.editorContainerId,U=a+E.inputId,X=I+"_err",z=null,O,W,A,J,aa,la;if("text"===h||"textarea"===h||"combo"===h||"check"===h)aa=function(){var a=WAVE.id(U);return e(pa,a,"check"===h?a.checked:a.value,p,X,y,F,Y)};if("array"===h||"object"===h||"ps"===h)aa=function(){return e(pa,
z,z.jsonContent(),p,X,y,F,Y)};if("radio"===h||"multiple"===h)aa=function(){A=document.getElementsByName(U);W=A.length;la=[];for(O=0;O<W;O++)A[O].checked&&la.push(A[O].value);return e(pa,A,"multiple"===h?la:0<la.length?la[0]:null,p,X,y,F,Y)};N.push(aa);var R="<div class='@nodeCont@'>"+(WAVE.strEmpty(v)?"":"<label class='@lblCls@' for='@labelFor@'>@plh@</label>")+"<div class='@errorDivCls@' id='@errorDivId@'></div><div id='@divId@' class='@ccCls@'></div></div>",M=w?"disabled":"",da=q?"readonly":"";
k.insertAdjacentHTML("beforeend",WAVE.strHTMLTemplate(R,{nodeCont:b.CLS_OBJECT_EDITOR_NODE_CONTAIER+" "+va,labelFor:U,lblCls:B?"wvRequired":"",plh:v,errorDivCls:"wvError",errorDivId:X,divId:I,ccCls:"array"===h?b.CLS_OBJECT_EDITOR_ARRAY_CONTAIER:"object"===h||"ps"===h?b.CLS_OBJECT_EDITOR_OBJECT_CONTAIER:b.CLS_OBJECT_EDITOR_INPUT_CONTAIER}));k=WAVE.id(I);WAVE.id(X);f={DIV:k,id:U,value:WAVE.strDefault(m),meta:f,content:m,disabled:w,readonly:q,addLabel:!1,placeholder:v,sets:u,canRaw:P,canAdd:qa,canDel:ia};
if("textarea"===h)z=new b.MultiLineTextBox(f),z.eventBind(b.EVT_MULTI_LINE_TEXT_UPDATED,function(a,b){d()});else if("object"===h||"array"===h)z=new b.ObjectEditor(f),z.eventBind(b.EVT_OBJECT_EDITOR_UPDATED,function(a,b){d()});else if("ps"===h)z=new b.PropSetEditor(f),z.eventBind(b.EVT_PS_EDITOR_UPDATED,function(a,b){d()});else if("check"===h)k.innerHTML=WAVE.strHTMLTemplate("<input id='@id@' @disabled@ @readonly@ type='checkbox' placeholder='@plh@' title='@plh@' />",{id:U,disabled:M,readonly:da,plh:v,
value:WAVE.strDefault(m)}),g=WAVE.id(U),g.checked=WAVE.strAsBool(m,!1),g.onclick=function(a){d()};else if("multiple"===h){f="";for(J in C)g=U+"_+ "+J,f+=WAVE.strHTMLTemplate("<label for='@id@'>@name@</label>",{id:g,name:WAVE.strDefault(C[J],J)}),f+=WAVE.strHTMLTemplate("<input type='checkbox' @checked@ name='@name@' value='@value@' id='@id@' @disabled@ @readonly@/>",{checked:WAVE.isArray(m)&&WAVE.inArray(m,J)?"checked='checked'":"",name:U,value:J,id:g,disabled:M,readonly:da});k.innerHTML=f;A=document.getElementsByName(U);
W=A.length;for(O=0;O<W;O++)A[O].onclick=d}else if("radio"===h){f="";for(J in C)g=U+"_+ "+J,f+=WAVE.strHTMLTemplate("<label for='@id@'>@name@</label>",{id:g,name:WAVE.strDefault(C[J],J)}),f+=WAVE.strHTMLTemplate("<input type='radio' @checked@ name='@name@' value='@value@' id='@id@' @disabled@ @readonly@/>",{checked:m===J?"checked='checked'":"",name:U,value:J,id:g,disabled:M,readonly:da});k.innerHTML=f;A=document.getElementsByName(U);W=A.length;for(O=0;O<W;O++)A[O].onclick=d}else if("combo"===h){f=
"<select id='@id@' @disabled@ @readonly@>";WAVE.strEmpty(g)&&(f+="<option value=''></option>");for(J in C)f+=WAVE.strHTMLTemplate("<option @selected@ value='@value@'>@text@</option>",{selected:m===J?"selected":"",value:J,text:WAVE.strDefault(C[J],J)});k.innerHTML=WAVE.strHTMLTemplate(f+"</select>",{id:U,name:WAVE.strDefault(v,J),disabled:M,readonly:q?"disabled":""});!WAVE.strEmpty(g)&&WAVE.strEmpty(t[a])&&(t[a]=g);WAVE.id(U).onchange=function(a){d()}}else"text"===h&&(k.innerHTML=WAVE.strHTMLTemplate("<input id='@id@' @disabled@ @readonly@ type='text' placeholder='@plh@' title='@plh@' value='@value@'/>",
{id:U,disabled:M,readonly:da,plh:v,value:WAVE.strDefault(m)}),WAVE.id(U).onchange=function(a){d()});aa()},B=WAVE.get(a,"btnClasses",{});B.addBtnCls=WAVE.strDefault(B.addBtnCls,b.CLS_PS_BTN_ADD);B.delBtnCls=WAVE.strDefault(B.delBtnCls,b.CLS_PS_BTN_DEL);B.rawBtnCls=WAVE.strDefault(B.rawBtnCls,b.CLS_PS_BTN_RAW);B.clearBtnCls=WAVE.strDefault(B.clearBtnCls,b.CLS_PS_BTN_CLEAR);B.modalBtnCls=WAVE.strDefault(B.modalBtnCls,"");this.content=function(a,c){if("undefined"===typeof a)return WAVE.empty(t)?"":JSON.stringify(t,
null,2);var e=WAVE.tryParseJSON(a);e.ok&&(t=e.obj,""!==P&&(WAVE.id(E.outputHiddenId).value=l.content()),l.eventInvoke(b.EVT_OBJECT_EDITOR_UPDATED,t),!0===c&&d());return a};this.jsonContent=function(){return t};this.maxLength=function(){return q};this.DIV=function(){return g};this.validate=function(){var a=[],b=!0,c;for(c in N){var e=N[c](),b=b&&e.ok;a.push(e)}return{ok:b,result:a}};this.validators=function(){return N};var X="<div class='@divCLS@' id='@divId@'></div>"+(!u||r||x?"":"<input type='button' id='@BtnId@' class='@BtnCls@' value='@delText@'/>")+
"<div class='@arrSep@'></div>";d()};var L=0;b.Tabs=function(a){function c(a){for(var b=null,e=0;e<h.length;e++){var d=h[e];d.name()===a?(b=a,d.activate()):d.deactivate()}return b}function e(a){for(var b=0;b<h.length;b++)if(h[b].name()===a)return h[b];return null}if("undefined"===typeof a||null===a||"undefined"===typeof a.DIV||null===a.DIV)throw"Tabs.ctor(init.DIV)";var d=this;WAVE.extend(d,WAVE.EventManager);L++;var f="wvTabs_"+L,l=a.DIV,k=WAVE.styleOf(l,"display"),g=WAVE.strAsBool(a.unswitchable,
!1),m=WAVE.strAsBool(a.parse,!1),h=WAVE.isArray(a.tabs)?a.tabs:[],n=0,v=function(a){n++;a=WAVE.isObject(a)?a:{};var c=this,e=WAVE.strDefault(a.title,n.toString()),g=WAVE.strDefault(a.content),m=WAVE.strAsBool(a.isHtml,!0),v=WAVE.strAsBool(a.isActive,!1),r=WAVE.strDefault(a.id,f+"_"+n),x=WAVE.strDefault(a.name,n.toString()),p=WAVE.strAsBool(a.visible,!0),u=WAVE.strDefault(a.cls),w=WAVE.get(a,"cont",null),C=WAVE.get(a,"li",null),q;this.build=function(a,c){a&&(null===C&&(WAVE.id(t.ulTabsId).insertAdjacentHTML("beforeend",
"<li id='"+r+"'></li>"),C=WAVE.id(r)),C.innerText=e,C.onclick=function(){d.tabActive(x)},c&&(q=WAVE.styleOf(C,"display")));if(null===w){var f="content_"+r;WAVE.id(t.divContentContId).insertAdjacentHTML("beforeend","<div id='"+f+"' class='"+b.CLS_TABS_CONTENT_DIV+" "+u+"'></div>");w=WAVE.id(f);m?w.innerHTML=g:w.innerText=g}C.style.display=p?q:"none";WAVE.addClass(w,p&&v?b.CLS_TABS_CONTENT_DIV_SHOWN:b.CLS_TABS_CONTENT_DIV_HIDDEN);WAVE.removeClass(w,p&&v?b.CLS_TABS_CONTENT_DIV_HIDDEN:b.CLS_TABS_CONTENT_DIV_SHOWN)};
this.activate=function(){v=!0;WAVE.addClass(w,b.CLS_TABS_CONTENT_DIV_SHOWN);WAVE.removeClass(w,b.CLS_TABS_CONTENT_DIV_HIDDEN);WAVE.addClass(C,b.CLS_TABS_ACTIVE_TAB)};this.deactivate=function(){v=!1;WAVE.addClass(w,b.CLS_TABS_CONTENT_DIV_HIDDEN);WAVE.removeClass(w,b.CLS_TABS_CONTENT_DIV_SHOWN);WAVE.removeClass(C,b.CLS_TABS_ACTIVE_TAB)};this.destroy=function(){return WAVE.removeElem(w.id)&&WAVE.removeElem(C.id)};this.name=function(){return x};this.tab=function(){return C};this.cont=function(){return w};
this.isActive=function(a){if("undefined"===typeof a||null===a)return v;v=a};this.content=function(a){if("undefined"===typeof a||null===a)return g;g=a;m?w.innerHTML=g:w.innerText=g};this.title=function(a){if("undefined"===typeof a||null===a)return e;e=a;C.innerText=e};this.visible=function(a){if("undefined"===typeof a||null===a)return p;p=!0===a;c.build(!1,!0);a=!0;for(var b=0,e=h.length;b<e;b++){var f=h[b];f.visible()&&h[b].name()!==x&&(v&&!p&&d.tabActive(f.name()),a=!1)}a?(k=WAVE.styleOf(l,"display"),
l.style.display="none"):l.style.display=k};this.titleCtrl=function(){return C};this.contentCtrl=function(){return w};return c};for(a=0;a<h.length;a++)h[a]=new v(h[a]);var t={divTabsContId:"tabs_cont_"+f,divContentContId:"content_cont_"+f,ulTabsId:"ul_tabs_ "+f};this.DIV=function(){return l};this.tabs=function(){return h};this.unswitchable=function(a){if("undefined"===typeof a)return g;g=!0===a;for(var c=0;c<h.length;c++){var e=h[c];g?h[c].isActive()||(e.tab().className+=" "+b.CLS_TABS_LI_DISABLED):
WAVE.removeClass(e.tab(),b.CLS_TABS_LI_DISABLED)}return a};this.tabByName=function(a){return"undefined"===typeof a||null===a?null:e(a)};this.tabAdd=function(a){var c={phase:b.EVT_PHASE_BEFORE,tabControl:d,tabInit:a,abort:!1};d.eventInvoke(b.EVT_TABS_TAB_ADD,c);if(!0!==c.abort)return a=new v(a),c=e(a.name()),null!==c&&(c.destroy(),h.splice(h.indexOf(c),1)),h.push(a),a.build(!0,!1),(a.isActive()||null===d.tabActive())&&d.tabActive(a.name()),d.eventInvoke(b.EVT_TABS_TAB_ADD,{phase:b.EVT_PHASE_AFTER,
tabControl:d,tab:a}),a};this.tabDelete=function(a){if("undefined"===typeof a||null===a)return!1;for(var e=!1,f=0;f<h.length;f++)if(h[f].name()===a){var l=h[f],g={phase:b.EVT_PHASE_BEFORE,tabControl:d,tab:l,abort:!1};d.eventInvoke(b.EVT_TABS_TAB_REMOVE,g);if(!0===g.abort)return e;e=l.destroy();h.splice(f,1);l.isActive()&&0<h.length&&c(h[0].name());break}d.eventInvoke(b.EVT_TABS_TAB_REMOVE,{phase:b.EVT_PHASE_AFTER,tabControl:d,name:a,ok:e});return e};this.tabActive=function(a){var e=null;if("undefined"===
typeof a||null===a)for(a=0;a<h.length;a++){if(h[a].isActive()){e=h[a].name();break}}else g||d.tabActive()===a||(e=c(a),d.eventInvoke(b.EVT_TABS_TAB_CHANGED,a));return e};this.tabContent=function(a,b){if("undefined"===typeof a||null===a||WAVE.strEmpty(a))return null;var c=e(a);if(null===c)return null;if("undefined"===typeof b)return c.content();c.content(b);return b};this.tabTitle=function(a,b){if("undefined"===typeof a||null===a||WAVE.strEmpty(a))return null;var c=e(a);if(null===c)return null;if("undefined"===
typeof b)return c.title();c.title(b);return b};this.tabVisible=function(a,b){if("undefined"===typeof a||null===a||WAVE.strEmpty(a))return null;var c=e(a);if(null===c)return null;if("undefined"===typeof b)return c.visible();b=!0===b;c.visible(b);return b};(function(){var a,e,d;if(m){h=[];var f=l.getElementsByTagName("li");a=0;for(e=f.length;a<e;a++){var g=f[a];d={};d.title=g.innerText;d.name=WAVE.strDefault(g.getAttribute("data-tabs-name"));WAVE.strEmpty(d.name)&&(d.name=null);d.isHtml=WAVE.strAsBool(g.getAttribute("data-tabs-isHtml"),
!0);d.isActive=WAVE.strAsBool(g.getAttribute("data-tabs-isActive"),!1);d.visible=WAVE.strAsBool(g.getAttribute("data-tabs-visible"),!0);d.cont=WAVE.id(WAVE.strDefault(g.getAttribute("data-tabs-contId")));d.li=g;h.push(new v(d))}}else l.innerHTML=WAVE.strHTMLTemplate("<div id='@divTabsId@' class='@ulContainer@'><ul id='@ulId@' class='@ulClass@'></ul></div><div id='@divContId@' class='@divClass@'></div>",{divTabsId:t.divTabsContId,divContId:t.divContentContId,ulId:t.ulTabsId,ulClass:b.CLS_TABS_UL,divClass:b.CLS_TABS_CONTENT_CONTAINER,
ulContainer:b.CLS_TABS_UL_CONTAINER});if(0!==h.length){e=null;f=!1;for(a=0;a<h.length;a++)d=h[a],d.isActive()&&d.visible()&&(f?d.isActive(!1):(e=d.name(),f=!0)),d.build(!0,!1);if(!f)for(a=0;a<h.length;){if(h[a].visible()){e=h[a].name();h[a].isActive(!0);break}a++}null!==e&&c(e)}})();return d};var k=0;b.Details=function(a){function c(){R&&setTimeout(function(){l()},K);A&&(WAVE.addEventHandler(window,"focus",e),setTimeout(function(){WAVE.addEventHandler(window,"mousemove",d)},1));B&&setTimeout(function(){WAVE.addEventHandler(window,
"click",e,!0)},1);M&&setTimeout(function(){WAVE.addEventHandler(window,"scroll",l)},1);H&&setTimeout(function(){WAVE.addEventHandler(window,"resize",l)},1)}function e(a){var b=a.target,c="modal"===L&&null!==T?T.baseDIV():t;if(null!==T&&a.target===T.baseDIV()||!WAVE.isParentOf(c,b))a.preventDefault(),l()}function d(a){a=a.target;WAVE.isParentOf(t,a)||WAVE.isParentOf(v,a)||l()}function f(a){WAVE.strEmpty(r)||(y?v.innerHTML=a:v.innerText=a)}function l(){if(!G){var a={phase:b.EVT_PHASE_BEFORE,abort:!1};
h.eventInvoke(b.EVT_DETAILS_HIDE,a);!0!==a.abort&&(f(r),E&&WAVE.addEventHandler(v,"click",g),F&&WAVE.removeEventHandler(v,"click",l),"modal"===L&&null!==T?T.close():(WAVE.addClass(t,b.CLS_DETAILS_CONTENT_HIDDEN),WAVE.removeClass(t,b.CLS_DETAILS_CONTENT_VISIBLE)),WAVE.removeEventHandler(window,"focus",e),WAVE.removeEventHandler(window,"click",e,!0),WAVE.removeEventHandler(window,"mousemove",d),WAVE.addClass(v,b.CLS_DETAILS_TITLE_HIDDEN),WAVE.removeClass(v,b.CLS_DETAILS_TITLE_SHOWN),setTimeout(function(){G=
!0;h.eventInvoke(b.EVT_DETAILS_HIDE,{phase:b.EVT_PHASE_AFTER})},1))}}function g(){if(G){var a={phase:b.EVT_PHASE_BEFORE,abort:!1};h.eventInvoke(b.EVT_DETAILS_SHOW,a);!0!==a.abort&&(f(x),E&&WAVE.removeEventHandler(v,"click",g),F&&WAVE.addEventHandler(v,"click",l),"modal"===L?(T=new b.Dialog({cls:b.CLS_DETAILS_CONTENT+" "+I,body:p,onShow:function(a){c();WAVE.strEmpty(u)||WAVE.ajaxCall("GET",u,null,function(b){null!==q?(b=q(b),WAVE.strEmpty(b)||a.content(b)):a.content(b)},console.error,console.error,
w,w)},header:z}),t=T.bodyDIV(),WAVE.id(m+"close").onclick=l):(WAVE.removeClass(t,b.CLS_DETAILS_CONTENT_HIDDEN),WAVE.addClass(t,b.CLS_DETAILS_CONTENT_VISIBLE),c()),G=!1,WAVE.addClass(v,b.CLS_DETAILS_TITLE_SHOWN),WAVE.removeClass(v,b.CLS_DETAILS_TITLE_HIDDEN),h.eventInvoke(b.EVT_DETAILS_SHOW,{phase:b.EVT_PHASE_AFTER}))}}if("undefined"===typeof a||null===a)throw"Details.ctor(init)";var h=this;WAVE.extend(h,WAVE.EventManager);var m="wvDetails_"+k++,n,v,t,r=WAVE.strDefault(a.title),x=WAVE.strDefault(a.altTitle,
r),p=WAVE.strDefault(a.content),u=WAVE.strDefault(a.contentUrl),w=WAVE.strDefault(a.contentType),q=WAVE.isFunction(a.loadCallback)?a.loadCallback:null,y=WAVE.strAsBool(a.isTitleHtml,!0),P=WAVE.strAsBool(a.isContentHtml,!0),I=WAVE.strDefault(a.modalCls,b.CLS_DETAILS_MODAL),z="<div class='wvDetailsHeader'>"+WAVE.strDefault(a.modalTitle)+"</div><div class='wvCloseDetails' id='"+m+"close'></div>",E=WAVE.strAsBool(a.showOnClick,!0),D=WAVE.strAsBool(a.showOnFocus,!1),F=WAVE.strAsBool(a.hideOnTitle,!0),
B=WAVE.strAsBool(a.hideOnClick,!0),A=WAVE.strAsBool(a.hideOnFocus,!1),R=WAVE.strAsBool(a.hideOnTimer,!1),M=WAVE.strAsBool(a.hideOnScroll,!1),H=WAVE.strAsBool(a.hideOnResize,!1),L=WAVE.strDefault(a.mode,"swap"),S=WAVE.tryParseInt(a.timeout),K=S.ok?S.value:0,Q=m+"_title",ka=m+"_content",T=null,G=!1;WAVE.has(a,"DIV")&&(n=WAVE.isString(a.DIV)?WAVE.id(a.DIV):a.DIV);WAVE.has(a,"titleCtrl")&&(v=WAVE.isString(a.titleCtrl)?WAVE.id(a.titleCtrl):a.titleCtrl);WAVE.has(a,"contentCtrl")&&(t=WAVE.isString(a.contentCtrl)?
WAVE.id(a.contentCtrl):a.contentCtrl);this.hide=function(){l()};this.show=function(){g()};this.toggle=function(){G?g():l()};this.content=function(a){if("undefined"===typeof a||null===a)return p;a=p=a;P?t.innerHTML=a:t.innerText=a};(function(){if("undefined"!==typeof n&&null!==n)if(WAVE.addClass(n,b.CLS_DETAILS),"modal"===L)n.innerHTML=WAVE.strHTMLTemplate("<span id='@titleId@' class='@titleClass@' tabindex='0'></span>",{titleId:Q,titleClass:b.CLS_DETAILS_TITLE}),v=WAVE.id(Q),f(r);else{n.innerHTML=
WAVE.strHTMLTemplate("<span id='@titleId@' class='@titleClass@' tabindex='0'></span><div id='@contId@' class='@contClass@'></div>",{titleId:Q,titleClass:b.CLS_DETAILS_TITLE,contId:ka,contClass:b.CLS_DETAILS_CONTENT});v=WAVE.id(Q);t=WAVE.id(ka);var a=p;P?t.innerHTML=a:t.innerText=a}else if(null!==v&&null!==t)WAVE.addClass(v,b.CLS_DETAILS_TITLE),WAVE.addClass(t,b.CLS_DETAILS_CONTENT);else throw"Details.build(unacceptable init)";f(r);E&&WAVE.addEventHandler(v,"click",g);D&&(WAVE.addEventHandler(v,"mouseover",
g),WAVE.addEventHandler(v,"focus",g));l()})();return h};var M=0;b.ImageView=function(a,c){function e(a){if("undefined"!==typeof a&&(g.clear(!0),null!==a))return WAVE.isObject(a)&&WAVE.has(a,"element")?(a.error||k.appendChild(a.element),f(a)):a=d(a,function(){this.className=b.CLS_IMAGE_VIEW_IMAGE;g.clear()&&k.appendChild(this);f(a)},function(){f(a)},c),a}function f(a){if("undefined"!==typeof k)if(k.className=b.CLS_IMAGE_VIEW,a.error)k.className+=" "+b.CLS_IMAGE_BOX_ERROR;else if(a.load){var c=l(k),
c=c.x/c.y;a=(a.width|0)/(a.height|0);isNaN(a)||(k.className+=" "+(a>=c?b.CLS_IMAGE_BOX_WIDER:b.CLS_IMAGE_BOX_HIGHER))}else k.className+=" "+b.CLS_IMAGE_BOX_LOADING}function l(a){return{x:a.offsetWidth,y:a.offsetHeight}}if("undefined"===typeof a||null===a)a={};WAVE.isString(a)&&(a={DIV:a});if(!WAVE.has(a,"DIV"))throw"ImageView.ctor(init.thumbnails)";M++;var g=this;WAVE.extend(g,WAVE.EventManager);var k=function(a){var c=document.createElement("div");c.className=b.CLS_IMAGE_VIEW;a.appendChild(c);A(c,
function(a,e){var d,f;g.image();d=c;var k=0;for(f=0;null!==d;)k+=d.offsetLeft,f+=d.offsetTop,d=d.offsetParent;d=k;var k=l(c),m=a-d-k.x/2,n=e-f-k.y/2,k=l(h.element),m=m*h.width/k.x,n=n*h.height/k.y;if(h.width>k.x||h.height>k.y)c.className+=" "+b.CLS_IMAGE_VIEW_ZOOM,k=c.scrollHeight,c.scrollLeft=m+c.scrollWidth/2-(a-d),c.scrollTop=n+k/2-(e-f)},void 0,f,!0);return c}(WAVE.isString(a.DIV)?WAVE.id(a.DIV):a.DIV),h;g.image=function(a){"undefined"!==typeof a&&(h=e(a));return h};g.clear=function(a){a&&(k.innerHTML=
"");return""===k.innerHTML};g.image(a.image);window.addEventListener("resize",function(){f(g.image()||{})},!1);return g};var V=0;b.Gallery=function(a){function c(a){var b;if(e(a.id))b=u[a.id],b.update(a);else{b=new n.Item(a,n,r);b.order=a.order|0;a:{a=p;for(var d=b,l=f,g=0,k=a.length,h=-1,m=0;g<k;)if(h=(g+k)/2|0,m=l(a[h],d),0>m)g=h+1;else if(0<m)k=h;else{for(;h<k&&0===l(a[h],d);)h++;a=h;break a}a=g}t.insertBefore(b.element(),WAVE.has(p,a)?p[a].element():null);p.splice(a,0,b);u[b.id()]=b}return b}
function e(a){return"undefined"===typeof a?!1:WAVE.has(u,a)}function f(a,b){return a.order-b.order}function l(a){return{x:a.offsetWidth,y:a.offsetHeight}}function g(a){function b(a){return a}var c=Date.now(),e=setInterval(function(){var d=(Date.now()-c)/(+a.duration||1E3);1<d&&(d=1);var f=a.step((a.delta||b)(d))||!0;1!==d&&f||clearInterval(e)},+a.delay||10)}function k(a,b,c,e,d){var f=a.scrollLeft,l=a.scrollTop;g({duration:c,delta:e,step:function(c){a.scrollLeft=f+b.x*c;a.scrollTop=l+b.y*c;d&&d.call(a,
c)}})}function h(a,c,e){return function(){var d={evt:c,phase:b.EVT_PHASE_BEFORE,args:arguments,abort:!1};a.eventInvoke(c,d);if(!0!==d.abort){var f=e.apply(a,arguments);d.result=f;d.phase=b.EVT_PHASE_AFTER;delete d.abort;a.eventInvoke(c,d);return f}}}if("undefined"===typeof a||null===a)a={};WAVE.isString(a)&&(a={thumbnails:a});if(!WAVE.has(a,"thumbnails"))throw"Gallery.ctor(init.thumbnails)";var m=WAVE.has(a,"urls");if(m&&!WAVE.isObject(a.urls))throw"Gallery.ctor(init.urls)";V++;var n=this;WAVE.extend(n,
WAVE.EventManager);n.urls=m?a.urls:{};var v,t=function(a){function c(){d.className=b.CLS_GALLERY_PREV+(0===t.scrollLeft&&0===t.scrollTop?" "+b.CLS_GALLERY_DISABLED:"");f.className=b.CLS_GALLERY_NEXT+(t.scrollLeft+t.clientWidth===t.scrollWidth&&t.scrollTop+t.clientHeight===t.scrollHeight?" "+b.CLS_GALLERY_DISABLED:"")}var e=document.createElement("ul"),d=document.createElement("div"),f=document.createElement("div");e.className=b.CLS_GALLERY_LIST;d.className=b.CLS_GALLERY_PREV;f.className=b.CLS_GALLERY_NEXT;
d.onclick=function(a){a.preventDefault();a=l(e.firstChild);k(e,{x:-a.x,y:-a.y},400,void 0,c)};f.onclick=function(a){a.preventDefault();a=l(e.firstChild);k(e,a,400,void 0,c)};A(e,void 0,c,c);a.appendChild(d);a.appendChild(e);a.appendChild(f);window.addEventListener("resize",c,!1);v=c;return e}(WAVE.isString(a.thumbnails)?WAVE.id(a.thumbnails):a.thumbnails),r=WAVE.isString(a.preview)?new b.ImageView(a.preview,n.urls):a.preview,x,p=[],u={},w=0;n.Item=function(a,c,e){function f(a){r.innerHTML="";r.className=
b.CLS_GALLERY_THUMBNAIL+" "+b.CLS_IMAGE_BOX_LOADING;n=d(a,function(){this.className=b.CLS_GALLERY_IMAGE;this.id=b.CLS_GALLERY_IMAGE+h.id();r.appendChild(this);r.className=b.CLS_GALLERY_THUMBNAIL+" "+(this.width>=this.height?b.CLS_IMAGE_BOX_WIDER:b.CLS_IMAGE_BOX_HIGHER)},function(){r.className=b.CLS_GALLERY_THUMBNAIL+" "+b.CLS_IMAGE_BOX_ERROR},c.urls);v()}var l=w++,g=WAVE.isObject(a)&&WAVE.has(a,"id")?a.id:l;a.id=g;var k={},h=this;WAVE.extend(h,WAVE.EventManager);var m,n,t=document.createElement("li"),
r=document.createElement("div"),x=document.createElement("div");t.className=b.CLS_GALLERY_ITEM;x.className=b.CLS_GALLERY_CONTENT;r.className=b.CLS_GALLERY_THUMBNAIL;t.appendChild(r);t.appendChild(x);t.onclick=function(){c.current(g)};h.id=function(){return g};h.title=function(a){"undefined"!==typeof a&&k.title!==a&&(a=k.title=a,r.title=a);return WAVE.strDefault(k.title,g)};h.content=function(a,b){if("undefined"!==typeof a&&(k.content!==a||!!k.isText!==!!b)){var c=k.content=a;(k.isText=!!b)?x.innerText=
c:x.innerHTML=c}return WAVE.strDefault(k.content)};h.isText=function(){return!!k.isText};h.image=function(a){if("undefined"!==typeof a&&!z(k.image,a)){a=k.image=a;var b=!1;"undefined"!==typeof m&&(b=m===e.image(),WAVE.has(m,"free")&&m.free());m=a;b&&h.show()}return m};h.thumb=function(a){"undefined"===typeof a||z(k.thumb,a)||f(k.thumb=a);return n};h.data=function(a){"undefined"!==typeof a&&(k.data=a);return k.data};h.show=function(){m=e.image(m)};h.update=function(a){if(!WAVE.isObject(a)||WAVE.has(a,
"url"))a={image:a};if(!WAVE.has(a,"image"))throw"Gallery.Item.update(init.image)";if(a.id!==g)throw"Gallery.Item.update(init.id)";h.image(a.image);h.thumb(a.thumb||a.image);h.title(a.title);h.content(a.content,a.isText);h.data(a.data)};h.free=function(){t.parentNode&&t.parentNode.removeChild(t);e.image()===m&&m.element.parentNode&&m.element.parentNode.removeChild(m.element)};h.element=function(){return t};h.update(a);return h};var q=h(n,b.EVT_GALLERY_CHANGE,function(a){if(e(a))return a=u[a],"undefined"!==
typeof x&&(x.element().className=b.CLS_GALLERY_ITEM),a.element().className=b.CLS_GALLERY_ITEM+" "+b.CLS_GALLERY_SELECTED,a.show(),a});n.current=function(a){"undefined"!==typeof a&&(a=q(a),"undefined"!==typeof a&&(x=a));if("undefined"!==typeof x)return x.id()};n.has=e;n.get=function(a){return u[a]};var y=h(n,b.EVT_GALLERY_REMOVE,function(a){if(!e(a))return!0;u[a].free();p=p.filter(function(b){return b.id()!==a});delete u[a];return!0});n.remove=function(a){return e(a)?!!y(a):!0};n.images=function(){return p};
n.update=h(n,b.EVT_GALLERY_ADD,c);WAVE.each(a.images,c);v();return n};b.GallerySimple=function(a){if("undefined"===typeof a||null===a||"undefined"===typeof a.DIV||null===a.DIV)throw"GallerySimple.ctor(init.DIV)";var c=WAVE.isString(a.DIV)?WAVE.id(a.DIV):a.DIV,e=document.createElement("div");e.className=b.CLS_GALLERY_SIMPLE_PREVIEW;a.preview=new b.ImageView({DIV:e},a.urls);a.thumbnails=document.createElement("div");a.thumbnails.className=b.CLS_GALLERY_SIMPLE_THUMBNAILS;c.appendChild(a.thumbnails);
c.appendChild(e);return b.Gallery.call(this,a)};var H=0;b.ChainSelector=function(a){function c(a){a=x.indexOf(a.target.parentNode);a=l().slice(0,a+1);f(a)}function e(a,b){if(r||t)return!1;var d=x.length,f=u.selectBodyId+d.toString(),l=WAVE.strHTMLTemplate("<div id='@divComboWrapId@' class='@divComboWrapCls@' @disabled@ @readonly@><select id='@selectBodyId@'><option value=''></option>",{divComboWrapId:u.divComboWrapId+d.toString(),divComboWrapCls:p.divComboWrapCls,selectBodyId:f,disabled:r?"":"disabled",
readonly:t?"readonly":""});a.wEach(function(a){l+=WAVE.strHTMLTemplate("<option value='@value@' @selected@>@descr@</option>",{value:a.id,selected:WAVE.strSame(a.id,b)?"selected":"",descr:a.val})});var l=l+WAVE.strHTMLTemplate("</select><div id='@divArrowId@' class='@divArrowCls@'></div></div>",{divArrowId:u.divArrowId+d.toString(),divArrowCls:p.divArrowCls}),k=WAVE.id(u.divInfoId),g=document.createElement("div");g.innerHTML=l;g=g.firstChild;h.insertBefore(g,k);x[d]=g;WAVE.addEventHandler(WAVE.id(f),
"change",c);return g}function d(a){if(r||t)return!1;for(var b=0;b<a;b++){var e=x.pop();if(!WAVE.exists(e))break;WAVE.removeEventHandler(WAVE.id(u.selectBodyId+x.length.toString()),"change",c);h.removeChild(e)}}function f(a){if(r||t)return!1;WAVE.exists(a)||(a=[""]);WAVE.isString(a)&&(a=a.split("."));if(!WAVE.isArray(a))return!1;var c=WAVE.arrayWalkable(n),l=null,h,v,p=!0;d(x.length-a.length);0>=x.length&&e(c,"");for(var w in a){h=a[w];if(WAVE.strSame(h,"")){d(x.length-w);l=c;break}if(null===c){p=
!1;d(x.length-w);break}l=c.wFirst(function(a){return WAVE.strSame(a.id,h)});if(null===l){p=!1;d(x.length-w);l=c;break}v=l;l=WAVE.exists(v.children)?WAVE.arrayWalkable(v.children):null;WAVE.exists(x[w])?(c=WAVE.id(u.selectBodyId+w.toString()),WAVE.strSame(c.value,h)||(d(x.length-w-1),c.value=h)):(d(x.length-w),e(c,h));c=l}WAVE.exists(l)&&e(l,"");a=WAVE.id(u.divNameId);w=WAVE.exists(v)?WAVE.strDefault(v.name,""):"";a.innerText=WAVE.strSame(w,"")?"":"Name: "+w;v=WAVE.exists(v)?WAVE.strDefault(v.descr,
""):"";WAVE.id(u.divDescrId).innerText=WAVE.strSame(v,"")?"":"Description: "+v;null!==m&&(WAVE.id(u.outputHiddenId).value=g.value());g.eventInvoke(b.EVT_CHAIN_SELECTOR_UPDATED,k());return p}function l(){var a=[],b;for(b in x){var c=WAVE.id(u.selectBodyId+b.toString());a.push(c.value)}return a}function k(){var a=l().join(".");0<a.length&&WAVE.strSame(a[a.length-1],".")&&(a=a.substring(0,a.length-1));return a}if(!WAVE.exists(a))throw"ChainSelector.ctor(init=null)";var g=this;WAVE.extend(g,WAVE.EventManager);
H++;var h;WAVE.has(a,"DIV")&&(h=WAVE.isString(a.DIV)?WAVE.id(a.DIV):a.DIV);var m=WAVE.strDefault(a.outputFormFieldName,null);WAVE.strDefault(a.description);var n=WAVE.has(a,"values")&&WAVE.exists(a.values)&&WAVE.isArray(a.values)?a.values:[],v=WAVE.strDefault(a.path,""),t=WAVE.strAsBool(a.readonly,!1),r=WAVE.strAsBool(a.disabled,!1),x=[],p=WAVE.get(a,"classes",{});p.divWrapCls=WAVE.strDefault(p.divWrapCls,b.CLS_CHAIN_SELECTOR);p.divInfoCls=WAVE.strDefault(p.divInfoCls,b.CLS_CS_DIV_INFO);p.divNameCls=
WAVE.strDefault(p.divNameCls,b.CLS_CS_DIV_NAME);p.divDescrCls=WAVE.strDefault(p.divDescrCls,b.CLS_CS_DIV_DESCR);p.divComboWrapCls=WAVE.strDefault(p.divComboWrapCls,b.CLS_CS_DIV_COMBO_WRAP);p.divArrowCls=WAVE.strDefault(p.divArrowCls,b.CLS_CS_DIV_ARROW);a="cs_"+H;var u={divInfoId:"divInfo_"+a,divNameId:"divName_"+a,divDescrId:"divDescr_"+a,divComboWrapId:"divComboWrap_"+a+"_",selectBodyId:"selectBodyId"+a+"_",divArrowId:"divArrow_"+a+"_",outputHiddenId:"hidden_"+a};this.navigate=function(a){return f(a)};
this.path=function(){return l()};this.value=function(){return k()};(function(){if(WAVE.exists(h)){WAVE.addClass(h,p.divWrapCls);var a=WAVE.strHTMLTemplate("<input id='@outerId@' type='hidden' name='@outerName@'/><div id='@divInfoId@' class='@divInfoCls@'><div id='@divNameId@' class='@divNameCls@'></div><div id='@divDescrId@' class='@divDescrCls@'></div></div>",{outerId:u.outputHiddenId,outerName:WAVE.strDefault(m,""),divInfoId:u.divInfoId,divInfoCls:p.divInfoCls,divNameId:u.divNameId,divNameCls:p.divNameCls,
divDescrId:u.divDescrId,divDescrCls:p.divDescrCls});h.innerHTML=a;f(v)}})();return g};b.CLS_SELECT_MODE_MULTI="wvMulti";b.CLS_SELECT_MODE_SINGLE="wvSingle";b.CLS_SELECT_CONTAINER="wvSelectContainer";b.CLS_SELECT_COMBOBOX="wvSelectCombobox";b.CLS_SELECT_DROPDOWN="wvSelectDropdown";b.CLS_SELECT_DROPDOWN_SHOWN="wvShown";b.CLS_SELECT_DROPDOWN_HIDDEN="wvHidden";b.CLS_SELECT_DISPLAY="wvSelectDisplay";b.CLS_SELECT_ARROW="wvSelectArrow";b.CLS_SELECT_AUTOCOMPETE="wvSelectAutocomplete";b.CLS_SELECT_AUTO_CONTAINER=
"wvSelectAutoContainer";b.CLS_SELECT_CHOICES_CONTAINER="wvSelectChoicesContainer";b.EVT_SELECT_CHANGE="wv-select-change";b.EVT_SELECT_OPEN="wv-select-opan";b.EVT_SELECT_CLOSE="wv-select-close";b.EVT_SELECT_SELECT="wv-select-select";b.EVT_SELECT_UNSELECT="wv-select-unselect";b.SELECT_MODES={Single:0,Multi:1};var S=0;b.Select=function(a,c){function d(a,b,c){a=document.createElement(a);a.id=b;WAVE.strEmpty(c)||(a.className=c);return a}function f(){null!==ca&&(clearTimeout(ca),null===ca)}function l(){var a=
{phase:b.EVT_PHASE_BEFORE,sender:q,abort:!1,refresh:!0};q.eventInvoke(b.EVT_SELECT_CLOSE,a);!0!==a.abort&&(f(),!0===a.refresh&&(sa([G],""),M.value=""),fa=!1,WAVE.addClass(H,b.CLS_SELECT_DROPDOWN_HIDDEN),WAVE.removeClass(H,b.CLS_SELECT_DROPDOWN_SHOWN),WAVE.removeEventHandler(window,"click",h),a.result=!1,a.phase=b.EVT_PHASE_AFTER,delete a.abort,q.eventInvoke(b.EVT_SELECT_CLOSE,a))}function k(){var a={phase:b.EVT_PHASE_BEFORE,sender:q,abort:!1};q.eventInvoke(b.EVT_SELECT_OPEN,a);!0!==a.abort&&(fa=!0,
WAVE.addClass(H,b.CLS_SELECT_DROPDOWN_SHOWN),WAVE.removeClass(H,b.CLS_SELECT_DROPDOWN_HIDDEN),WAVE.addEventHandler(window,"click",h),a.result=!0,a.phase=b.EVT_PHASE_AFTER,delete a.abort,q.eventInvoke(b.EVT_SELECT_OPEN,a))}function g(a){if("undefined"===typeof a||null===a)a=!fa;!0===a?k():l()}function h(a){WAVE.isParentOf(E,a.target)||l()}function m(a,b){return-1<a.value().toUpperCase().indexOf(b.toUpperCase())?!0:!1}function n(a,b){for(var c=0;c<a.length;c++){var e=a[c];if(null!==e){var d=e.children();
if(0!==d.length||null!==e.value())0<d.length?n(d,b):e.visible(m(e,b))}}}function v(a){var c={phase:b.EVT_PHASE_BEFORE,sender:q,abort:!1};q.eventInvoke(b.EVT_SELECT_UNSELECT,c);if(!0!==c.abort){if(T===b.SELECT_MODES.Single)ba={},Z=[];else{delete ba[a.id()];var e=Z.indexOf(a.id());-1<e&&Z.splice(e,1)}a.destroyView();L.value=q.value();c.result=L.value;c.phase=b.EVT_PHASE_AFTER;delete c.abort;q.eventInvoke(b.EVT_SELECT_UNSELECT,c)}}function t(a){var c={phase:b.EVT_PHASE_BEFORE,sender:q,abort:!1};q.eventInvoke(b.EVT_SELECT_SELECT,
c);if(!0!==c.abort){if(T===b.SELECT_MODES.Single&&0<Z.length&&Z[0]!==a.id()){var e=ba[Z[0]];e.isSelected(!1);e.destroyView();ba={};Z=[]}ba[a.id()]=a;Z.push(a.id());a.renderSelection(F,function(){a.isSelected(!1);v(a)});L.value=q.value();c.result=L.value;c.phase=b.EVT_PHASE_AFTER;delete c.abort;q.eventInvoke(b.EVT_SELECT_SELECT,c)}}function x(a,c){if(c.phase!==b.EVT_PHASE_BEFORE){var e=c.sender.isSelected();T===b.SELECT_MODES.Single?!e&&c.sender.isSelected(!0)&&(g(),t(c.sender)):e?c.sender.isSelected(!1)&&
v(c.sender):c.sender.isSelected(!0)&&t(c.sender)}}function r(){G.eventUnbind(b.EVT_SELECT_CHOICE_CLICK,x);G.destroy();G=null}function p(a){var c="undefined"===typeof a||null===a;c&&null!==G?r():(Z=[],ba={},null!==G&&r(),c||(G=new y({data:a,DIV:V,builder:z,disable:ka}),G.eventBind(b.EVT_SELECT_CHOICE_CLICK,x)))}function u(a,b){var c=a.children(),e=c.length;if(0===e){if(a.trySetValue(b))return t(a),!0}else{for(var d=!1,f=0;f<e;f++)var l=u(c[f],b),d=d&&l;return d}}if(!WAVE.exists(a))throw"Select.ctor(init=null)";
if(WAVE.strEmpty(a.DIV))throw"Select.ctor(init.DIV=null)";var w=WAVE.isString(a.DIV)?WAVE.id(a.DIV):a.DIV;if(null===w)throw"Select.ctor(DIV=null)";var q=this,y=WAVE.isFunction(c)?c:b.Choice,z=WAVE.isFunction(a.choiceBuilder)?a.choiceBuilder:null,A=null,R=WAVE.strDefault(a.formName),E=null,D=null,F=null,B=null,M=null,H=null,L=null,Q=null,V=null,fa=!1,K=WAVE.strAsBool(a.autocomlete,!0),ca=null,ka=WAVE.strAsBool(a.disable),T=b.SELECT_MODES.Multi===a.mode?b.SELECT_MODES.Multi:b.SELECT_MODES.Single,G=
null,ba={},Z=[];WAVE.isFunction(a.match);var sa=WAVE.isFunction(a.filter)?a.filter:n,wa=WAVE.isFunction(a.updateData)?a.updateData:p,xa=[9,16,17,18,19,20,27,37,38,39,40],ga="select_"+S++,ya=ga+"_container",za=ga+"_combobox",Aa=ga+"_display",Ba=ga+"_autocomplete",Ca=ga+"_dropdown",Da=ga+"_selection",Ea=ga+"_autoContainer",Fa=ga+"_choicesContainer";WAVE.extend(q,WAVE.EventManager);q.selected=function(){return ba};q.mode=function(){return T};q.value=function(a){if("undefined"===typeof a){a="";for(var c in ba)a+=
ba[c].key()+";";return a.slice(0,-1)}c=a.toString();if(null!==G){G.resetSelection();a=0;for(var e=Z.length;a<e;a++)ba[Z[a]].destroyView();Z=[];ba={};if(T===b.SELECT_MODES.Single)u(G,c);else for(c=c.split(";"),a=0,e=c.length;a<e;a++)u(G,c[a])}};q.data=function(a){if("undefined"===typeof a)return a;A=a;p(A)};q.updateData=function(a){wa(a)};q.filter=function(a){sa([G],"undefined"===typeof a?M.value:a)};q.hasChoice=function(){return null!==G};q.latchAllEvents=function(a){q.eventInvocationSuspendCount+=
a;null!==G&&G.latchAllEvents(a)};(function(){var b=a.data;if("undefined"!==typeof b&&null!==b)if(WAVE.isString(b))if(b=WAVE.tryParseJSON(b),b.ok)A=b.obj;else throw"Select.ctor(init.data invalid JSON)";else A=a.data})();(function(){E=d("div",ya,b.CLS_SELECT_CONTAINER+" "+(T===b.SELECT_MODES.Multi?b.CLS_SELECT_MODE_MULTI:b.CLS_SELECT_MODE_SINGLE));w.appendChild(E);L=d("input",Da);L.type="hidden";E.appendChild(L);WAVE.strEmpty(R)||(L.name=R);D=d("div",za,b.CLS_SELECT_COMBOBOX);E.appendChild(D);F=d("div",
Aa,b.CLS_SELECT_DISPLAY);D.appendChild(F);B=document.createElement("div");B.className=b.CLS_SELECT_ARROW;D.appendChild(B);WAVE.addEventHandler(B,"click",function(){g()});H=d("div",Ca,b.CLS_SELECT_DROPDOWN+" "+b.CLS_SELECT_DROPDOWN_HIDDEN);H.style.zIndex=5E5+e.length+1;E.appendChild(H);Q=d("div",Ea,b.CLS_SELECT_AUTO_CONTAINER);H.appendChild(Q);V=d("div",Fa,b.CLS_SELECT_CHOICES_CONTAINER);H.appendChild(V);K&&(M=d("input",Ba,b.CLS_SELECT_AUTOCOMPETE),M.placeholder="Start enter..",T===b.SELECT_MODES.Single?
Q.appendChild(M):D.appendChild(M),WAVE.addEventHandler(M,"keyup",function(a){-1<xa.indexOf(a.keyCode)||(f(),ca=setTimeout(function(){sa([G],M.value);fa||k()},800))}),WAVE.addEventHandler(M,"click",k));p(A)})();return q};b.CLS_SELECT_CHOICE="wvChoice";b.CLS_SELECT_CHOICE_DISABLED="wvChoiceDisabled";b.CLS_SELECT_CHOICE_SELECTED="wvSelected";b.CLS_SELECT_CHOICE_PARENT="wvChoiceParent";b.CLS_SELECT_CHOICE_PARENT_LABELED="wvChoiceParentLabeled";b.CLS_SELECT_CHOICE_LABEL="wvChoiceLabel";b.CLS_SELECT_CHOICE_VALUE_BOX=
"wvChoiceValueBox";b.CLS_SELECT_CHOICE_UNSELECT="wvChoiseUnselect";b.EVT_SELECT_CHOICE_SELECTED="wv-choice-selected";b.EVT_SELECT_CHOICE_UNSELECTED="wv-choice-unselected";b.EVT_SELECT_CHOICE_CLICK="wv-choise-choice-click";var Q=0;b.Choice=function(a){function c(){if(!y)return!1;var a={phase:b.EVT_PHASE_BEFORE,sender:r,abort:!1};r.eventInvoke(b.EVT_SELECT_CHOICE_UNSELECTED,a);if(!0===a.abort)return!1;y=!1;WAVE.removeClass(B,b.CLS_SELECT_CHOICE_SELECTED);a.result=!1;a.phase=b.EVT_PHASE_AFTER;delete a.abort;
r.eventInvoke(b.EVT_SELECT_CHOICE_UNSELECTED,a);return!0}function e(a,d){var f;if(0<u.length){for(var l=0,k=u.length;l<k;l++)f=WAVE.strEmpty(d)?f&&u[l].isSelected(a):f||u[l].trySetValue(d);return f}if(!0!==a&&WAVE.strEmpty(d))return c();y?f=!1:(f={phase:b.EVT_PHASE_BEFORE,sender:r,abort:!1},r.eventInvoke(b.EVT_SELECT_CHOICE_SELECTED,f),!0===f.abort?f=!1:((y="undefined"===typeof d?!0:E===d)&&WAVE.addClass(B,b.CLS_SELECT_CHOICE_SELECTED),f.result=y,f.phase=b.EVT_PHASE_AFTER,delete f.abort,r.eventInvoke(b.EVT_SELECT_CHOICE_SELECTED,
f),f=y));return f}function d(a,c){if(!0!==w){var e={phase:b.EVT_PHASE_BEFORE,sender:r,abort:!1};r.eventInvoke(b.EVT_SELECT_CHOICE_CLICK,e);!0!==e.abort&&(e.phase=b.EVT_PHASE_AFTER,delete e.abort,r.eventInvoke(b.EVT_SELECT_CHOICE_CLICK,e))}}function f(a,c){r.eventInvoke(b.EVT_SELECT_CHOICE_SELECTED,c)}function l(a,c){r.eventInvoke(b.EVT_SELECT_CHOICE_UNSELECTED,c)}function k(a,c){r.eventInvoke(b.EVT_SELECT_CHOICE_CLICK,c)}function g(a){a.eventBind(b.EVT_SELECT_CHOICE_SELECTED,f);a.eventBind(b.EVT_SELECT_CHOICE_UNSELECTED,
l);a.eventBind(b.EVT_SELECT_CHOICE_CLICK,k);u.push(a)}function h(a,c){var e=new b.Choice({data:a,DIV:c,builder:fa});g(e)}function m(a){V(a,r)}function n(){B=document.createElement("div");B.id=K;p.appendChild(B);WAVE.addEventHandler(B,"click",m);B.className=w?b.CLS_SELECT_CHOICE_DISABLED:b.CLS_SELECT_CHOICE;null!==L&&WAVE.addClass(B,L)}function v(a,b){n();D=B.innerHTML=b;E=a}function t(a,c){if("undefined"!==typeof a&&null!==a)if(WAVE.isString(a))v(a,a);else if(WAVE.isArray(a)){B=document.createElement("div");
B.id=K;B.className=b.CLS_SELECT_CHOICE_PARENT;p.appendChild(B);for(var e=0;e<a.length;e++)h(a[e],B)}else if(WAVE.isObject(a)){var d=Object.keys(a),f;if(1===d.length)e=d[0],d=a[e],WAVE.isString(d)||!WAVE.isMapOrArray(d)?v(e,d.toString()):(B=document.createElement("div"),B.id=K,B.className=b.CLS_SELECT_CHOICE_PARENT+" "+b.CLS_SELECT_CHOICE_PARENT_LABELED,p.appendChild(B),f=document.createElement("div"),f.className=b.CLS_SELECT_CHOICE_LABEL,f.innerHTML=e,B.appendChild(f),h(d,B));else for(e in B=document.createElement("div"),
B.id=K,B.className=b.CLS_SELECT_CHOICE_PARENT+" "+b.CLS_SELECT_CHOICE_PARENT_LABELED,p.appendChild(B),a)f=document.createElement("div"),f.className=b.CLS_SELECT_CHOICE_LABEL,f.innerHTML=e,B.appendChild(f),d=a[e],h(d,B)}else v(a.toString(),a.toString())}function x(){WAVE.removeEventHandler(M,"click",S);WAVE.removeElem(ca.unselect);WAVE.removeElem(ca.valueBox);S=null;z=!1}var r=this,p=a.DIV,u=[],w=WAVE.strAsBool(a.disable,!1),q=!0,y=!1,z=!1,A=a.data,E=WAVE.strEmpty(a.key)?null:a.key,D=WAVE.strEmpty(a.value)?
null:a.value,R=null,B=null,M=null,H=null,L=WAVE.strDefault(a.cls),S=null,V=WAVE.isFunction(a.onclick)?a.onclick:d,fa=a.builder,K="wv_choice_"+Q++,ca={unselect:K+"_unselect",valueBox:K+"_value"};WAVE.extend(r,WAVE.EventManager);r.disable=function(a){if("undefined"===typeof a||null===a)return null===w&&(w=0<u.length),w;w=WAVE.strAsBool(a,!0)};r.isSelected=function(a){return"undefined"===typeof a||null===a?y:e(a)};r.trySetValue=function(a){return"undefined"===typeof a||null===a?!1:e(null,a)};r.resetSelection=
function(){if(0===u.length)e(!1);else for(var a=0,b=u.length;a<b;a++)u[a].resetSelection()};r.visible=function(a){if("undefined"===typeof a||null===a)return q;if("undefined"===typeof a||null===a)a=!q;!0===a?q||(q=!0,B.style.display=null===H?"block":H):q&&(q=!1,null===H&&(H=WAVE.styleOf(B,"display")),B.style.display="none")};r.disable=function(){};r.id=function(){return K};r.key=function(){return E};r.value=function(){return D};r.children=function(){return u};r.elem=function(){return B};r.addChild=
function(a){g(a)};r.renderSelection=function(a,c){if(y&&!0!==z&&"undefined"!==typeof a&&null!==a){var e=WAVE.strHTMLTemplate("<div>@value@</div><div class='@clsUnselect@' id='@idUnselect@'>",{value:D,clsUnselect:b.CLS_SELECT_CHOICE_UNSELECT,idUnselect:ca.unselect});R=document.createElement("div");R.className=b.CLS_SELECT_CHOICE_VALUE_BOX;R.innerHTML=e;R.id=ca.valueBox;a.appendChild(R);M=WAVE.id(ca.unselect);S=function(){c(r)};z=!0;WAVE.addEventHandler(M,"click",S)}};r.destroyView=function(){x()};
r.destroy=function(){x();WAVE.removeEventHandler(B,"click",m);WAVE.removeElem(K);r.eventUnbind(b.EVT_SELECT_CHOICE_SELECTED,f);r.eventUnbind(b.EVT_SELECT_CHOICE_UNSELECTED,l);r.eventUnbind(b.EVT_SELECT_CHOICE_CLICK,k);for(var a=0;a<u.length;a++)u[a].destroy()};r.latchAllEvents=function(a){r.eventInvocationSuspendCount+=a;for(var b=0,c=u.length;b<c;b++)u[b].eventInvocationSuspendCount+=a};WAVE.isFunction(fa)?(n(),fa(r,A,B)):t(A,p);return r};return b}();
WAVE.RecordModel.GUI=function(){function q(b){var e=WAVE.genAutoincKey("__wv.rm.gui");return"_"+b.recView().ID()+"_"+e}function p(b){var e=b.field(),d=b.DIV(),f=WAVE.get(b,"@#$CHAIN_SELECTOR_GEN_ID$#@",null);null===f&&(f=q(b),b["@#$CHAIN_SELECTOR_GEN_ID$#@"]=f);var a="divCS_"+f,c="labelCont_"+f;b=WAVE.id(c);f=WAVE.id(a);if(null===b||null===f)d.innerHTML=WAVE.strHTMLTemplate("<div id='@idLabelDiv@'></div><div id='@idCSDiv@'></div>",{idLabelDiv:c,idCSDiv:a}),b=WAVE.id(c),f=WAVE.id(a);d="";a=e.validationError();
null!==a&&(d+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:r.CLS_ERROR,error:a}));d+=WAVE.strHTMLTemplate("<label class='@cls@'>@about@</label>",{about:e.about(),cls:(e.required()?r.CLS_REQ:"")+" "+(e.isGUIModified()?r.CLS_MOD:"")});b.innerHTML=d;d=e.lookupDict();d=WAVE.exists(d)?d.values:[];b=e.isNull()?"":e.value();(new WAVE.GUI.ChainSelector({DIV:f,outputFormFieldName:e.name(),classes:{divArrowCls:r.CLS_COMBO_ARROW,divComboWrapCls:r.CLS_COMBO_WRAP},path:b,disable:e.isEnabled()?!1:
!0,readonly:e.readonly(),values:d})).eventBind(WAVE.GUI.EVT_CHAIN_SELECTOR_UPDATED,function(a,b){e.value(b,!0)})}function y(b){var e=b.field(),d=b.DIV(),f="tb"+q(b),a=WAVE.strHTMLTemplate("<label for='@tbid@' class='@cls@'>@about@</label>",{tbid:f,about:e.about(),cls:(e.required()?r.CLS_REQ:"")+" "+(e.isGUIModified()?r.CLS_MOD:"")}),c=e.validationError();null!==c&&(a+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:r.CLS_ERROR,error:c}));c=e.kind();c=e.password()?"password":c===WAVE.RecordModel.KIND_SCREENNAME?
"text":c;a+=WAVE.strHTMLTemplate("<input id='@id@' type='@tp@' name='@name@' @disabled@ @maxlength@ @readonly@ value='@value@' placeholder='@placeholder@' @required@>",{id:f,tp:c,name:e.name(),disabled:e.isEnabled()?"":"disabled",maxlength:0>=e.size()?"":"maxlength="+e.size(),readonly:e.readonly()?"readonly":"",value:e.isNull()?"":e.displayValue(),placeholder:WAVE.strEmpty(e.placeholder())?"":e.placeholder(),required:e.required()?"required":""});d.innerHTML=a;WAVE.id(f).__fieldView=b;$("#"+f).change(function(){var a=
this.value;try{this.__fieldView.field().setGUIValue(a),n=null}catch(b){WAVE.GUI.toast("Wrong value for field '"+this.__fieldView.field().about()+"'. Please re-enter or undo","error");var c=this;if(n===c||null===n)n=c,setTimeout(function(){c.ERRORED||$(c).blur(function(){$(c).change()});c.focus();c.ERRORED=!0},50)}})}function z(b){var e=b.field(),d=b.DIV(),f="tb"+q(b),a=WAVE.strHTMLTemplate("<label for='@tbid@' class='@cls@'>@about@</label>",{tbid:f,about:e.about(),cls:(e.required()?r.CLS_REQ:"")+
" "+(e.isGUIModified()?r.CLS_MOD:"")}),c=e.validationError();null!==c&&(a+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:r.CLS_ERROR,error:c}));a+=WAVE.strHTMLTemplate("<textarea id='@id@' name='@name@' @disabled@ @maxlength@ @readonly@ placeholder='@placeholder@' @required@>@value@</textarea>",{id:f,name:e.name(),disabled:e.isEnabled()?"":"disabled",maxlength:0>=e.size()?"":"maxlength="+e.size(),readonly:e.readonly()?"readonly":"",value:e.isNull()?"":e.displayValue(),placeholder:WAVE.strEmpty(e.placeholder())?
"":e.placeholder(),required:e.required()?"required":""});d.innerHTML=a;WAVE.id(f).__fieldView=b;$("#"+f).change(function(){var a=this.value;try{this.__fieldView.field().setGUIValue(a),n=null}catch(b){WAVE.GUI.toast("Wrong value for field '"+this.__fieldView.field().about()+"'. Please re-enter or undo","error");var c=this;if(n===c||null===n)n=c,setTimeout(function(){c.ERRORED||$(c).blur(function(){$(c).change()});c.focus();c.ERRORED=!0},50)}})}function d(b){function e(a){var b=a.target.value,c=a.target.__fieldView.field();
c.readonly()?h(a.target.__fieldView):c.value(b,!0)}var d=b.field(),f=b.DIV(),a=d.lookupDict(),c=Object.keys(a),g;g="<fieldset>"+WAVE.strHTMLTemplate("<legend class='@cls@'>@about@</legend>",{about:d.about(),cls:(d.required()?r.CLS_REQ:"")+" "+(d.isGUIModified()?r.CLS_MOD:"")});var l=d.validationError();null!==l&&(g+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:r.CLS_ERROR,error:l}));var l=q(b),m;for(m in Object.keys(a)){var n=c[m],k=a[n],x="rbt"+l+"_"+m;g+=WAVE.strHTMLTemplate("<input id='@id@' type='radio' name='@name@' @disabled@ @readonly@ value='@value@' @required@ @checked@>",
{id:x,name:d.name(),disabled:d.isEnabled()?"":"disabled",readonly:d.readonly()?"readonly":"",value:n,required:d.required()?"required":"",checked:WAVE.strSame(n,d.value())?"checked":""});g+=WAVE.strHTMLTemplate("<label for='@rbtid@'>@about@</label>",{rbtid:x,about:k})}f.innerHTML=g+"</fieldset>";for(var p in Object.keys(a))d="rbt"+l+"_"+p,WAVE.id(d).__fieldView=b,$("#"+d).change(e)}function A(b){var e=b.field(),d=b.DIV(),f="chk"+q(b),a="",c=e.validationError();null!==c&&(a+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",
{ec:r.CLS_ERROR,error:c}));a+=WAVE.strHTMLTemplate("<input id='h_@id@' type='hidden'  value='@val@' name='@name@'>",{id:f,name:e.name(),val:WAVE.strAsBool(e.value())?"true":"false"});a+=WAVE.strHTMLTemplate("<label for='@chkid@' class='@cls@'>@about@</label>",{chkid:f,about:e.about(),cls:(e.required()?r.CLS_REQ:"")+" "+(e.isGUIModified()?r.CLS_MOD:"")});a+=WAVE.strHTMLTemplate("<input id='@id@' type='checkbox' @disabled@ @readonly@  @required@ @checked@>",{id:f,disabled:e.isEnabled()?"":"disabled",
readonly:e.readonly()?"readonly":"",required:e.required()?"required":"",checked:WAVE.strAsBool(e.value())?"checked":""});d.innerHTML=a;WAVE.id(f).__fieldView=b;$("#"+f).change(function(){var a=this.checked;$("#h_"+f).val(a?"true":"false");var b=this.__fieldView.field();b.readonly()?h(this.__fieldView):b.value(a,!0)})}function b(b){var e=b.field(),d=b.DIV(),f=WAVE.get(b,"@#$PS_EDITOR_GEN_ID$#@",null);null===f&&(f=q(b),b["@#$PS_EDITOR_GEN_ID$#@"]=f);var a="divps_"+f,c="labelCont_"+f,g=WAVE.id(c),f=
WAVE.id(a);if(null===g||null===f)d.innerHTML=WAVE.strHTMLTemplate("<div id='@idLabelDiv@'></div><div id='@idPSDiv@'></div>",{idLabelDiv:c,idPSDiv:a}),g=WAVE.id(c),f=WAVE.id(a);d="";a=e.validationError();null!==a&&(d+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:r.CLS_ERROR,error:a}));d+=WAVE.strHTMLTemplate("<label class='@cls@'>@about@</label>",{about:e.about(),cls:(e.required()?r.CLS_REQ:"")+" "+(e.isGUIModified()?r.CLS_MOD:"")});g.innerHTML=d;g=e.isNull()?"":e.value();d=WAVE.get(b,
"@#$PS_EDITOR$#@",null);null===d&&(d=new WAVE.GUI.PropSetEditor({DIV:f,outputFormFieldName:e.name(),langs:WAVE.LOCALIZER.allLanguageISOs(),content:g,disable:e.isEnabled()?!1:!0,readonly:e.readonly(),title:e.about()}),b["@#$PS_EDITOR$#@"]=d,d.eventBind(WAVE.GUI.EVT_PS_EDITOR_UPDATED,function(a,b){e.value(b,!0)}))}function x(b){var e=b.field(),d=b.DIV(),f="cbo"+q(b),a="lbl"+f,c=WAVE.strHTMLTemplate("<label for='@cbid@' class='@cls@'>@about@</label>",{cbid:f,about:e.about(),cls:(e.required()?r.CLS_REQ:
"")+" "+(e.isGUIModified()?r.CLS_MOD:"")}),g=e.validationError();null!==g&&(c+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:r.CLS_ERROR,error:g}));var c=c+WAVE.strHTMLTemplate("<div class='@comboWrapCls@'><select id='@id@' name='@name@' @disabled@ @readonly@ value='@value@' placeholder='@placeholder@' @required@>",{id:f,name:e.name(),disabled:e.isEnabled()?"":"disabled",readonly:e.readonly()?"readonly":"",value:e.value(),placeholder:WAVE.strEmpty(e.placeholder())?"":e.placeholder(),
required:e.required()?"required":"",comboWrapCls:r.CLS_COMBO_WRAP}),g=e.lookupDict(),l=Object.keys(g),c=c+"<option value=''></option>",h;for(h in Object.keys(g))c+=WAVE.strHTMLTemplate("<option value='@value@' @selected@>@descr@</option>",{value:l[h],selected:WAVE.strSame(l[h],e.value())?"selected":"",descr:g[l[h]]});c+=WAVE.strHTMLTemplate("</select><div id='@id@' class='@comboArrowCls@'></div></div>",{id:a,comboArrowCls:r.CLS_COMBO_ARROW});d.innerHTML=c;WAVE.id(f).__fieldView=b;$("#"+f).change(function(){var a=
e.value();e.readonly()?this.value!==a&&(this.value=a):(a=this.value,this.__fieldView.field().value(a,!0))});WAVE.id(a).onclick=function(){var a=WAVE.id(f);try{var b=new MouseEvent("mousedown");a.dispatchEvent(b)}catch(c){}return!1}}function e(b){if(!b.PUZZLE){var e=b.field(),d=b.DIV(),f=q(b),a="divPuzzle"+f,f="hiddenPuzzle"+f,c="",g=e.validationError();null!==g&&(c+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:r.CLS_ERROR,error:g}));c+=WAVE.strTemplate("<div id='@id@' class='@cls@'></div><input id='@idh@' type='hidden' name=@fname@ value=''></input>",
{id:a,idh:f,fname:e.name(),cls:r.CLS_PUZZLE});d.innerHTML=c;var d=e.value(),a=new WAVE.GUI.PuzzleKeypad({DIV:WAVE.id(a),Image:WAVE.strDefault(d.Image,""),Help:WAVE.strDefault(d.Help,""),Question:WAVE.strDefault(d.Question,"")}),l=WAVE.id(f);l.value=JSON.stringify(e.value());a.eventBind(WAVE.GUI.EVT_PUZZLE_KEYPAD_CHANGE,function(a){e.value().Answer=a.value();l.value=JSON.stringify(e.value())});b.PUZZLE=a}}function f(b,e){var d=b.record(),f=b.DIV(),a="";if(e){var d=d.allValidationErrors(),c;for(c in d){var g=
d[c];null!==g&&(a+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:r.CLS_ERROR,error:g}))}}else c=d.validationError(),null!==c&&(a+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:r.CLS_ERROR,error:c}));f.innerHTML=a}function h(h){var n=r.getControlType(h);WAVE.strSame(n,WAVE.RecordModel.CTL_TP_CHECK)?(m(h,n),A(h)):WAVE.strSame(n,WAVE.RecordModel.CTL_TP_CHAIN_SELECTOR)?(m(h,n),p(h)):WAVE.strSame(n,WAVE.RecordModel.CTL_TP_CHECK)?(m(h,n),A(h)):WAVE.strSame(n,WAVE.RecordModel.CTL_TP_RADIO)?
(m(h,n),d(h)):WAVE.strSame(n,WAVE.RecordModel.CTL_TP_NLS)?(m(h,n),b(h)):WAVE.strSame(n,WAVE.RecordModel.CTL_TP_COMBO)?(m(h,n),x(h)):WAVE.strSame(n,WAVE.RecordModel.CTL_TP_PUZZLE)?(m(h,n),e(h)):WAVE.strSame(n,WAVE.RecordModel.CTL_TP_TEXTAREA)||WAVE.strSame(n,WAVE.RecordModel.CTL_TP_SCRIPT)?(m(h,n),z(h)):WAVE.strSame(n,WAVE.RecordModel.CTL_TP_HIDDEN)?(m(h,n),h.DIV().innerHTML=WAVE.strHTMLTemplate("<input type='hidden' name='@fName@' value='@fValue@'>",{fName:h.field().name(),fValue:h.field().displayValue()})):
WAVE.strSame(n,WAVE.RecordModel.CTL_TP_ERROR_REC)?f(h,!1):WAVE.strSame(n,WAVE.RecordModel.CTL_TP_ERROR_SUMMARY)?f(h,!0):(m(h,n),y(h))}function m(b,e){if(null===b.field())throw"The control type '"+e+"' requires the field binding, but was bound to record";}var r={CLS_ERROR:"wvError",CLS_REQ:"wvRequired",CLS_MOD:"wvModified",CLS_PUZZLE:"wvPuzzle",CLS_COMBO_ARROW:"wvComboArrow",CLS_COMBO_WRAP:"wvComboWrap"},n=null;r.getControlType=function(b){return b.getOrInferControlType()};r.buildFieldViewAnew=function(b){h(b)};
r.eventNotifyFieldView=function(b,e,d,f){h(b)};return r}();WAVE.Chart={};
WAVE.Chart.SVG=function(){function q(b){return Math.log(b)/Math.LN10}var p={EVT_SERIES_POINT_MOUSEOVER:"EVT_SERIES_POINT_MOUSEOVER",EVT_SERIES_POINT_MOUSEOUT:"EVT_SERIES_POINT_MOUSEOUT",EVT_SERIES_POINT_CLICK:"EVT_SERIES_POINT_CLICK",EVT_SERIES_POINT_TITLE_MOUSEOVER:"EVT_SERIES_POINT_TITLE_MOUSEOVER",EVT_SERIES_POINT_TITLE_MOUSEOUT:"EVT_SERIES_POINT_TITLE_MOUSEOUT",EVT_SERIES_POINT_TITLE_CLICK:"EVT_SERIES_POINT_TITLE_CLICK"},y=WAVE.Geometry;p.DataType={NUMBER:0,DATE:1};p.ChartType={POINT:1,LINE:2,
SPLINE:4,LINE_SQUARE:8,SPLINE_SQUARE:16,BAR:32};p.SquareFillType={TOP:1,BOTTOM:2};p.PointType={NONE:0,CIRCLE:1,RECT:2,TRI:3};p.RectSide={LEFT:0,TOP:1,RIGHT:2,BOTTOM:3};p.RectCorner={LEFTTOP:0,RIGHTTOP:1,LEFTBOTTOM:2,RIGHTBOTTOM:3};p.AxisMarkType={AUTO:0,EXACT_BY_POINTS:1,CUSTOM:2};var z=WAVE.arrayWalkable([1,2,5,10,20,30,60,120,300,600,900,1200,1800,3600,7200,10800,14400,21600,28800,43200,86400,172800,259200,604800,2592E3,5184E3,7776E3,15552E3,31536E3,63072E3,94608E3,15768E4,31536E4,63072E4,15768E5]);
p.dvInfo=function(b,e,d,h,m){var r=b instanceof Date;this.isDate=function(){return r};var n=b;this.d0=function(a){"undefined"!==typeof a&&(n=a);return n};var p=e;this.d1=function(a){"undefined"!==typeof a&&(p=a);return p};var t=d;this.v0=function(a){"undefined"!==typeof a&&(t=a);return t};var w=h;this.v1=function(a){"undefined"!==typeof a&&(w=a);return w};var u=m;this.isLinear=function(a){"undefined"!==typeof a&&(u=a);return u};if(m){var a;r?(a=(e.getTime()-b.getTime())/(h-d),this.d2v=function(c){return Math.floor(d+
(c.getTime()-b.getTime())/a)},this.v2d=function(c){return new Date(Math.ceil(b.getTime()+(c-d)*a))}):(a=(e-b)/(h-d),this.d2v=function(c){return d+(c-b)/a},this.v2d=function(c){return b+(c-d)*a})}else{var c,g;r?(m=q(b.getTime()),e=q(e.getTime()),c=(h-d)/(e-m),g=d-c*m,this.d2v=function(a){return Math.floor(1>=a.getTime()?0:c*q(a.getTime())+g)},this.v2d=function(a){return new Date(Math.ceil(Math.pow(10,(a-g)/c)))}):(m=q(0>=b?1:b),e=q(0>=e?1:e),c=(h-d)/(e-m),g=d-c*m,this.d2v=function(a){return Math.floor(1>=
a?0:c*q(a)+g)},this.v2d=function(a){return Math.ceil(Math.pow(10,(a-g)/c))})}};p.dvInfo.prototype.toString=function(){return"(d0="+this.d0()+",d1="+this.d1()+") (v0="+this.v0()+",v1="+this.v1()+") isLinear="+this.isLinear()};p.Axis=function(b,e){var d=this;WAVE.extend(d,WAVE.EventManager);e=e||{};this.chart=function(){return b};var h=e.dataType||p.DataType.NUMBER;this.dataType=function(a){"undefined"!==typeof a&&a!==h&&(h=a,d.fireChanged());return h};var m=e.min||null;this.min=function(a){"undefined"!==
typeof a&&a!==m&&(m=a,d.fireChanged());return m};var r=e.max||null;this.max=function(a){"undefined"!==typeof a&&a!==r&&(r=a,d.fireChanged());return r};var n=e.minMargin||0;this.minMargin=function(a){"undefined"!==typeof a&&$.isNumeric(a)&&a!==n&&(n=a,d.fireChanged());return n};var v=e.maxMargin||0;this.maxMargin=function(a){"undefined"!==typeof a&&$.isNumeric(a)&&a!==v&&(v=a,d.fireChanged());return v};var t=!1!==e.isLinear;this.isLinear=function(a){"undefined"!==typeof a&&a!==t&&(t=a,d.fireChanged());
return t};var q=e.markType||p.AxisMarkType.AUTO;this.markType=function(a){"undefined"!==typeof a&&a!==q&&(q=a,d.fireChanged());return q};var u=5;this.tickLength=function(a){"undefined"!==typeof a&&a!==u&&(u=a,d.fireChanged());return u};var a=e.tickTextMargin||3;this.tickTextMargin=function(b){"undefined"!==typeof b&&b!==a&&(a=b,d.fireChanged());return a};var c;this.dvInfo=function(a){"undefined"!==typeof a&&(c=a);return c};var g;this.ticks=function(a){"undefined"!==typeof a&&(g=a);return g};this.fireChanged=
function(){d.eventInvoke("EVT_CHANGED")}};p.Axis.prototype.toSeconds=function(b){return b.valueOf()/1E3};p.Axis.prototype.fromSeconds=function(b){return new Date(1E3*b)};p.Axis.prototype.getVTimeTicks=function(b,e,d,h,m,r){d=this.toSeconds(d);var n=this.toSeconds(h)-d,p=e-b;h=n/p;var n=this.calcTimeTickLength(p,n,m,r),t=n.dThreshhold,n=n.vTickLength,t=(Math.floor(d/t)*t-d)/h,q=[],u=r+m/2;for(m=p-(r+m/2);t<=e;)t>=u&&t<=m&&q.push({vTick:b+t,dTick:this.fromSeconds(d+t*h)}),t+=n;return q};p.Axis.prototype.calcTimeTickLength=
function(b,e,d,h){var m=e/b,r=e/Math.floor(b/(d+2*h));b=z.wFirst(function(b){return r<b});return{vTickLength:b/m,dThreshhold:b}};p.Axis.prototype.getVLog10Ticks=function(b,e,d,h,m,r){var n=e-b;h=Math.ceil(Math.log(h-d)/Math.LN10);e=n/h;var p=[],t=r+m/2;m=n-(r+m/2);r=0;for(var n=b,q=1;r<=h;r++,n+=e,q*=10)n>=t&&n<=m&&p.push({vTick:b+n,dTick:d+q});return p};p.Axis.prototype.getVTicks=function(b,e,d,h,m,r){var n=[],p=h-d,t=e-b;h=p/t;var p=this.calcTicksLength(t,p,m,r),q=p.dTickLength,p=p.vTickLength,
q=(Math.ceil(d/q)*q-d)/h,u=r+m/2;for(m=t-(r+m/2);q<=e;)q>=u&&q<=m&&n.push({vTick:b+q,dTick:d+q*h}),q+=p;return n};p.Axis.prototype.calcTicksLength=function(b,e,d,h){var m=e/b,r=WAVE.arrayWalkable([1,2,3,5,10]);b=e/(Math.floor(b/(d+h))-1);e=Math.pow(10,Math.floor(Math.log(b)/Math.LN10));var n=b/e,r=r.wFirst(function(b){return n<b})*e;return{vTickLength:r/m,dTickLength:r}};p.Axis.prototype.labelValToStr=function(b){return this.dataType()===p.DataType.NUMBER?WAVE.siNum(b,2):WAVE.toUSDateTimeString(b)};
p.Axis.prototype.calcLabelRc=function(b,e,d){this.dataType()===p.DataType.NUMBER?(e=this.labelValToStr(e),d=this.labelValToStr(d),d=d.length>=e.length?d:e):d=this.labelValToStr(e);d=WAVE.SVG.createText(d,0,0,{class:"wvAxisLabel wvXAxisLabel",visibility:"hidden"});b.appendChild(d);e=d.getBBox();b.removeChild(d);return e};p.XZone=function(b){var e=this;WAVE.extend(e,WAVE.EventManager);this.chart=function(){return b};var d=!0;this.enabled=function(b){"undefined"!==typeof b&&b!==d&&(d=b,e.eventInvoke("EVT_CHANGED"));
return d}};p.XZone.prototype.getHeight=function(b){var e=this.chart().seriesListWalkable().wGroup(function(b){return b.xAxis()},function(b){return b.dataSet()}),d=WAVE.arrayWalkable(e.wSelect(function(e){return{axis:e.k,height:e.k.getHeight(b,e.v)}}).wToArray()).wGroup(function(b){return b.axis.isBottom()},function(b){return b.height}).wGroupAggregate(function(b,e,d){return(e||0)+d}),e={top:0,bottom:0};if(!this.enabled())return e;for(d=d.getWalker();d.moveNext();){var h=d.current();!0===h.k?e.bottom=
h.v:e.top=h.v}return e};p.XZone.prototype.draw=function(b,e){for(var d in e){var h=e[d],h=WAVE.SVG.createRect(h.left(),h.top(),h.width(),h.height(),{class:"wvSvgBkgr wvXZoneBackground"});b.appendChild(h)}d=this.chart().seriesListWalkable().wGroup(function(b){return b.xAxis()},function(b){return b.dataSet()}).getWalker();for(var h=e.top.bottom(),m=e.bottom.top();d.moveNext();){var r=d.current(),n=r.k.getHeight(b,r.v),p;!0===r.k.isBottom()?(p=new y.Rectangle(new y.Point(e.bottom.left(),m),new y.Point(e.bottom.right(),
m+n)),m+=n):(p=new y.Rectangle(new y.Point(e.top.left(),h-n),new y.Point(e.top.right(),h)),h-=n);r.k.draw(b,p,r.v)}};p.XAxis=function(b,e){p.Axis.call(this,b,e);var d=this;e=e||{};var h=e.verticalMargin||3;this.verticalMargin=function(b){"undefined"!==typeof b&&b!==h&&(h=b,d.fireChanged());return h};var m=!1!==e.isBottom;this.isBottom=function(b){"undefined"!==typeof b&&b!==m&&(m=b,d.fireChanged());return m}};p.XAxis.prototype=Object.create(p.Axis.prototype);p.XAxis.prototype.constructor=p.XAxis;
p.XAxis.prototype.d2v=function(b){return this.dvInfo().d2v(b)};p.XAxis.prototype.v2d=function(b){return this.dvInfo().v2d(b)};p.XAxis.prototype.draw=function(b,e,d){var h=this.getMinMax(d);this.dvInfo(new p.dvInfo(h.min,h.max,e.left(),e.right(),this.isLinear()));h=this.isBottom()?WAVE.SVG.createLine(e.left(),e.top(),e.right(),e.top(),{class:"wvAxisLine"}):WAVE.SVG.createLine(e.left(),e.bottom(),e.right(),e.bottom(),{class:"wvAxisLine"});b.appendChild(h);this.markAxis(b,e,d)};p.XAxis.prototype.getHeight=
function(b,e){this.minMax=this.getMinMax(e);var d;!this.minMax.min&&0!==this.minMax.min||!this.minMax.max&&0!==this.minMax.max?d=0:(d=this.calcLabelRc(b,this.minMax.min,this.minMax.max),d=Math.ceil(d.height));return this.tickLength()+this.verticalMargin()+this.tickTextMargin()+d};p.XAxis.prototype.getMinMax=function(b){var e=this.min()||b.wSelect(function(b){return b.getMinX()}).wWhere(function(b){return null!==b}).wMin();null===e&&(e=this.dataType()===p.DataType.DATE?new Date:0);e=this.dataType()===
p.DataType.DATE?new Date(e.getTime()-1E3*this.minMargin()):e-this.minMargin();b=this.max()||b.wSelect(function(b){return b.getMaxX()}).wMax();null===b&&(b=this.dataType()===p.DataType.DATE?new Date:0);b=this.dataType()===p.DataType.DATE?new Date(b.getTime()+1E3*this.maxMargin()):b+this.maxMargin();return this.minMax={min:e,max:b}};p.XAxis.prototype.markAxis=function(b,e,d){var h,m=this.getMinMax(d);if((this.minMax.min||0===this.minMax.min)&&(this.minMax.max||0===this.minMax.max)){var r=this.calcLabelRc(b,
m.min,m.max),n=r.width,r=r.height;if(this.markType()===p.AxisMarkType.AUTO)h=this.dataType()===p.DataType.DATE?this.getVTimeTicks(e.left(),e.right(),m.min,m.max,n,5):this.getVTicks(e.left(),e.right(),m.min,m.max,n,5);else if(this.markType()===p.AxisMarkType.EXACT_BY_POINTS){d=d[0];h=[];for(var v in d)m=d[v],h.push({vTick:this.d2v(m.x),dTick:m.x})}this.ticks(h);for(var q in h)v=h[q],d=this.isBottom()?WAVE.SVG.createLine(v.vTick,e.top(),v.vTick,e.top()+this.tickLength(),{class:"wvAxisTickLine"}):WAVE.SVG.createLine(v.vTick,
e.bottom(),v.vTick,e.bottom()-this.tickLength(),{class:"wvAxisTickLine"}),b.appendChild(d),d=this.labelValToStr(v.dTick),d=this.isBottom()?WAVE.SVG.createText(d,v.vTick,e.top()+this.tickTextMargin()+r,{class:"wvAxisLabel wvXAxisLabel"}):WAVE.SVG.createText(d,v.vTick,e.bottom()-this.tickTextMargin()-this.tickLength(),{class:"wvAxisLabel wvXAxisLabel"}),b.appendChild(d),m=d.getBBox(),d.setAttribute("x",v.vTick-m.width/2)}};p.YZone=function(b){var e=this;WAVE.extend(e,WAVE.EventManager);this.chart=function(){return b};
var d=!0;this.enabled=function(b){"undefined"!==typeof b&&b!==d&&(d=b,e.eventInvoke("EVT_CHANGED"));return d};this.getWidth=function(b){var m=e.chart().seriesListWalkable().wGroup(function(b){return b.yAxis()},function(b){return b.dataSet()}),r=WAVE.arrayWalkable(m.wSelect(function(e){return{axis:e.k,width:e.k.getWidth(b,e.v)}}).wToArray()).wGroup(function(b){return b.axis.isLeft()},function(b){return b.width}).wGroupAggregate(function(b,e,d){return(e||0)+d}),m={left:0,right:0};if(!d)return m;for(r=
r.getWalker();r.moveNext();){var n=r.current();!0===n.k?m.left=n.v:m.right=n.v}return m};this.draw=function(b,d){for(var f in d){var n=d[f],n=WAVE.SVG.createRect(n.left(),n.top(),n.width(),n.height(),{class:"wvSvgBkgr wvYZoneBackground"});b.appendChild(n)}f=e.chart().seriesListWalkable().wGroup(function(a){return a.yAxis()},function(a){return a.dataSet()}).getWalker();for(var n=d.left.right(),p=d.right.left();f.moveNext();){var q=f.current(),x=q.k.getWidth(b,q.v),u;!0===q.k.isLeft()?(u=new y.Rectangle(new y.Point(n-
x,d.left.top()),new y.Point(n,d.left.bottom())),n-=x):(u=new y.Rectangle(new y.Point(p,d.left.top()),new y.Point(p+x,d.left.bottom())),p+=x);q.k.draw(b,u,q.v)}}};p.YAxis=function(b,e){p.Axis.call(this,b,e);var d=this;e=e||{};var h=e.horizontalMargin||3;this.horizontalMargin=function(b){"undefined"!==typeof b&&b!==h&&(h=b,d.fireChanged());return h};var m=e.minWidth||0;this.minWidth=function(b){"undefined"!==typeof b&&b!==m&&(m=b,d.fireChanged());return m};var r=!1!==e.isLeft;this.isLeft=function(b){"undefined"!==
typeof b&&b!==r&&(r=b,d.fireChanged());return r}};p.YAxis.prototype=Object.create(p.Axis.prototype);p.YAxis.prototype.constructor=p.YAxis;p.YAxis.prototype.d2v=function(b){return this.dvInfo().v0()+this.dvInfo().v1()-this.dvInfo().d2v(b)};p.YAxis.prototype.v2d=function(b){return this.dvInfo().v2d(this.dvInfo().v0()+this.dvInfo().v1()-b)};p.YAxis.prototype.markAxis=function(b,e,d){var h;if(this.markType()===p.AxisMarkType.AUTO){h=this.getMinMax(d);var m=this.calcLabelRc(b,h.min,h.max).height;d=.2*
m;h=this.dataType()===p.DataType.DATE?this.getVTimeTicks(e.top(),e.bottom(),h.min,h.max,m,d):this.isLinear()?this.getVTicks(e.top(),e.bottom(),h.min,h.max,m,d):this.getVLog10Ticks(e.top(),e.bottom(),h.min,h.max,m,d)}else if(this.markType()===p.AxisMarkType.EXACT_BY_POINTS)for(m in d=d[0],d){var r=d[m];h.push({vTick:this.d2v(r.y),dTick:r.y})}this.ticks(h);m=0;d=[];for(var n in h){var q=h[n],r=e.top()+e.bottom()-q.vTick,t;t=this.isLeft()?WAVE.SVG.createLine(e.right()-this.tickLength(),r,e.right(),r,
{class:"wvAxisTickLine"}):WAVE.SVG.createLine(e.left(),r,e.left()+this.tickLength(),r,{class:"wvAxisTickLine"});b.appendChild(t);q=this.labelValToStr(q.dTick);q=this.isLeft()?WAVE.SVG.createText(q,e.right()-this.tickTextMargin()-this.tickLength(),r,{class:"wvAxisLabel wvYAxisLabel"}):WAVE.SVG.createText(q,e.left()+this.tickLength()+this.tickTextMargin(),r,{class:"wvAxisLabel wvYAxisLabel"});b.appendChild(q);t=q.getBBox();q.setAttribute("y",r+t.height/3);d.push(q);t.width>m&&(m=t.width)}if(!this.isLeft())for(var w in d)b=
d[w],e=parseFloat(b.getAttribute("x")),e+=m,b.setAttribute("x",e)};p.YAxis.prototype.draw=function(b,d,f){var h=this.getMinMax(f);this.dvInfo(new p.dvInfo(h.min,h.max,d.top(),d.bottom(),this.isLinear()));h=this.isLeft()?WAVE.SVG.createLine(d.right(),d.top(),d.right(),d.bottom(),{class:"wvAxisLine"}):WAVE.SVG.createLine(d.left(),d.top(),d.left(),d.bottom(),{class:"wvAxisLine"});b.appendChild(h);this.markAxis(b,d,f)};p.YAxis.prototype.getWidth=function(b,d){this.minMax=this.getMinMax(d);var f=this.calcLabelRc(b,
this.minMax.min,this.minMax.max),f=this.tickLength()+this.horizontalMargin()+Math.ceil(f.width);return Math.max(f,this.minWidth())};p.YAxis.prototype.getMinMax=function(b){var d=this.min()||b.wSelect(function(b){return b.getMinY()}).wWhere(function(b){return null!==b}).wMin(),d=this.dataType()===p.DataType.DATE?new Date(d.getTime()-1E3*this.minMargin()):d-this.minMargin();b=this.max()||b.wSelect(function(b){return b.getMaxY()}).wMax();b=this.dataType()===p.DataType.DATE?new Date(b.getTime()+1E3*this.maxMargin()):
b+this.maxMargin();return this.minMax={min:d,max:b}};p.LZone=function(b,d){function f(){h.eventInvoke("EVT_CHANGED")}d=d||{};var h=this;WAVE.extend(h,WAVE.EventManager);this.chart=function(){return b};var m=!1!==d.enabled;this.enabled=function(b){"undefined"!==typeof b&&b!==m&&(m=b,f());return m};var r=d.legendMargin||10;this.legendMargin=function(b){"undefined"!==typeof b&&b!==r&&(r=b,f());return r};var n=d.seriesMargin||3;this.seriesMargin=function(b){"undefined"!==typeof b&&b!==n&&(n=b,f());return n};
var q=d.prefixLength||10;this.prefixLength=function(b){"undefined"!==typeof b&&b!==q&&(q=b,f());return q};var t=d.rowSpace||3;this.rowSpace=function(b){"undefined"!==typeof b&&b!==t&&(t=b,f());return t};var w=d.corner||p.RectCorner.RIGHTTOP;this.corner=function(b){"undefined"!==typeof b&&b!==w&&(w=b,f());return w}};p.LZone.prototype.getSize=function(b){var d=this.chart().seriesListWalkable().wSelect(function(b){return b.title()||""}).wMax(function(b,d){return b.length>d.length}),f=WAVE.SVG.createText(d,
0,0,{class:"wvLegendName",visibility:"hidden"});b.appendChild(f);d=f.getBBox();b.removeChild(f);b=this.rowSpace()+this.prefixLength()+this.rowSpace()+d.width+this.rowSpace();d=this.chart().seriesListWalkable().wCount()*(2*this.seriesMargin()+d.height);return{w:b,h:d}};p.LZone.prototype.drawLegendPrefix=function(b,d,f){var h=(d.top()+d.bottom())/2;d=WAVE.SVG.createPath({d:"M"+d.left()+","+h+" L"+(d.left()+this.prefixLength())+","+h,class:f.lineClass()});b.appendChild(d)};p.LZone.prototype.draw=function(b,
d){if(this.enabled()){var f=this,h=this.chart().seriesListWalkable(),m=WAVE.SVG.createRect(d.left(),d.top(),d.width(),d.height(),{class:"wvLZoneBackground"});b.appendChild(m);var r=d.top()+this.seriesMargin();h.wEach(function(h){var m=WAVE.SVG.createGroup({class:h.class()});b.appendChild(m);var p=WAVE.SVG.createText(h.title(),d.left()+f.rowSpace()+f.prefixLength()+f.rowSpace(),r,{class:"wvLegendName"});m.appendChild(p);var q=p.getBBox();p.setAttribute("y",r+3*q.height/4);p=new y.Rectangle(new y.Point(d.left()+
f.rowSpace(),r),new y.Point(d.left()+f.rowSpace()+f.prefixLength(),r+q.height));f.drawLegendPrefix(m,p,h);r+=q.height+2*f.seriesMargin()})}};var d=0;p.SZone=function(b,d){function f(){h.eventInvoke("EVT_CHANGED")}var h=this;WAVE.extend(h,WAVE.EventManager);d=d||{};this.chart=function(){return b};var m=d.chartType||p.ChartType.LINE;this.chartType=function(a){"undefined"!==typeof a&&a!==m&&(m=a,f());return m};var r=d.squareFillType||p.SquareFillType.BOTTOM;this.squareFillType=function(a){"undefined"!==
typeof a&&a!==r&&(r=a,f());return r};var n=d.pointType||p.PointType.CIRCLE;this.pointType=function(a){"undefined"!==typeof a&&a!==n&&(n=a,f());return n};var q=d.lineClass||"wvSeriesLine";this.lineClass=function(a){"undefined"!==typeof a&&a!==q&&(q=a,f());return q};var t=d.lineSquareClass||"wvSeriesLineArea";this.lineSquareClass=function(a){"undefined"!==typeof a&&a!==t&&(t=a,f());return t};var w=d.pointClass||"wvSeriesPoint";this.pointClass=function(a){"undefined"!==typeof a&&a!==w&&(w=a,f());return w};
var u=d.pointSize||5;this.pointSize=function(a){"undefined"!==typeof a&&a!==u&&(u=a,f());return u};var a=d.barClass||"wvSeriesRect";this.barClass=function(b){"undefined"!==typeof b&&b!==a&&(a=b,f());return a};var c=d.barWidth||10;this.barWidth=function(a){"undefined"!==typeof a&&a!==c&&(c=a,f());return c};var g=d.barGroupMargin||5;this.barGroupMargin=function(a){"undefined"!==typeof a&&a!==g&&(g=a,f());return g};var l=d.barMargin||3;this.barMargin=function(a){"undefined"!==typeof a&&a!==g&&(l=a,f());
return l};var y=d.showPointTooltip||!1;this.showPointTooltip=function(a){"undefined"!==typeof a&&a!==y&&(y=a);return y};var z=d.pointTooltipFormat||"Series: @series@, title: @title@, v: [@vx@, @vy@], d: [@dx@, @dy@]";this.pointTooltipFormat=function(a){"undefined"!==typeof a&&a!==z&&(z=a);return z};var k=d.showPointTitle||!1;this.showPointTitle=function(a){"undefined"!==typeof a&&a!==k&&(k=a,f());return k};var A=d.pointTitleFormat||"@title@";this.pointTitleFormat=function(a){"undefined"!==typeof a&&
a!==A&&(A=a,f());return A};var V=d.pointTitleClass||"wvChartPointTitle";this.pointTitleClass=function(a){"undefined"!==typeof a&&a!==V&&(V=a,f());return V};var H=d.pointTitleAngle||0;this.pointTitleAngle=function(a){"undefined"!==typeof a&&a!==H&&(H=a,f());return H};var S=d.pointTitleMargin||5;this.pointTitleMargin=function(a){"undefined"!==typeof a&&a!==S&&(S=a,f());return S};var Q=!1!==d.showPointTitleLeg;this.showPointTitleLeg=function(a){"undefined"!==typeof a&&a!==Q&&(Q=a,f());return Q};this.showDefaultRuler=
function(a){var b=0<C.length;return"undefined"!==typeof a&&a!==b?(a?h.attachToRulerScope(""):h.detachFromRulerScope(""),C.length&&f(),a):b};var C=[];this.rulerScopes=function(){return WAVE.arrayShallowCopy(C)};this.attachToRulerScope=function(a){-1===C.indexOf(a)&&(C.push(a),f())};this.detachFromRulerScope=function(a){a=C.indexOf(a);-1!==a&&(C.splice(a,1),f())};var W=!1!==d.rulerCheckXContains;this.rulerCheckXContains=function(a){"undefined"!==typeof a&&a!==W&&(W=a,f());return W};var ha=!1!==d.rulerCheckYContains;
this.rulerCheckYContains=function(a){"undefined"!==typeof a&&a!==ha&&(ha=a,f());return ha};var J=null;this.lastArea=function(){return J};var ia=[],ta=WAVE.arrayWalkable(ia),da=[],ua=WAVE.arrayWalkable(da),aa=[],Y=WAVE.arrayWalkable(aa);this.addVTitle=function(a){ia.push(a)};this.addVPoint=function(a){da.push(a)};this.addVLine=function(a){aa.push(a)};this.getTitleRcPenalty=function(a,b){var c=a.square(),d=WAVE.Geometry.overlapAreaRect(b,a),c=c-d,d=ta.wWhere(function(b){return!(b.right()<a.left()||
b.left()>a.right()||b.bottom()<a.top()||b.top()>a.bottom())}).wSelect(function(b){return WAVE.Geometry.overlapAreaRect(a,b)}).wSum(),e=ua.wWhere(function(b){return!(b.right()<a.left()||b.left()>a.right()||b.bottom()<a.top()||b.top()>a.bottom())}).wSelect(function(b){return WAVE.Geometry.overlapAreaRect(a,b)}).wSum(),f=Y.wWhere(function(b){return!(b.x2<a.left()||b.x1>a.right())}).wSelect(function(b){return WAVE.Geometry.intersectionLengthRectLineXY(a.left(),a.top(),a.right(),a.bottom(),b.x1,b.y1,b.x2,
b.y2)}).wSum();return c+d+e+2*f};this.draw=function(a,b){J=b;ia.splice(0,ia.length);da.splice(0,da.length);aa.splice(0,aa.length);var c=WAVE.SVG.createRect(b.left(),b.top(),b.width(),b.height(),{class:"wvSvgBkgr wvSZoneBackground"});a.appendChild(c);var c="clip"+WAVE.genAutoincKey("__wv.chart.svg"),d=WAVE.SVG.createRect(b.left(),b.top(),b.width(),b.height()),d=WAVE.SVG.createClipPath(c,[d]),d=WAVE.SVG.createDefs([d]);a.appendChild(d);var e=WAVE.SVG.createGroup({style:"clip-path: url(#"+c+")"});a.appendChild(e);
var c=h.chart().seriesListWalkable(),d=c.wSelect(function(a){return a.xAxis()}).wDistinct(),f=c.wSelect(function(a){return a.yAxis()}).wDistinct();d.wEach(function(a){a=a.ticks();for(var c in a){var d=a[c],d=WAVE.SVG.createLine(d.vTick,b.top(),d.vTick,b.bottom(),{class:"wvGridLine wvGridXLine"});e.appendChild(d)}});f.wEach(function(a){a=a.ticks();for(var c in a){var d=a[c],d=b.top()+b.bottom()-d.vTick,d=WAVE.SVG.createLine(b.left(),d,b.right(),d,{class:"wvGridLine wvGridYLine"});e.appendChild(d)}});
c.wGroup(function(a){return a.chartType()},function(a){return a}).wEach(function(c){switch(c.k){case p.ChartType.BAR:var d=h.barWidth(),f=h.barGroupMargin(),k=h.barMargin(),g=c.v.wCount(),l=c.v.wFirst();if(l.barBase()===p.RectSide.BOTTOM){var m=c.v.wMin(function(a,b){return a.dataSet().getMinX()<a.dataSet().getMinX()});if("undefined"===typeof m)break;var n=c.v.wMax(function(a,b){return a.dataSet().getMaxX()>a.dataSet().getMaxX()});if("undefined"===typeof n)break;for(var m=m.dataSet().getMinX(),n=
n.dataSet().getMaxX(),r=l.xAxis().dvInfo(),l=r.d2v(m),n=r.d2v(n),g=Math.floor((n-l+f)/(g*(d+k)-k+f)),f=(n-l+f)/g,n=0;n<g;n++){var q=l+f*n,t=q;c.v.wEach(function(a){var c=r.v2d(q),c=a.getVY(c),c="M"+t+","+c+" h"+d+" V"+b.bottom()+" h-"+d+" Z",c=WAVE.SVG.createPath({d:c,class:a.lineSquareClass()});a=WAVE.SVG.createGroup({class:a.class()});e.appendChild(a);a.appendChild(c);t+=d+k})}}break;default:c.v.wEach(function(c){var d=WAVE.SVG.createGroup({class:c.class()});e.appendChild(d);c.drawAllButTitle(a,
d,b)})}});c.wWhere(function(a){return a.chartType()&p.ChartType.POINT}).wEach(function(c){var d=WAVE.SVG.createGroup({class:c.class()});e.appendChild(d);c.drawPointTitles(a,d,b)})}};var A=function(b,e){function f(){h.invokeEvent("EVT_CHANGED")}var h=this;WAVE.extend(h,WAVE.EventManager);e=e||{};this.chart=function(){return b};var m="undefined"!==typeof e.id?e.id:(++d).toString();this.id=function(){return m};var r=e.title||"";this.title=function(a){"undefined"!==typeof a&&a!==r&&(r=a,f());return r};
var n=e.class||"";this.class=function(a){"undefined"!==typeof a&&a!==n&&(n=a,f());return n};var q=e.lineClass;this.lineClass=function(a){"undefined"!==typeof a&&a!==q&&(q=a,f());return q||h.chart().sZone().lineClass()};var t=e.lineSquareClass;this.lineSquareClass=function(a){"undefined"!==typeof a&&a!==t&&(t=a,f());return t||h.chart().sZone().lineSquareClass()};var w=e.barClass;this.barClass=function(a){"undefined"!==typeof a&&a!==w&&(w=a,f());return w||h.chart().sZone().barClass()};var u=e.chartType;
this.chartType=function(a){"undefined"!==typeof a&&a!==u&&(u=a,f());return u||h.chart().sZone().chartType()};var a=e.squareFillType;this.squareFillType=function(b){"undefined"!==typeof b&&b!==a&&(a=b,f());return a||h.chart().sZone().squareFillType()};var c=e.pointType;this.pointType=function(a){"undefined"!==typeof a&&a!==c&&(c=a,f());return c||h.chart().sZone().pointType()};var g=e.pointClass||"wvSeriesPoint";this.pointClass=function(a){"undefined"!==typeof a&&a!==g&&(g=a,f());return g||h.chart().sZone().pointClass()};
var l=e.pointSize;this.pointSize=function(a){"undefined"!==typeof a&&a!==l&&(l=a,f());return l||h.chart().sZone().pointSize()};var y=p.RectSide.BOTTOM;this.barBase=function(a){"undefined"!==typeof a&&a!==y&&(y=a,f());return y||h.chart().sZone().barBase()};var z=new p.DataSet;z.eventBind("EVT_CHANGED",function(){h.eventInvoke("EVT_CHANGED")});this.dataSet=function(){return z};var k=e.xAxis;this.xAxis=function(a){"undefined"!==typeof a&&a!==k&&(k&&k.eventUnbind("EVT_CHANGED",f),k=a,k.eventBind("EVT_CHANGED",
f),f());return k||h.chart().xAxis()};var A=e.yAxis;this.yAxis=function(a){"undefined"!==typeof a&&a!==A&&(A&&A.eventUnbind("EVT_CHANGED",f),A=a,A.eventBind("EVT_CHANGED",f),f());return A||h.chart().yAxis()};var V=e.showPointTooltip;this.showPointTooltip=function(a){"undefined"!==typeof a&&a!==V&&(V=a);return V||h.chart().sZone().showPointTooltip()};var H=e.pointTooltipFormat;this.pointTooltipFormat=function(a){"undefined"!==typeof a&&a!==H&&(H=a);return H||h.chart().sZone().pointTooltipFormat()};
var S=e.showPointTitle;this.showPointTitle=function(a){"undefined"!==typeof a&&a!==S&&(S=a,f());return S||h.chart().sZone().showPointTitle()};var Q=e.pointTitleFormat;this.pointTitleFormat=function(a){"undefined"!==typeof a&&a!==Q&&(Q=a,f());return Q||h.chart().sZone().pointTitleFormat()};var C=e.pointTitleClass;this.pointTitleClass=function(a){"undefined"!==typeof a&&a!==C&&(C=a,f());return C||b.sZone().pointTitleClass()};var W=e.pointTitleAngle;this.pointTitleAngle=function(a){"undefined"!==typeof a&&
a!==W&&(W=a,f());return W||b.sZone().pointTitleAngle()};var ha=e.pointTitleMargin;this.pointTitleMargin=function(a){"undefined"!==typeof a&&a!==ha&&(ha=a,f());return ha||b.sZone().pointTitleMargin()};var J=!1!==e.showPointTitleLeg;this.showPointTitleLeg=function(a){"undefined"!==typeof a&&a!==J&&(J=a,f());return!1===J?!1:J||b.sZone().showPointTitleLeg()}};A.prototype.getDY=function(b){var d=this.dataSet().getPointByX(b);if(null!==d)return d.y;d=this.dataSet().getNearestNeighbours(b);return null===
d?null:null===d.left?d.right.y:null===d.right?d.left.y:(b-d.left.x)/(d.right.x-d.left.x)*(d.right.y-d.left.y)+d.left.y};A.prototype.getVY=function(b){b=this.getDY(b);return this.yAxis().d2v(b)};A.prototype.foreachPoint=function(b){var d=this,f=this.xAxis(),h=this.yAxis();d.dataSet().forEach(function(m){var r=Math.round(f.d2v(m.x)),n=Math.round(h.d2v(m.y));isNaN(r)||isNaN(n)||b(r,n,m.x,m.y,m.title,d)})};A.prototype.drawAllButTitle=function(b,d,f,h){var m=this,r,n;if(this.chartType()&p.ChartType.LINE||
this.chartType()&p.ChartType.LINE_SQUARE){r="";n=null;var q,t;m.foreachPoint(function(a,b,c,d,e,f){null===n?(n=a,c="M"):(c="L",m.chart().sZone().addVLine({x1:q,y1:t,x2:a,y2:b}));r+=c+a+","+b+" ";q=a;t=b});""!==r&&this.chartType()&p.ChartType.LINE_SQUARE&&(r=this.squareFillType()===p.SquareFillType.BOTTOM?r+("V"+f.bottom()+" H"+n+" Z"):r+("V"+f.top()+" H"+n+" Z"));h=WAVE.SVG.createPath({d:r,class:this.chartType()&p.ChartType.LINE_SQUARE?this.lineSquareClass():this.lineClass()});d.appendChild(h)}if(this.chartType()&
p.ChartType.SPLINE||this.chartType()&p.ChartType.SPLINE_SQUARE){r="";var w="M",u=0,a=[];n=null;m.foreachPoint(function(b,c,d,e,f,h){null===n&&(n=b);"M"===w?(r="M"+b+","+c+" ",w="C"):"C"===w?(a.unshift({x:b,y:c}),u++,3===u&&(b=a.pop(),c=a.pop(),d=a.pop(),r+="C"+b.x+","+b.y+" "+c.x+","+c.y+" "+d.x+","+d.y+" ",u=0,w="S")):"S"===w&&(a.unshift({x:b,y:c}),u++,2===u&&(c=a.pop(),d=a.pop(),r+="S"+c.x+","+c.y+" "+d.x+","+d.y+" ",u=0))});if("C"===w)if(1===u)h=a.pop(),r+="L"+h.x+","+h.y;else{if(2===u){h=a.pop();
var c=a.pop();r+="Q"+h.x+","+h.y+" "+c.x+","+c.y}}else"S"===w&&1===u&&(h=a.pop(),r+="T"+h.x+","+h.y);""!==r&&this.chartType()&p.ChartType.SPLINE_SQUARE&&(r+="V"+f.bottom()+" H"+n+" Z");h=WAVE.SVG.createPath({d:r,class:this.chartType()&p.ChartType.SPLINE_SQUARE?this.lineSquareClass():this.lineClass()});d.appendChild(h)}this.chartType()&p.ChartType.POINT&&m.foreachPoint(function(a,c,h,n,k,r){m.drawPoint(b,d,f,a,c,h,n,k,r)})};A.prototype.drawPointTitles=function(b,d,f){var h=this;this.chartType()&p.ChartType.POINT&&
this.foreachPoint(function(m,r,n,p,q,w){h.drawPointTitle(b,d,f,m,r,n,p,q)})};A.prototype.drawPoint=function(b,d,f,h,m,r,n,q){var t;switch(this.pointType()){case p.PointType.CIRCLE:t=this.drawPointCircle(h,m,r,n);break;case p.PointType.RECT:t=this.drawPointRect(h,m,r,n);break;case p.PointType.TRI:t=this.drawPointTriangle(h,m,r,n)}var w=this;t&&(t.addEventListener("mouseover",function(b){w.chart().onSeriesMouseOver({originalEvt:b,vx:h,vy:m,dx:r,dy:n,title:q,series:w})}),t.addEventListener("mouseout",
function(b){w.chart().onSeriesMouseOut({originalEvt:b,vx:h,vy:m,dx:r,dy:n,title:q,series:w})}),t.addEventListener("click",function(b){w.chart().onSeriesClick({originalEvt:b,vx:h,vy:m,dx:r,dy:n,title:q,series:w})}),d.appendChild(t))};A.prototype.drawPointTitle=function(b,d,f,h,m,r,n,p){if(this.showPointTitle()&&p){var q=WAVE.strTemplate(this.pointTitleFormat(),{vx:h,vy:m,dx:r,dy:n,title:p,series:this.title()}),w=WAVE.SVG.createGroup({class:this.pointTitleClass(),transform:"rotate("+this.pointTitleAngle()+
","+h+","+m+")"}),q=WAVE.SVG.createText(q,h,m);w.appendChild(q);b.appendChild(w);var u=w.getBBox();b.removeChild(w);var a=u.x,c=u.y,g=u.width,l=u.height,a=a-2,c=c-2,g=g+4,l=l+4,u=h-a;b=m-c;for(var y=m-(c+l/2),z=h+this.pointTitleMargin(),a=WAVE.Geometry.toRectWH(a+(z-a),c+y,g,l),c=this.chart().sZone(),g=Number.MAX_VALUE,l=0;l<2*Math.PI;l+=Math.PI/4){y=WAVE.Geometry.rotateRectAroundCircle(h,m,15,a.width(),a.height(),l);z=c.getTitleRcPenalty(y,f);if(0===z){a=y;break}z<g&&(g=z,a=y)}c.addVTitle(a);f=WAVE.SVG.createRect(a.left(),
a.top(),a.width(),a.height(),{rx:4,ry:4});q.setAttribute("x",a.left()+u);q.setAttribute("y",a.top()+b);var k=this;w.addEventListener("mouseover",function(a){k.chart().onSeriesPointTitleMouseOver({originalEvt:a,vx:h,vy:m,dx:r,dy:n,title:p,series:k})});w.addEventListener("mouseout",function(a){k.chart().onSeriesPointTitleMouseOut({originalEvt:a,vx:h,vy:m,dx:r,dy:n,title:p,series:k})});w.addEventListener("click",function(a){k.chart().onSeriesPointTitleClick({originalEvt:a,vx:h,vy:m,dx:r,dy:n,title:p,
series:k})});w.insertBefore(f,q);this.showPointTitleLeg()&&(q=(new WAVE.Geometry.Point(h,m)).toPolarPoint(a.centerPoint()).theta(),q=WAVE.Geometry.findRayFromRectangleCenterSideIntersection(a,q),q=WAVE.SVG.createLine(q.x(),q.y(),h,m),w.insertBefore(q,f));d.appendChild(w)}};A.prototype.calcTitlePos=function(b,d,f,h){var m=null,p=null,n,q,t=f.width*f.height;n=b+5;q=d-5-f.height;var w=WAVE.Geometry.overlapAreaWH(h.left(),h.top(),h.width(),h.height(),n,q,f.width,f.height);w!==t?(n=b-5-f.width,q=d-5-f.height,
w=WAVE.Geometry.overlapAreaWH(h.left(),h.top(),h.width(),h.height(),n,q,f.width,f.height),w!==t?(n=b+5,q=d+5,w=WAVE.Geometry.overlapAreaWH(h.left(),h.top(),h.width(),h.height(),n,q,f.width,f.height),w!==t?(n=b-5-f.width,q=d+5,w=WAVE.Geometry.overlapAreaWH(h.left(),h.top(),h.width(),h.height(),n,q,f.width,f.height),w===t&&(m=n,p=q)):(m=n,p=q)):(m=n,p=q)):(m=n,p=q);return new WAVE.Geometry.Point(m,p)};A.prototype.drawPointCircle=function(b,d,f,h){f=this.pointSize();h=WAVE.SVG.createCircle(b,d,f,{class:this.pointClass()});
this.chart().sZone().addVPoint(WAVE.Geometry.toRectWH(b-f,d-f,2*f,2*f));return h};A.prototype.drawPointRect=function(b,d,f,h){f=this.pointSize();h=WAVE.SVG.createRect(b-f,d-f,2*f,2*f,{class:this.pointClass()});this.chart().sZone().addVPoint(WAVE.Geometry.toRectWH(b-f,d-f,2*f,2*f));return h};A.prototype.drawPointTriangle=function(b,d,f,h){f=this.pointSize();h=WAVE.SVG.createPath({d:"M"+(b-f)+","+(d+f)+" H"+(b+f)+" L"+b+","+(d-f)+" Z",class:this.pointClass()});this.chart().sZone().addVPoint(WAVE.Geometry.toRectWH(b-
f,d-f,2*f,2*f));return h};A.prototype.toString=function(){return"Series "+this.title()};p.DataSet=function(){var b=this;WAVE.extend(b,WAVE.EventManager);var d=[],f=WAVE.arrayWalkable(d);this.feedWalkable=function(f,m){if(!m||m>b.MAX_POINTS_QTY)m=b.MAX_POINTS_QTY;b.removeAllPoints();for(var p=f.getWalker(),n=0;p.moveNext()&&n++<m;){var q=p.current();d.push({x:q.x,y:q.y,t:q.t})}b.eventInvoke("EVT_CHANGED")};this.addPoint=function(f,m,p){d.push({x:f,y:m,title:p});b.eventInvoke("EVT_CHANGED")};this.forEach=
function(b){f.wEach(b)};this.removeAllPoints=function(){0<d.length&&(d.splice(0,d.length),b.eventInvoke("EVT_CHANGED"))};this.removePointIf=function(f){var m;do{m=!1;for(var p=0;p<d.length;p++)if(f(d[p])){d.splice(p,1);m=!0;break}}while(m);b.eventInvoke("EVT_CHANGED")};this.removePointByX=function(b){for(var f=0;f<d.length;f++)if(d[f].x===b){d.splice(f,1);break}};this.length=function(){return d.length};this.getPoint=function(b){return d[b]};this.getPointByX=function(b){for(var f=0;f<d.length;f++){var p=
d[f];if(p.x===b)return p}};this.getMinX=function(){return f.wSelect(function(b){return b.x}).wMin()};this.getMaxX=function(){return f.wSelect(function(b){return b.x}).wMax()};this.getMinY=function(){return f.wSelect(function(b){return b.y}).wMin()};this.getMaxY=function(){return f.wSelect(function(b){return b.y}).wMax()};this.getNearestNeighbours=function(b){if(0===d.length)return null;var m=d[0],p=d[d.length-1];if(b<m.x)return{left:null,right:m};if(b>p.x)return{left:p,right:null};m=f.wFirstIdx(function(d){return b<
d.x});return{left:d[m-1],right:d[m]}}};p.DataSet.prototype.MAX_POINTS_QTY=44100;var b=0;p.Chart=function(d){function e(){l&&0===g&&(m.draw(),l=!1)}function f(){l=!0;e()}function h(a){for(var b=0;b<a.childNodes.length;){var c=a.childNodes[b];"defs"!==c.nodeName?a.removeChild(c):b++}}var m=this;WAVE.extend(m,WAVE.EventManager);var q=++b;this.id=function(){return q};var n=d;this.svgEl=function(){return n};$(window).resize(function(){m.draw()});this.svgEl=function(a){"undefined"!==typeof a&&a!==n&&(n=
a,m.draw());return n};var v=new p.XZone(this);v.eventBind("EVT_CHANGED",f);this.xZone=function(){return v};var t=new p.YZone(this);t.eventBind("EVT_CHANGED",f);this.yZone=function(){return t};var w=new p.SZone(this);w.eventBind("EVT_CHANGED",f);this.sZone=function(){return w};var u=new p.LZone(this);u.eventBind("EVT_CHANGED",f);this.lZone=function(){return u};var a=new p.XAxis(m);a.eventBind("EVT_CHANGED",f);this.xAxis=function(b){"undefined"!==typeof b&&b!==a&&(a=b,m.draw());return a};var c=new p.YAxis(m);
c.eventBind("EVT_CHANGED",f);this.yAxis=function(a){"undefined"!==typeof a&&a!==c&&(c=a,m.draw());return c};var g=0,l=!0;this.beginUpdate=function(){g++};this.endUpdate=function(){0<g&&g--;e()};this.beginUpdate();var z=[],L=WAVE.arrayWalkable(z);this.seriesListWalkable=function(){return L};this.getSeries=function(a){return L.wFirst(function(b){return b.id()===a})};this.addSeries=function(a){a=new A(m,a);a.eventBind("EVT_CHANGED",f);z.push(a);f();return a};this.removeSeries=function(a){var b=L.wFirstIdx(function(b){return b===
a});-1!==b&&(z.splice(b,1),a.eventUnbind("EVT_CHANGED",f),f())};this.clearSeries=function(){if(0!==z.length){for(var a in z)z[a].eventUnbind("EVT_CHANGED",f);z.splice(0,z.length);f()}};this.draw=function(){var a=n.getBoundingClientRect(),b=a.width,c=a.height,d;try{d=m.splitArea(n,b,c)}catch(e){console.error(e.message);return}h(n,!0);b=WAVE.SVG.createRect(0,0,b,c,{class:"wvSvgBkgr"});n.appendChild(b);m.xZone().draw(n,d.xZone);m.yZone().draw(n,d.yZone);m.sZone().draw(n,d.sZone);m.lZone().draw(n,d.lZone);
var f=WAVE.Geometry.toRectWH(d.sZone.left()+a.left,d.sZone.top()+a.top,d.sZone.width(),d.sZone.height());d=m.sZone().rulerScopes();if(0<d.length)for(var g in d)WAVE.GUI.rulerSet({element:n,scope:d[g],elementCfg:{getTxt:function(b){var c=m.xAxis(),d=m.yAxis();m.sZone().lastArea();if(f.contains(b.clientPoint)){var e=b.clientPoint.x()-a.left,g=b.clientPoint.y()-a.top,e=c.v2d(e),g=d.v2d(g);b.divHint.style.visibility="visible";return c.labelValToStr(e)+"; "+d.labelValToStr(g)}b.divHint.style.visibility=
"hidden"},getMasterInfo:function(b){var c=m.xAxis(),d=m.yAxis();m.sZone();var e=b.clientPoint.x()-a.left,g=b.clientPoint.y()-a.top,c=c.v2d(e),d=d.v2d(g),d={dataPoint:new WAVE.Geometry.Point(c,d)};d.isInParentRc=f.contains(b.clientPoint);return d},getSlaveInfo:function(b){var c=m.xAxis(),d=m.yAxis(),e=m.sZone(),g=b.masterRes.dataPoint.x();b=b.masterRes.dataPoint.y();c=c.d2v(g)+a.left;d=d.d2v(b)+a.top;d={clientPoint:new WAVE.Geometry.Point(c,d)};d.isInParentRc=(!e.rulerCheckXContains()||d.clientPoint.x()>=
f.left()&&d.clientPoint.x()<=f.right())&&(!e.rulerCheckYContains()||d.clientPoint.y()>=f.top()&&d.clientPoint.y()<=f.bottom());return d},parentRc:f}});else WAVE.GUI.rulerUnset({element:n})};this.splitArea=function(a,b,c){var d=m.xZone().getHeight(a),e=m.yZone().getWidth(a),f=new y.Point(0,0),g=new y.Point(Math.round(b),Math.round(c));d.top&&f.y(f.y()+d.top);d.bottom&&g.y(g.y()-d.bottom);e.left&&f.x(f.x()+e.left);e.right&&g.x(g.x()-e.right);var d={top:new y.Rectangle(new y.Point(f.x(),0),new y.Point(g.x(),
f.y())),bottom:new y.Rectangle(new y.Point(f.x(),g.y()),new y.Point(g.x(),c))},e={left:new y.Rectangle(new y.Point(0,f.y()),new y.Point(f.x(),g.y())),right:new y.Rectangle(new y.Point(g.x(),f.y()),new y.Point(b,g.y()))},h=new y.Rectangle(f,g);0<f.x()&&(h.corner1().x(h.left()+1),d.top.corner1().x(h.left()),d.bottom.corner1().x(h.left()));0<f.y()&&(h.corner1().y(h.top()+1),e.left.corner1().y(h.top()),e.right.corner1().y(h.top()));g.x()<b&&(h.corner2().x(h.right()-1),d.top.corner2().x(h.right()),d.bottom.corner2().x(h.right()));
g.y()<c&&(h.corner2().y(h.bottom()-1),e.left.corner2().y(h.bottom()),e.right.corner2().y(h.bottom()));a=m.lZone().getSize(a);var l,n;switch(m.lZone().corner()){case p.RectCorner.LEFTTOP:l=h.left()+m.lZone().legendMargin();n=h.top()+m.lZone().legendMargin();break;case p.RectCorner.RIGHTTOP:l=h.right()-m.lZone().legendMargin()-a.w;n=h.top()+m.lZone().legendMargin();break;case p.RectCorner.LEFTBOTTOM:l=h.left()+m.lZone().legendMargin();n=h.bottom()-a.h-m.lZone().legendMargin();break;case p.RectCorner.RIGHTBOTTOM:l=
h.right()-m.lZone().legendMargin()-a.w,n=h.bottom()-a.h-m.lZone().legendMargin()}l=new y.Rectangle(new y.Point(l,n),new y.Point(l+a.w,n+a.h));return{xZone:d,yZone:e,sZone:h,lZone:l}};this.endUpdate()};p.Chart.prototype.onSeriesMouseOver=function(b){this.eventInvoke(p.EVT_SERIES_POINT_MOUSEOVER,b)};p.Chart.prototype.onSeriesMouseOut=function(b){this.eventInvoke(p.EVT_SERIES_POINT_MOUSEOUT,b)};p.Chart.prototype.onSeriesClick=function(b){this.eventInvoke(p.EVT_SERIES_POINT_CLICK,b)};p.Chart.prototype.onSeriesPointTitleMouseOver=
function(b){this.eventInvoke(p.EVT_SERIES_POINT_TITLE_MOUSEOVER,b)};p.Chart.prototype.onSeriesPointTitleMouseOut=function(b){this.eventInvoke(p.EVT_SERIES_POINT_TITLE_MOUSEOUT,b)};p.Chart.prototype.onSeriesPointTitleClick=function(b){this.eventInvoke(p.EVT_SERIES_POINT_TITLE_CLICK,b)};return p}();WAVE.Pay.Providers.Braintree=function(){var q={TYPE:"braintree",clientToken:null,initialize:function(p){if(WAVE.strEmpty(p.publicKey))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Braintree.initialize()","init.publicKey");q.clientToken=p.publicKey},tokenize:function(p,y,z){if(WAVE.strEmpty(q.clientToken))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Braintree.tokenize()","WAVE.Pay.Providers.Braintree.clientToken");if(WAVE.strEmpty(y.cardNumber)||WAVE.strEmpty(y.cardExpMonth)||
WAVE.strEmpty(y.cardExpYear))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Braintree.tokenize()","paymentData.cardNumber, paymentData.cardExpMonth, paymentData.cardExpYear");var d={number:y.cardNumber,expirationMonth:y.cardExpMonth,expirationYear:y.cardExpYear};WAVE.strEmpty(y.cardCVC)||(d.cvv=y.cardCVC);WAVE.strEmpty(y.cardHolder)||(d.cardholderName=y.cardHolder);WAVE.strEmpty(y.cardAddressZip)||(d.billingAddress={postalCode:y.cardAddressZip});var A=q.clientToken;q.clientToken=null;
(new braintree.api.Client({clientToken:A})).tokenizeCard(d,function(b,d){var e={requestContext:{facade:p,paymentData:y},OK:!0,httpStatus:null,providerType:q.TYPE,providerName:p.providerName(),errorCode:0,errorType:0,errorMessage:"",errorParams:null,rawError:null,tokenString:null,card:{}};if(WAVE.strEmpty(b))e.tokenString=d;else{e.OK=!1;var f;f=WAVE.strEmpty(b)?WAVE.Pay.CardErrors.OK:WAVE.Pay.CardErrors.GENERAL_ERROR;e.errorCode=f;f=WAVE.strEmpty(b)?WAVE.Pay.ErrorTypes.OK:WAVE.Pay.ErrorTypes.GENERAL_ERROR;
e.errorType=f;e.errorMessage=b;e.errorParams={};e.rawError=b}z(e)})}};return q}();WAVE.Pay.Providers.Stripe=function(){function q(d){switch(d){case "200":return z.HTTPStatus.STATUS200;case "400":return z.HTTPStatus.STATUS400;case "401":return z.HTTPStatus.STATUS401;case "402":return z.HTTPStatus.STATUS402;case "404":return z.HTTPStatus.STATUS404;case "429":return z.HTTPStatus.STATUS429;case "500":return z.HTTPStatus.STATUS50X;case "502":return z.HTTPStatus.STATUS50X;case "503":return z.HTTPStatus.STATUS50X;case "504":return z.HTTPStatus.STATUS50X}return d}function p(d){switch(d){case "api_connection_error":return WAVE.Pay.ErrorTypes.API_CONNECTION_ERROR;
case "api_error":return WAVE.Pay.ErrorTypes.API_ERROR;case "authentication_error":return WAVE.Pay.ErrorTypes.AUTHENTICATION_ERROR;case "card_error":return WAVE.Pay.ErrorTypes.CARD_ERROR;case "invalid_request_error":return WAVE.Pay.ErrorTypes.INVALID_REQUEST_ERROR;case "rate_limit_error":return WAVE.Pay.ErrorTypes.RATE_LIMIT_ERROR}return WAVE.Pay.ErrorTypes.OK}function y(d){switch(d){case "invalid_number":return WAVE.Pay.CardErrors.INVALID_NUMBER;case "invalid_expiry_month":return WAVE.Pay.CardErrors.INVALID_EXPIRY_MONTH;
case "invalid_expiry_year":return WAVE.Pay.CardErrors.INVALID_EXPIRY_YEAR;case "invalid_cvc":return WAVE.Pay.CardErrors.INVALID_CVC;case "incorrect_number":return WAVE.Pay.CardErrors.INCORRECT_NUMBER;case "expired_card":return WAVE.Pay.CardErrors.EXPIRED_CARD;case "incorrect_cvc":return WAVE.Pay.CardErrors.INCORRECT_CVC;case "incorrect_zip":return WAVE.Pay.CardErrors.INCORRECT_ZIP;case "card_declined":return WAVE.Pay.CardErrors.CARD_DECLINED;case "missing":return WAVE.Pay.CardErrors.MISSING;case "processing_error":return WAVE.Pay.CardErrors.PROCESSING_ERROR}return WAVE.Pay.CardErrors.OK}
var z={TYPE:"stripe",HTTPStatus:{STATUS200:"OK\tEverything worked as expected",STATUS400:"Bad Request\tThe request was unacceptable, often due to missing a required parameter",STATUS401:"Unauthorized\tNo valid API key provided",STATUS402:"Request Failed\tThe parameters were valid but the request failed",STATUS404:"Not Found\tThe requested resource doesn't exist",STATUS429:"Too Many Requests\tToo many requests hit the API too quickly",STATUS50X:"500, 502, 503, 504 - Server Errors\tSomething went wrong on Stripe's end. (These are rare.)"},
initialize:function(d){if(WAVE.strEmpty(d.publicKey))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Stripe.initialize()","init.publicKey");Stripe.setPublishableKey(d.publicKey)},tokenize:function(d,A,b){if(WAVE.strEmpty(A.cardNumber)||WAVE.strEmpty(A.cardExpMonth)||WAVE.strEmpty(A.cardExpYear))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Stripe.tokenize()","paymentData.cardNumber, paymentData.cardExpMonth, paymentData.cardExpYear");var x={number:A.cardNumber.replace(/\s+|-/g,
""),exp_month:2===A.cardExpMonth.length?"0"+A.cardExpMonth:A.cardExpMonth,exp_year:A.cardExpYear};WAVE.strEmpty(A.cardCVC)||(x.cvc=A.cardCVC);WAVE.strEmpty(A.cardHolder)||(x.name=A.cardHolder);WAVE.strEmpty(A.cardAddressLine1)||(x.address_line1=A.cardAddressLine1);WAVE.strEmpty(A.cardAddressLine2)||(x.address_line2=A.cardAddressLine2);WAVE.strEmpty(A.cardAddressCity)||(x.address_city=A.cardAddressCity);WAVE.strEmpty(A.cardAddressState)||(x.address_state=A.cardAddressState);WAVE.strEmpty(A.cardAddressZip)||
(x.address_zip=A.cardAddressZip);WAVE.strEmpty(A.cardAddressCountry)||(x.address_country=A.cardAddressCountry);Stripe.card.createToken(x,function(e,f){var h={requestContext:{facade:d,paymentData:A},OK:200<=e&&300>e,httpStatus:e,httpStatusDescr:q(e),providerType:z.TYPE,providerName:d.providerName(),errorCode:0,errorType:0,errorMessage:"",errorParams:null,rawError:null,tokenString:null,card:{}};if(WAVE.strEmpty(f.error)){h.tokenString=f.id;var m=f.card;h.card={providerID:m.id,addressCity:m.address_city,
addressCountry:m.address_country,addressLine1:m.address_line1,addressLine2:m.address_line2,addressState:m.address_state,addressZip:m.address_zip,brand:m.brand,CVCcheck:m.cvc_check,expirationMonth:m.exp_month,expirationYear:m.exp_year,fundingType:m.funding,last4:m.last4,holder:m.name}}else h.OK=!1,h.errorCode=y(f.error.code),h.errorType=p(f.error.type),h.errorMessage=f.error.message,h.errorParams={0:f.error.param},h.rawError=f.error;b(h)})}};return z}();
