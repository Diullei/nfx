'use strict';var WAVE=function(){function r(a,b){m in a||(a[m]={});var f=a[m];b in f||(f[b]=[]);return f[b]}function p(a){g in a||(a[g]=[]);return a[g]}function y(){var a=d.id(n.DIV_SUMMARY);if(a){var b;b='<table style="width: 75%"><tr> <th>Area</th> <th>Total</th><th>Passed</th><th>Failed</th> </tr>';var f=0,k=0,J;for(J in t){var c=d.id(t[J]);c&&(b+=d.strHTMLTemplate("<tr @STL@> <td>@Area@</td> <td>@Total@</td><td>@Passed@</td><td>@Failed@</td> </tr>",{STL:0<c.STAT_FAILED_TESTS?"class="+n.CSS_CLASS_TABLEERROR:
"",Area:c.STAT_NAME,Total:c.STAT_TOTAL_TESTS,Passed:c.STAT_TOTAL_TESTS-c.STAT_FAILED_TESTS,Failed:c.STAT_FAILED_TESTS}),f+=c.STAT_TOTAL_TESTS,k+=c.STAT_FAILED_TESTS)}b+=d.strHTMLTemplate("<tr class=@CLS@> <td>TOTAL</td> <td>@Total@</td><td>@Passed@</td><td>@Failed@</td> </tr>",{CLS:n.CSS_CLASS_TABLETOTAL,Total:f,Passed:f-k,Failed:k});a.innerHTML=b+"</table>"}}function z(a,b,f,k,J,c,h,m){h=d.strDefault(h);m=d.strDefault(m);var e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");
e.open(a,b);WAVE.isFunction(c)&&(e.onerror=c);e.onreadystatechange=function(){4===e.readyState&&(200===e.status?WAVE.isFunction(k)&&k(e.responseText):WAVE.isFunction(J)&&J(e.responseText))};d.strEmpty(h)||e.setRequestHeader("Accept",h);d.strEmpty(m)||e.setRequestHeader("Content-Type",m);null!==f?e.send(f):e.send();return e}Date.now||(Date.now=function(){return(new Date).getTime()});var d={TUNDEFINED:"undefined",CONTENT_TYPE_JSON:"application/json",CONTENT_TYPE_MULTIPART:"multipart/form-data",falseness:function(){return!1},
falsefunc:function(){return!1},arrayDelete:function(a,b){for(var f in a)if(a[f]===b)return a.splice(f,1),!0;return!1},arrayShallowCopy:function(a){var b=[];if(a&&0<a.length)for(var f=0,k=a.length;f<k;f++)b.push(a[f]);return b},arrayClear:function(a){for(;0<a.length;)a.pop()},mergeArrays:function(a,b,f,k){if(!d.isArray(a)&&!d.isArray(b))return[];f=d.isFunction(f)?f:function(a,b){return a===b};k=d.isFunction(k)?k:function(a){return a};d.isArray(a)||(a=b);d.isArray(b)||(b=a);a=a.concat(b);for(b=0;b<
a.length;b++){for(var c=b+1;c<a.length;c++)f(a[b],a[c])&&a.splice(c--,1);a[b]=k(a[b])}return a}};d.inArray=Array.prototype.indexOf?function(a,b){return-1!==a.indexOf(b)}:function(a,b){for(var f=a.length;f--;)if(a[f]===b)return!0;return!1};d.isString=function(a){return"[object String]"===Object.prototype.toString.call(a)};d.isObject=function(a){return"undefined"===typeof a?!1:a===Object(a)&&!d.isArray(a)&&!d.isFunction(a)};d.isArray=function(a){return"undefined"===typeof a?!1:"[object Array]"===Object.prototype.toString.call(a)};
d.isFunction=function(a){return"function"===typeof a};d.isMapOrArray=function(a){return a===Object(a)&&!d.isFunction(a)};d.exists=function(a){return"undefined"!==typeof a&&null!==a};d.overrideFunction=function(a,b){return function(){this.baseFunction=a;return b.apply(this,arguments)}};d.each=function(a,b){if("undefined"===typeof a||null===a)return null;if(!d.isFunction(b))return a;for(var f in a)b(a[f],f,a);return a};d.extend=function(a,b,f){var k;if(f)for(k in b)b.hasOwnProperty(k)&&!a.hasOwnProperty(k)&&
(a[k]=b[k]);else for(k in b)b.hasOwnProperty(k)&&(a[k]=b[k]);return a};d.clone=function(a){return JSON.parse(JSON.stringify(a))};d.memberClone=function(a,b){var f;if(!d.isObject(a)){if(!d.isArray(a))return a;f=[];for(var k=a.length,c=0;c<k;c++)f.push(d.memberClone(a[c],b));return f}f={};for(k in a)f[b?k.toLowerCase():k]=d.memberClone(a[k],b);return f};d.isSame=function(a,b){if(2>arguments.length)return!1;if(null===a&&null===b)return!0;if(null===a||null===b||typeof a!==typeof b)return!1;if("function"===
typeof a.getTime)return a.getTime()===b.getTime();if(d.isMapOrArray(a)){if(a.length!==b.length||Object.keys(a).length!==Object.keys(b).length)return!1;for(var f in a)if(!d.isSame(a[f],b[f]))return!1;return!0}return a===b};d.propStrAsObject=function(a,b){if(null!==a&&!d.strEmpty(b)&&a.hasOwnProperty(b)){var f=a[b];if(null!==f&&"string"===typeof f)try{a[b]=JSON.parse(f)}catch(k){throw console.error("WV.propStrAsObject, error parsing property '"+b+"' string as JSON: "+f),k;}}};d.tryParseJSON=function(a,
b){if("undefined"!==typeof a&&null!==a){if(d.isMapOrArray(a))return{ok:!0,obj:a};try{return{ok:!0,obj:JSON.parse(a)}}catch(f){}}return{ok:!1,obj:"undefined"!==typeof b?b:{}}};d.checkKeysUnique=function(a){if(!d.isObject(a))return a;a=Object.keys(a);for(var b=0;b<a.length;++b)for(var f=b+1;f<a.length;++f)if(a[b].toLowerCase()===a[f].toLowerCase())return!0;return!1};d.empty=function(a){if("undefined"===typeof a||null===a)return!0;for(var b in a)return!1;return!0};d.has=function(a,b){return a?hasOwnProperty.call(a,
b):!1};d.get=function(a,b,f){return"undefined"!==typeof a&&null!==a&&"undefined"!==typeof b&&null!==b&&d.has(a,b)&&"undefined"!==typeof a[b]?a[b]:"undefined"===typeof f?null:f};d.tryParseInt=function(a,b){var f;f="undefined"===typeof a||null===a||0===a.length?NaN:Number(a);var k;b?(k=!isNaN(f)&&isFinite(f))&&(f=0>f?-Math.floor(-f):Math.floor(f)):k=d.isFunction(Number.isInteger)?Number.isInteger(f):!isNaN(f)&&isFinite(f)&&Math.floor(f)===f;return{ok:k,value:f}};d.intValid=function(a){return d.tryParseInt(a).ok};
d.intValidPositive=function(a){a=d.tryParseInt(a);return a.ok&&0<a.value};d.intValidPositiveOrZero=function(a){a=d.tryParseInt(a);return a.ok&&0<=a.value};d.formatMoney=function(a,b,f){d.tryParseInt(a,!0).ok||(a=0);b="undefined"===typeof b?".":b;f="undefined"===typeof f?",":f;var k=100*a,c=Math.round(k);a=1E-7>Math.abs(k-c)?c:0>a?-Math.floor(-k):Math.floor(k);a=(a/100).toFixed(2);"."!==b&&(a=a.replace(".",b));return a.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+f)};d.strEmpty=function(a){return!a||0===
a.length||/^\s*$/.test(a)};d.strAsBool=function(a,b){if("undefined"===typeof a||null===a)return"undefined"===typeof b?!1:b;a=a.toString();return d.strOneOf(a,["true","t","yes","1"])};d.strDefault=function(a,b){return"undefined"===typeof a||null===a?"undefined"===typeof b||null===b?"":b:a};d.strEmptyDefault=function(a,b){return d.strEmpty(a)?"undefined"===typeof b||null===b?"":b:a};d.nlsNameDefault=function(a,b){return d.strEmptyDefault("undefined"===typeof a||null===a?null:a.n,b)};d.nlsDescrDefault=
function(a,b){return d.strEmptyDefault("undefined"===typeof a||null===a?null:a.d,b)};d.nlsNameOrDescrDefault=function(a,b){var f=null;"undefined"!==typeof a&&null!==a&&(f=a.n,d.strEmpty(f)&&(f=a.d));return d.strEmptyDefault(f,b)};d.nlsDescrOrNameDefault=function(a,b){var f=null;"undefined"!==typeof a&&null!==a&&(f=a.d,d.strEmpty(f)&&(f=a.n));return d.strEmptyDefault(f,b)};d.strTrim=function(a){return a.replace(/^\s+|\s+$/g,"")};d.strLTrim=function(a){return a.replace(/^\s+/,"")};d.strRTrim=function(a){return a.replace(/\s+$/,
"")};d.strTrunc=function(a,b,f){if(!a||a.length<=b)return a;f=f||"...";return a.substr(0,b-f.length)+f};d.strCaps=function(a,b){if(d.strEmpty(a))return a;for(var f,k="",c=!1,e=0;e<a.length;e++)f=a[e]," "===f||"."===f?(c=!0,k+=f):(k=c||0===e?k+f.toUpperCase():k+(b?f.toLowerCase():f),c=!1);return k};d.joinPathSegs=function(){if(0===arguments.length)return"";for(var a="",b=!0,f=0;f<arguments.length;f++){var k=arguments[f];k&&(k=(b?WAVE.strLTrim(k):k.replace(/^[\/\\\s]+/,"")).replace(/[\/\\\s]+$/,""),
WAVE.strEmpty(k)||(b||(a+="/"),a+=k,b=!1))}return a};d.mapCurrencyISOToSymbol=function(a,b){a=d.strDefault(a,"");a=a.toUpperCase();switch(a){case "USD":return"$";case "RUB":return"\u20bd";case "EUR":return"\u20ac";case "GBP":return"\u00a3";default:return d.strDefault("?",b)}};d.markup=function(){function a(a){return"_"===a||"A"<=a&&"Z">=a||"a"<=a&&"z">=a}function b(a){a=a.substr(1).split(".");var b={},f;for(f in a)b[a[f]]=0;a=[];for(var h in b)a.push("wv-markup-"+h.toLowerCase());return a.join(" ")}
var f={" ":"&nbsp;","!":"&#33;","#":"&#35;",$:"&#36;","*":"&#42;","<":"&lt;","=":"&#61;",">":"&gt;","{":"&#123;","}":"&#125;"};return function(k){function c(a){for(var b;B>a&&"undefined"!==typeof(b=g.pop());)h+="</li></"+b+">",B--;0!==B&&(h+="</li><li>")}function e(a){h+="</dd>";a||(h+="</dl>")}for(var h="",d=0,m=[],n=[],B=0,v,G,g=[],x,q=0,H=k.length;q<H;q++){var l=k.charAt(q),u=k.charAt(q+1);switch(l){case "\r":"\n"===u&&q++;case "\n":l="\n";break;case "<":l="&lt;";break;case ">":l="&gt;";break;
case "&":if(";"!==k.charAt(q+2))break;var t=f[u];"undefined"!==typeof t&&(l=t);q+=2}switch(d){case 0:case 2:case 11:case 16:switch(l){case "\n":2===d?h+="</p>":(11===d&&c(0),16===d&&e(!1));d=0;break;case "{":2===d?h+=" ":(11===d&&c(0),16===d&&e(!1),h+="<p>");m.push(1);d=3;n.push(h);h=l;break;case "!":2===d?(d=1,h+=" "+l):(11===d&&c(0),16===d&&e(!1),d=7,n.push(h),h=l);break;case "#":case "*":2===d?(d=1,h+=" "+l):(16===d&&e(!1),v=l,d=9,n.push(h),h=l);break;case "$":2===d?(d=1,h+=" "+l):(16===d&&e(!0),
x=16===d,d=12,n.push(h),h=l);break;default:2===d?h+=" ":(11===d&&c(0),16===d&&e(!1),h+="<p>"),d=1,h+=l}break;case 1:switch(l){case "\n":d=2;break;case "{":m.push(d);d=3;n.push(h);h=l;break;default:h+=l}break;case 3:switch(l){case "\n":h+=" ";break;case "{":m.push(d);d=3;n.push(h);h=l;break;case "}":d=4;h=h.substr(1);break;default:h+=l}break;case 4:switch(l){case ".":if(a(u)){d=5;n.push(h);h=l;break}default:d=m.pop(),h=n.pop()+h,q--}break;case 5:h+=l;"."===u?d=6:"_"===u||"-"===u||"A"<=u&&"Z">=u||"a"<=
u&&"z">=u||"0"<=u&&"9">=u||(d=m.pop(),h='<span class="'+b(h)+'">'+n.pop()+"</span>",h=n.pop()+h);break;case 6:switch(l){case ".":if(a(u)){d=5;h+=l;break}default:d=m.pop(),h='<span class="'+b(h)+'">'+n.pop()+"</span>.",h=n.pop()+h}break;case 7:if("\n"===l){h=n.pop()+"<p>"+h;d=1;q--;break}if("!"===l&&6>h.length)h+=l;else switch(B=h.length,h=n.pop()+"<h"+B+">",d=8,l){case "{":m.push(d);d=3;n.push(h);h=l;break;default:h+=l}break;case 8:switch(l){case "\n":d=0;h+="</h"+B+">";B=0;break;case "{":m.push(d);
d=3;n.push(h);h="{";break;default:h+=l}break;case 9:if("\n"===l){h=n.pop()+"<p>"+h;d=1;q--;break}if(l===v)h+=l;else{d=10;u=h.length;h=n.pop();B===u&&v!==G&&c(0);if(B===u)h+="</li><li>";else if(B<u)for(;B<u;B++)switch(v){case "#":h+="<ol><li>";g.push("ol");break;case "*":h+="<ul><li>",g.push("ul")}else c(u);switch(l){case "{":m.push(d);d=3;n.push(h);h=l;break;default:h+=l}break}break;case 10:switch(l){case "\n":G=v;d=11;break;case "{":m.push(d);d=3;n.push(h);h="{";break;default:h+=l}break;case 12:if("\n"===
l||"="===l){h=n.pop()+(x?"</dl>":"")+"<p>"+h;d=1;q--;break}d=13;switch(l){case "{":m.push(d);d=3;n.push(h);h=l;break;default:h+=l}break;case 13:if("\n"===l){h=n.pop()+(x?"</dl>":"")+"<p>"+h;d=1;q--;break}switch(l){case "{":m.push(d);d=3;n.push(h);h=l;break;case "=":d=14;n.push(h);h=l;break;default:h+=l}break;case 14:if("\n"===l){h="<p>"+n.pop()+h;h=n.pop()+(x?"</dl>":"")+h;d=1;q--;break}h="<dt>"+n.pop().substr(1)+"</dt><dd>";h=(x?n.pop():n.pop()+"<dl>")+h;d=15;switch(l){case "{":m.push(d);d=3;n.push(h);
h=l;break;default:h+=l}break;case 15:switch(l){case "\n":d=16;break;case "{":m.push(d);d=3;n.push(h);h="{";break;default:h+=l}break;default:throw"WAVE.markup(state)";}}for(m.push(d);"undefined"!==typeof(d=m.pop());)switch(d){case 0:break;case 1:case 2:h+="</p>";break;case 14:h=n.pop()+h;case 12:case 13:x&&n.push(n.pop()+"</dl>");case 9:case 7:h="<p>"+h+"</p>";case 3:case 4:h=n.pop()+h;break;case 8:h+="</h"+B+">";break;case 10:c(0);break;case 15:case 16:e(!1);break;default:throw"WAVE.markup(last.state)";
}return h}}();var A="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ");d.siNum=function(a,b){"undefined"===typeof b&&(b=2);if(0===a)return a.toFixed(b);var f=a;0>a&&(f=-f);for(var k=0,d=f.toFixed(b)+A[k+8];1E3<=f;)f/=1E3,k++;for(;1>f;)f*=1E3,k--;d=Math.pow(10,b);for(f=Math.round(f*d)/d;1E3<=f;)f/=1E3,k++;for(;1>f;)f*=1E3,k--;0>a&&(f=-f);return d=f.toFixed(b)+A[k+8]};d.charIsAZLetterOrDigit=function(a){return null===a?!1:"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"0"<=a&&"9">=a};d.strStartsWith=function(a,b,
f){return f?a.slice(0,b.length)===b:a.slice(0,b.length).toLowerCase()===b.toLowerCase()};d.strEndsWith=function(a,b,f){return f?a.slice(-b.length)===b:a.slice(-b.length).toLowerCase()===b.toLowerCase()};d.strEnsureEnding=function(a,b){return a+(a.slice(-b.length)===b?"":b)};d.strContains=function(a,b,f){return f?-1<a.indexOf(b):-1<a.toLowerCase().indexOf(b.toLowerCase())};d.strSame=function(a,b){return"undefined"===typeof a||"undefined"===typeof b||null===a||null===b?!1:d.strTrim(a).toLowerCase()===
d.strTrim(b).toLowerCase()};d.strOneOf=function(a,b,f){if(null===a||null===b||!d.isArray(b))return!1;f||(f="|");a=f+d.strTrim(a).toLowerCase()+f;return 0<=(f+b.join(f)+f).toLowerCase().indexOf(a)};d.isParentOf=function(a,b){if(d.isFunction(a.contains))try{return a.contains(b)}catch(k){return!1}for(var f=b;;){f=f.parentNode;if(null===f)return!1;if(f===a)return!0}};d.styleOf=function(a,b){return"undefined"===typeof a||null===a||d.strEmpty(b)||!d.isFunction(window.getComputedStyle)?"":window.getComputedStyle(a,
null).getPropertyValue(b)};d.removeElem=function(a){a=d.id(a);return null!==a?(a.parentNode.removeChild(a),!0):!1};d.addClass=function(a,b){"undefined"===typeof a||null===a||d.strEmpty(b)||(d.removeClass(a,b),a.className+=" "+b)};d.removeClass=function(a,b){"undefined"===typeof a||null===a||d.strEmpty(b)||"undefined"===typeof a.className||(a.className=a.className.replace(new RegExp("(?:^|\\s)"+b+"(?!\\S)","g"),""))};d.fullHieght=function(a){if("undefined"!==typeof a&&null!==a)return a.clientHeight+
parseFloat(d.styleOf(a,"margin-top"))+parseFloat(d.styleOf(a,"margin-bottom"))+parseFloat(d.styleOf(a,"padding-top"))+parseFloat(d.styleOf(a,"padding-bottom"))+parseFloat(d.styleOf(a,"border-top-width"))+parseFloat(d.styleOf(a,"border-bottom-width"))};d.fullWidth=function(a){if("undefined"!==typeof a&&null!==a)return a.clientWidth+parseFloat(d.styleOf(a,"margin-left"))+parseFloat(d.styleOf(a,"margin-right"))+parseFloat(d.styleOf(a,"padding-left"))+parseFloat(d.styleOf(a,"padding-right"))+parseFloat(d.styleOf(a,
"border-left-width"))+parseFloat(d.styleOf(a,"border-right-width"))};d.addEventHandler=function(a,b,f,k){"undefined"!==typeof a&&null!==a&&(d.isFunction(a.addEventListener)?a.addEventListener(b,f,!0===k):d.isFunction(a.attachEvent)?a.attachEvent("on"+b,f):a["on"+b]=f)};d.removeEventHandler=function(a,b,f,k){"undefined"!==typeof a&&null!==a&&(d.isFunction(a.removeEventListener)?a.removeEventListener(b,f,!0===k):d.isFunction(a.detachEvent)?a.detachEvent("on"+b,f):a["on"+b]=null)};var e={"&":"&amp;",
"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};d.strEscapeHTML=function(a){return String(a).replace(/[&<>"'\/]/g,function(a){return e[a]})};d.strHTMLTemplate=function(a,b){return a.replace(/@([\-\.0-9a-zA-Z]+)@/g,function(a,k){return d.strEscapeHTML(b[k])})};d.strTemplate=function(a,b){return a.replace(/@([\-\.0-9a-zA-Z]+)@/g,function(a,k){return b[k]})};d.strHTMLTemplateFun=function(a,b){return a.replace(/@([\-\.0-9a-zA-Z]+)@/g,function(a,k){return d.strEscapeHTML(b(a,k))})};d.strTemplateFun=
function(a,b){return a.replace(/@([\-\.0-9a-zA-Z]+)@/g,b)};d.strIsEMail=function(a){if(d.strEmpty(a))return!1;var b=a.indexOf("@");if(1>b||b===a.length-1||0<=a.indexOf("@",b+1))return!1;var f=a.lastIndexOf(".");if(!(f>b+2&&f+2<=a.length))return!1;for(f=0;f<a.length;f++)if(b=a[f],"."!==b&&"@"!==b&&"-"!==b&&"_"!==b&&!d.isValidScreenNameLetterOrDigit(b))return!1;return!0};d.isValidScreenNameLetter=function(a){return"A"<=a&&"Z">=a||"a"<=a&&"z">=a||"\u0410"<=a&&"\u042f">=a||"\u0430"<=a&&"\u044f">=a||0<=
"\u0451\u0401\u00c0\u00c1\u00c2\u00c3\u00c4\u00c5\u00c6\u00c7\u00c8\u00c9\u00ca\u00cb\u00cc\u00cd\u00ce\u00cf\u00d0\u00d1\u00d2\u00d3\u00d4\u00d5\u00d6\u00d8\u00d9\u00da\u00db\u00dc\u00dd\u00de\u00df\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5\u00e6\u00e7\u00e8\u00e9\u00ea\u00eb\u00ec\u00ed\u00ee\u00ef\u00f0\u00f1\u00f2\u00f3\u00f4\u00f5\u00f6\u00f8\u00f9\u00fa\u00fb\u00fc\u00fd\u00fe\u00ff\u0100\u0101\u0102\u0103\u0104\u0105\u0106\u0107\u0108\u0109\u010a\u010b\u010c\u010d\u010e\u010f\u0110\u0111\u0112\u0113\u0114\u0115\u0116\u0117\u0118\u0119\u011a\u011b\u011c\u011d\u011e\u011f\u0120\u0121\u0122\u0123\u0124\u0125".indexOf(a)};
d.isValidScreenNameLetterOrDigit=function(a){return d.isValidScreenNameLetter(a)||"0"<=a&&"9">=a};d.isValidScreenNameSeparator=function(a){return"."===a||"-"===a||"_"===a};d.strIsScreenName=function(a){if(d.strEmpty(a))return!1;a=d.strTrim(a);if(0===a.length)return!1;for(var b=!1,f,k=0;k<a.length;k++)if(f=a[k],0===k){if(!d.isValidScreenNameLetter(f))return!1}else if(d.isValidScreenNameSeparator(f)){if(b)return!1;b=!0}else{if(!d.isValidScreenNameLetterOrDigit(f))return!1;b=!1}return!b};d.strNormalizeUSPhone=
function(a){if(d.strEmpty(a))return"";a=d.strTrim(a);if(0===a.length)return"";if(d.strStartsWith(a,"+",!0))return a;for(var b=!1,f=!1,k="",c="",m="",h,e=0;e<a.length;e++)if(h=a[e],b||"("!==h||0!==k.length)if(b&&")"===h)b=!1;else{b&&3===k.length&&(b=!1);if(0<c.length&&!f){if("x"===h||"X"===h||"."===h&&6<c.length){f=!0;continue}var n=a.substring(e).toUpperCase();if(d.strStartsWith(n,"EXT",!1)&&7<=c.length){f=!0;e+=2;continue}if(d.strStartsWith(n,"EXT.",!1)&&7<=c.length){f=!0;e+=3;continue}}d.charIsAZLetterOrDigit(h)&&
(b?k+=h:f?m+=h:c+=h)}else b=!0;for(;7>c.length;)c+="?";0===k.length&&(10<=c.length?(k=c.substring(0,3),c=c.substring(3)):k="???");7<c.length&&0===m.length&&(m=c.substring(7),c=c.substring(0,7));c=c.substring(0,3)+"-"+c.substring(3);0<m.length&&(m="x"+m);return"("+k+") "+c+m};d.LOCALIZER={eng:{},rus:{},deu:{},fra:{},esp:{},allLanguageISOs:function(){var a=[],b;for(b in d.LOCALIZER)d.has(d.LOCALIZER,b)&&3===b.length&&a.push(b);return a}};d.strLocalize=function(a,b,f,k){if(4>arguments.length||d.strEmpty(a)||
d.strEmpty(k))return k;d.strEmpty(b)&&(b="--ANY-SCHEMA--");d.strEmpty(f)&&(f="--ANY-FIELD--");var c=d.LOCALIZER;if(!c.hasOwnProperty(a))return k;c=c[a];if(c.hasOwnProperty(b))c=c[b];else{if(!c.hasOwnProperty("--ANY-SCHEMA--"))return k;c=c["--ANY-SCHEMA--"]}if(c.hasOwnProperty(f))c=c[f];else{if(!c.hasOwnProperty("--ANY-FIELD--"))return k;c=c["--ANY-FIELD--"]}return c.hasOwnProperty(k)?c[k]:k};d.DATE_TIME_FORMATS={LONG_DATE:"LongDate",SHORT_DATE:"ShortDate",LONG_DATE_TIME:"LongDateTime",SHORT_DATE_TIME:"ShortDateTime",
TRAN_DATE_TIME:"TranDateTime",SHORT_DAY_MONTH:"ShortDayMonth"};var u="January February March April May June July August September October November December".split(" ");d.dateTimeToString=function(a,b,f){function k(a){return("0"+a.toString()).slice(-2)}function c(a){return d.strLocalize(f,"date","",u[a])}function m(){return k(e.getMonth()+1)}function h(){return k(e.getDate())}if("undefined"===typeof a||null===a)return"";b=WAVE.strDefault(b,d.DATE_TIME_FORMATS.LONG_DATE);var e=WAVE.isString(a)?new Date(a):
a;switch(b){case d.DATE_TIME_FORMATS.LONG_DATE:return c(e.getMonth())+" "+h()+", "+e.getFullYear();case d.DATE_TIME_FORMATS.SHORT_DATE:return m()+"/"+h()+"/"+e.getFullYear();case d.DATE_TIME_FORMATS.LONG_DATE_TIME:return c(e.getMonth())+" "+h()+", "+e.getFullYear()+" "+k(e.getHours())+":"+k(e.getMinutes())+":"+k(e.getSeconds());case d.DATE_TIME_FORMATS.SHORT_DATE_TIME:return m()+"/"+h()+"/"+e.getFullYear()+" "+k(e.getHours())+":"+k(e.getMinutes());case d.DATE_TIME_FORMATS.TRAN_DATE_TIME:return m()+
"/"+h()+"/"+e.getFullYear()+" "+k(e.getHours())+":"+k(e.getMinutes())+":"+k(e.getSeconds());case d.DATE_TIME_FORMATS.SHORT_DAY_MONTH:return m()+"/"+h()}};d.toISODateTimeString=function(a){function b(a){return 10>a?"0"+a:a}return a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"Z"};d.toUSDateTimeString=function(a){function b(a){return 10>a?"0"+a:a}return b(a.getMonth()+1)+"/"+b(a.getDate())+"/"+b(a.getFullYear())+
" "+b(a.getHours())+":"+b(a.getMinutes())+":"+b(a.getSeconds())};d.toUSDateString=function(a){function b(a){return 10>a?"0"+a:a}return b(a.getMonth()+1)+"/"+b(a.getDate())+"/"+b(a.getFullYear())};d.toSeconds=function(a){var b=0,f=a.match(/(\d+)\s*d/),k=a.match(/(\d+)\s*h/),c=a.match(/(\d+)\s*m/);a=a.match(/(\d+)\s*s/);f&&(b+=86400*parseInt(f[1]));k&&(b+=3600*parseInt(k[1]));c&&(b+=60*parseInt(c[1]));a&&(b+=parseInt(a[1]));return b};d.genRndKey=function(a,b){var f="";d.intValidPositive(a)||(a=8);for(d.strEmpty(b)&&
(b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ");f.length<a;)f+=b.charAt(d.rnd(b.length));return f};var c={};d.genAutoincKey=function(a,b){var f=0;d.strEmpty(a)&&(a="Unspecified");d.intValidPositive(b)||(b=1);a in c&&(f=c[a]);var k=f;c[a]=f+b;return k};d.isScalar=function(a){return/boolean|number|string/.test(typeof a)};d.rnd=function(){var a=0,b=100;1===arguments.length?b=arguments[0]:2===arguments.length&&(a=arguments[0],b=arguments[1]);return a+Math.floor(Math.random()*(b-a+1))};d.id=function(a){return document.getElementById(a)};
d.getRadioGroupValue=function(a){a=document.getElementsByName(a);for(var b=0;b<a.length;b++)if(a[b].checked)return a[b].value};d.getCookie=function(a){return(a=document.cookie.match(new RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(a[1]):!1};d.setCookie=function(a,b){var f=a+"="+escape(b)+"; path=/";document.cookie=f};d.deleteCookie=function(a){d.setCookie(a,null,{expires:-1})};d.isObjectType=function(a){return d.strOneOf(a,["object","json","map",
"array"])};d.isIntType=function(a){return d.strOneOf(a,["int","integer"])};d.isRealType=function(a){return d.strOneOf(a,["float","real","double","money"])};d.isBoolType=function(a){return d.strOneOf(a,["bool","boolean","logical"])};d.isStringType=function(a){return d.strOneOf(a,"str string char[] char varchar text".split(" "))};d.isDateType=function(a){return d.strOneOf(a,["date","datetime","time","timestamp"])};d.isSimpleKeyStringMap=function(a){if(!d.exists(a)||!d.isObject(a))return!1;var b=Object.keys(a),
f;for(f in b){var k=a[b[f]];if("undefined"===typeof k||null!==k&&!d.isString(k))return!1}return!0};d.convertScalarType=function(a,b,f,k){function c(){if("undefined"!==typeof k&&null!==k)return k;null===b&&(b="<null>");throw"Can not convert '"+b+"' to type '"+f+"'";}if(d.strEmpty(f))return b;var e;if(d.isObjectType(f)){if(null===b)return a?null:{};if(d.isObject(b))return b;e=typeof b;if("boolean"===e)return b?{value:!0}:{value:!1};if(d.isFunction(b.getTime)||"number"===e)return{value:b};if("string"===
e)try{return JSON.parse(b)}catch(h){return{value:b}}}else if(d.isIntType(f)){if(null===b)return a?null:0;e=typeof b;if("boolean"===e)return b?1:0;if(d.isFunction(b.getTime))return b.getTime();if("number"===e||"object"===e)e="string",b=b.toString();if("string"===e){if(d.strEmpty(b))return a?null:0;a=d.tryParseInt(b,!0);if(a.ok)return a.value}}else{if(d.isStringType(f)){if(null===b)return a?null:"";e=typeof b;return"string"===e?b:"boolean"===e?b?"true":"false":d.isFunction(b.getTime)?d.toUSDateTimeString(b):
b.toString()}if(d.isRealType(f)){if(null===b)return a?null:0;e=typeof b;if("boolean"===e)return b?1:0;if(d.isFunction(b.getTime))return b.getTime();if("number"===e||"object"===e)e="string",b=b.toString();if("string"===e){if(d.strEmpty(b))return a?null:0;a=parseFloat(b);if(!isNaN(a))return a}}else{if(d.isBoolType(f))return b?!0:!1;if(d.isDateType(f)){if(null===b)return a?null:c();if("number"===typeof b)return new Date(Math.round(b));if(d.strEmpty(b)&&a)return null;a=Date.parse(b);if(!isNaN(a))return new Date(a)}}}return c()};
d.EventManager={ANY_EVENT:"*",eventBind:function(a,b){if(d.strEmpty(a)||!b)return!1;var f=r(this,a);if(d.inArray(f,b))return!1;f.push(b);return!0},eventUnbind:function(a,b){if(d.strEmpty(a)||!b)return!1;var f=r(this,a);return d.arrayDelete(f,b)},eventClear:function(a){if(d.strEmpty(a))return this[m]={},!0;a=r(this,a);d.arrayClear(a);return!0},eventInvocationSuspendCount:0,eventInvoke:function(a){if(d.strEmpty(a)||0!==this.eventInvocationSuspendCount)return!1;var b=Array.prototype.slice.call(arguments,
1);b.splice(0,0,this);var f=r(this,a),k;for(k in f)f[k].apply(this,b);b.splice(0,0,a);f=r(this,"*");for(k in f)f[k].apply(this,b);f=p(this);for(k in f){var c=f[k],e=c.eventNotify;WAVE.isFunction(e)&&e.apply(c,b)}return!0},eventSinkBind:function(a){if(null===a)return!1;var b=p(this);if(d.inArray(b,a))return!1;b.push(a);return!0},eventSinkUnbind:function(a){if(null===a)return!1;var b=p(this);return d.arrayDelete(b,a)},eventSinkClear:function(){this[g]=[]},eventSinks:function(){return p(this)}};var m=
"@!WAVE EVENT FUN LIST",g="@!WAVE EVENT SINK LIST",n={CSS_CLASS_AREA:"wvUTestArea",CSS_CLASS_TESTTITLE:"wvUTestTitle",CSS_CLASS_TESTNUMBER:"wvUTestNumber",CSS_CLASS_OK:"wvUTestOK",CSS_CLASS_ERROR:"wvUTestError",CSS_CLASS_TABLEERROR:"wvUTestTableError",CSS_CLASS_TABLETOTAL:"wvUTestTableTotal",DIV_SUMMARY:"div_wv_utest_summary",DIV_AREA_PREFIX:"div_wv_utest_area_",DIV_TEST_PREFIX:"div_wv_utest_test_"},l=[],t={},q=!1,x=0;n.run=function(a,b,f){q||(q=!0,setTimeout(y,1E3));d.strEmpty(a)&&(a="Unspecified");
var k=null;a in t?k=t[a]:(k=n.DIV_AREA_PREFIX+d.genAutoincKey("UtestingArea"),t[a]=k);var c=d.id(k);c||(c=document.createElement("div"),c.id=k,c.className=n.CSS_CLASS_AREA,document.body.appendChild(c),c.innerHTML="<h2>"+a+"</h2>",c.STAT_NAME=a,c.STAT_TOTAL_TESTS=0,c.STAT_FAILED_TESTS=0);a="";try{l=[],x++,c.STAT_TOTAL_TESTS+=1,f()}catch(e){c.STAT_FAILED_TESTS+=1,a=e}f=!d.strEmpty(a);var m=n.DIV_TEST_PREFIX+d.genAutoincKey("UtestingCase"),k=document.createElement("div");k.id=m;k.className=f?n.CSS_CLASS_ERROR:
n.CSS_CLASS_OK;b="<div class='"+n.CSS_CLASS_TESTTITLE+"'><span class='"+n.CSS_CLASS_TESTNUMBER+"'>"+x+"</span>&nbsp;"+b+"&nbsp;&nbsp;:&nbsp;&nbsp;"+(f?"FAILED":"PASSED")+"</div>";f&&(b+="&nbsp;&nbsp;Error: "+a);if(0<l.length){b+="<pre>";for(var h in l)b+=" "+l[h];b+="</pre>"}k.innerHTML=b;c.appendChild(k)};n.testingStarted=function(){return q};n.log=function(a){l.push("  &gt; "+a+"\n")};n.logi=function(a){l.push(a)};n.assertTrue=function(a,b){d.strEmpty(b)&&(b="Assertion not true");if(!a)throw b;
};n.assertFalse=function(a,b){d.strEmpty(b)&&(b="Assertion not false");if(a)throw b;};d.UTest=n;var w={iPhone:navigator.userAgent.match(/iPhone/i),iPod:navigator.userAgent.match(/iPod/i),iPad:navigator.userAgent.match(/iPad/i),Android:navigator.userAgent.match(/Android/i),IE:-1!==navigator.appName.indexOf("Microsoft"),IEMobile:navigator.userAgent.match(/IEMobile/i),WinPhone:/windows phone/i.test(navigator.userAgent),Chrome:!!window.chrome,Safari:navigator.userAgent.match(/Safari/i)&&!window.chrome,
FireFox:-1<navigator.userAgent.indexOf("Firefox"),BlackBerry:navigator.userAgent.match(/BlackBerry/i),WebOS:navigator.userAgent.match(/webOS/i),Opera:window.opera,OperaMini:navigator.userAgent.match(/Opera Mini/i),OperaMobi:navigator.userAgent.match(/Opera Mobi/i),Silk:/silk/i.test(navigator.userAgent)};w.iOS=w.iPhone||w.iPod||w.iPad;w.Mobile=w.iOS||w.Android||w.OperaMini||w.OperaMobi||w.BlackBerry||w.WebOS||w.IEMobile||w.WinPhone||w.Silk;w.WebKit=w.Chrome||w.Safari;d.Platform=w;var v={EARTH_RADIUS_KM:6371,
PI:3.14159265,PI2:6.28318531,MapDirection:{North:{Name:"North"},NorthEast:{Name:"NorthEast"},East:{Name:"East"},SouthEast:{Name:"SouthEast"},South:{Name:"South"},SouthWest:{Name:"SouthWest"},West:{Name:"West"},NorthWest:{Name:"NorthWest"}},distance:function(a,b,f,k){return Math.sqrt(Math.pow(a-f,2)+Math.pow(b-k,2))},distancePoints:function(a,b){return v.distance(a.x(),a.y(),b.x(),b.y())},radToDeg:function(a){return a/3.14159265*180},degToRad:function(a){return a/180*3.14159265},azimuthRad:function(a,
b,f,k){a=Math.atan2(k-b,f-a);0>a&&(a=6.28318531+a);return a},azimuthRadPoints:function(a,b){return v.azimuthRad(a.x(),a.y(),b.x(),b.y())},azimuthDeg:function(a,b,f,k){return v.azimuthRad(a,b,f,k)/6.28318531*360},azimuthDegPoints:function(a,b){return v.azimuthDeg(a.x(),a.y(),b.x(),b.y())},azimuthOfRadix:function(a,b,f,k,c){2>c&&(c=2);a=v.azimuthRad(a,b,f,k);a=v.wrapAngle(a,3.14159265/c);return Math.floor(a/6.28318531*c)},azimuthOfRadixPoints:function(a,b,f){return v.azimuthOfRadix(a.x(),a.y(),b.x(),
b.y(),f)},toRectXY:function(a,b,f,k){return new v.Rectangle(new v.Point(a,b),new v.Point(f,k))},toRectWH:function(a,b,f,k){return new v.Rectangle(new v.Point(a,b),new v.Point(a+f,b+k))},overlapAreaRect:function(a,b){var f=a.topLeft(),k=b.topLeft();return v.overlapAreaWH(f.x(),f.y(),a.width(),a.height(),k.x(),k.y(),b.width(),b.height())},overlapAreaWH:function(a,b,f,k,c,d,h,e){a=h>=f?a<=c?a+f-c:a+f>=c+h?c+h-a:f:c<=a?c+h-a:c+h>=a+f?a+f-c:h;b=e>=k?b<=d?b+k-d:b+k>=d+e?d+e-b:k:d<=b?d+e-b:d+e>=b+k?b+k-
d:e;0>a&&(a=0);0>b&&(b=0);return a*b},overlapAreaXY:function(a,b,f,k,c,d,h,e){return v.overlapAreaWH(a,b,f-a,k-b,c,d,h-c,e-d)},lineIntersectsRect:function(a,b,f,k,c,d,h,e){e=d-e;h-=c;c=-(e*c+h*d);d=e*a+h*b+c;var m=0===d?0:0<d?1:-1;d=e*a+h*k+c;if((0===d?0:0<d?1:-1)!==m)return!0;d=e*f+h*b+c;if((0===d?0:0<d?1:-1)!==m)return!0;d=e*f+h*k+c;return(0===d?0:0<d?1:-1)!==m?!0:!1},intersectionLengthRectLineXY:function(a,b,f,k,c,d,h,e){return v.lineIntersectsRect(a,b,f,k,c,d,h,e)?v.distance(c<a?a:c>f?f:c,d<b?
b:d>k?k:d,h<a?a:h>f?f:h,e<b?b:e>k?k:e):0},wrapAngle:function(a,b){b%=6.28318531;0>b&&(b=6.28318531+b);return(a+b)%6.28318531},mapDirectionToAngle:function(a){switch(a){case v.MapDirection.North:return 1.5707963275;case v.MapDirection.South:return 4.7123889825;case v.MapDirection.East:return 0;case v.MapDirection.West:return 3.141592655;case v.MapDirection.NorthEast:return.78539816375;case v.MapDirection.NorthWest:return 2.35619449125;case v.MapDirection.SouthEast:return 5.49778714625;case v.MapDirection.SouthWest:return.625*
6.28318531;default:return 0}},angleToMapDirection:function(a){a=v.wrapAngle(a,0);return 0<=a&&.392699081875>a?v.MapDirection.East:.392699081875<=a&&1.178097245625>a?v.MapDirection.NorthEast:1.178097245625<=a&&a<6.28318531*5/16?v.MapDirection.North:a>=6.28318531*5/16&&2.748893573125>a?v.MapDirection.NorthWest:2.748893573125<=a&&3.534291736875>a?v.MapDirection.West:3.534291736875<=a&&a<6.28318531*11/16?v.MapDirection.SouthWest:a>=6.28318531*11/16&&5.105088064375>a?v.MapDirection.South:5.105088064375<=
a&&a<6.28318531*15/16?v.MapDirection.SouthEast:v.MapDirection.East},perimeterViolationArea:function(a,b){var f=0,k=0;b.left()<a.left()?f=a.left()-b.left():b.right()>a.right()&&(f=b.right()-a.right());b.top()<a.top()?k=a.top()-b.top():b.bottom()>a.bottom()&&(k=b.bottom()-a.bottom());return f*b.height()+k*b.width()},findRayFromRectangleCenterSideIntersection:function(a,b){var f=new v.Point(a.left()+a.width()/2,a.top()+a.height()/2),k=a.width()>a.height()?a.width():a.height();100>k&&(k=100);var c=new v.PolarPoint(k,
b),k=c.toPoint(),d=0!==k.x()?k.y()/k.x():0,h=0,e=0,k=[],h=f.x()+(0!==d?(a.top()-f.y())/d:0),e=a.top();h>=a.left()&&h<=a.right()&&k.push(new v.Point(h,e));h=f.x()+(0!==d?(a.bottom()-f.y())/d:0);e=a.bottom();h>=a.left()&&h<=a.right()&&k.push(new v.Point(h,e));h=a.right();e=f.y()+d*(a.right()-f.x());e>=a.top()&&e<=a.bottom()&&k.push(new v.Point(h,e));h=a.left();e=f.y()+d*(a.left()-f.x());e>=a.top()&&e<=a.bottom()&&k.push(new v.Point(h,e));d=new v.Point(1E6,1E6);h=1E6;c=c.toPoint();c.offset(f.x(),f.y());
for(var m in k)f=k[m],e=v.distancePoints(f,c),e<h&&(d=f,h=e);return d},rotateRectAroundCircle:function(a,b,f,k,c,d){k/=2;c/=2;a+=Math.cos(d)*(k+f);b+=Math.sin(d)*(c+f);return new v.toRectXY(a-k,b-c,a+k,b+c)},getBBox:function(a){if(!a)return null;var b=a.length;if(0===b)return null;for(var f=Number.POSITIVE_INFINITY,k=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,h=0;h<b;h++){var e=a[h],m=e.x,e=e.y;m<f&&(f=m);m>k&&(k=m);e<c&&(c=e);e>d&&(d=e)}return v.toRectXY(f,c,k,
d)},Point:function(a,b){var f=a;this.x=function(a){"undefined"!==typeof a&&(f=a);return f};var k=b;this.y=function(a){"undefined"!==typeof a&&(k=a);return k};this.offset=function(a,b){f+=a;k+=b}}};v.Point.prototype.toPolarPoint=function(a){var b=v.distancePoints(a,this);a=Math.atan2(this.y()-a.y(),this.x()-a.x());0>a&&(a=6.28318531+a);return new v.PolarPoint(b,a)};v.Point.prototype.isEqual=function(a){return this.x()===a.x()&&this.y()===a.y()};v.Point.prototype.toString=function(){return"("+this.x().toString()+
" , "+this.y().toString()+")"};v.PolarPoint=function(a,b){function f(a){if(0>a||6.28318531<a)throw"Invalid polar coordinates angle";return a}var k=a;this.radius=function(a){"undefined"!==typeof a&&(k=a);return k};var c=f(b);this.theta=function(a){"undefined"!==typeof a&&(c=f(a));return c};this.toPoint=function(){return new v.Point(k*Math.cos(c),k*Math.sin(c))}};v.PolarPoint.prototype.isEqual=function(a){return this.radius()===a.radius()&&this.theta()===a.theta()};v.PolarPoint.prototype.toString=function(){return"("+
this.radius().toString()+" , "+v.radToDeg(this.theta()).toString()+"\u00b0)"};v.Rectangle=function(a,b){var f=this,k=a,c=b;this.corner1=function(a){"undefined"!==typeof a&&(k=a);return k};this.corner2=function(a){"undefined"!==typeof a&&(c=a);return c};this.topLeft=function(){var a=k.x(),b=c.x();b<a&&(a=b);var f=k.y(),b=c.y();b<f&&(f=b);return new v.Point(a,f)};this.bottomRight=function(){var a=k.x(),b=c.x();b>a&&(a=b);var f=k.y(),b=c.y();b>f&&(f=b);return new v.Point(a,f)};this.width=function(){return Math.abs(k.x()-
c.x())};this.height=function(){return Math.abs(k.y()-c.y())};this.left=function(){var a=k.x(),b=c.x();b<a&&(a=b);return a};this.right=function(){var a=k.x(),b=c.x();b>a&&(a=b);return a};this.top=function(){var a=k.y(),b=c.y();b<a&&(a=b);return a};this.bottom=function(){var a=k.y(),b=c.y();b>a&&(a=b);return a};this.centerPoint=function(){return new v.Point(f.left()+f.width()/2,f.top()+f.height()/2)};this.square=function(){return f.width()*f.height()};this.contains=function(a){var b=f.topLeft(),k=f.bottomRight(),
c=a.x();a=a.y();return c>=b.x()&&c<=k.x()&&a>=b.y()&&a<=k.y()}};v.Rectangle.prototype.isEqual=function(a){return this.left()===a.left()&&this.top()===a.top()&&this.width()===a.width()&&this.height()===a.height()};v.Rectangle.prototype.toString=function(){return"("+this.left().toString()+","+this.top().toString()+" ; "+this.width().toString()+"x"+this.height().toString()+")"};v.vectorizeBalloon=function(a,b,f){var k=[],c=new v.Point(a.left()+a.width()/2,a.top()+a.height()/2),d=b.toPolarPoint(c),e=
v.findRayFromRectangleCenterSideIntersection(a,v.wrapAngle(d.theta(),-f/2));f=v.findRayFromRectangleCenterSideIntersection(a,v.wrapAngle(d.theta(),+f/2));k.push(new v.Point(a.left(),a.top()));k.push(new v.Point(a.right(),a.top()));k.push(new v.Point(a.right(),a.bottom()));k.push(new v.Point(a.left(),a.bottom()));k.push(e);k.push(b);k.push(f);k.sort(function(a,b){var k=a.toPolarPoint(c),f=b.toPolarPoint(c);return k.theta()>f.theta()?-1:1});return k};d.Geometry=v;d.Walkable={wSelect:function(a){var b=
this,f={getWalker:function(){var k=b.getWalker(),f;return{reset:function(){k.reset()},moveNext:function(){if(!k.moveNext())return!1;f=a(k.current());return!0},current:function(){return f}}}};WAVE.extend(f,WAVE.Walkable);return f},wSelectMany:function(a){var b=this,f={getWalker:function(){var k=b.getWalker(),f,c;return{reset:function(){for(k.reset();k.moveNext();){var b=k.current();if(null!==b){f=(a?a(b):b).getWalker();break}}},moveNext:function(){if(f&&f.moveNext())return c=f.current(),!0;for(;k.moveNext();){var b=
k.current();if(null!==b&&(f=(a?a(b):b).getWalker(),f.moveNext()))return c=f.current(),!0}return!1},current:function(){return c}}}};WAVE.extend(f,WAVE.Walkable);return f},wWhere:function(a){var b=this,f={getWalker:function(){var f=b.getWalker();return{reset:function(){f.reset()},moveNext:function(){for(;f.moveNext();)if(a(f.current()))return!0;return!1},current:function(){return f.current()}}}};WAVE.extend(f,WAVE.Walkable);return f},wAt:function(a){for(var b=this.getWalker(),f=-1;b.moveNext();)if(f++,
f===a)return b.current();return null},wFirst:function(a){for(var b=this.getWalker();b.moveNext();)if(a){if(a(b.current()))return b.current()}else return b.current();return null},wFirstIdx:function(a){for(var b=this.getWalker(),f=-1;b.moveNext();)if(f++,a(b.current()))return f;return-1},wCount:function(a){for(var b=this.getWalker(),f=0;b.moveNext();)a?a(b.current())&&f++:f++;return f},wDistinct:function(a){var b=this,f={getWalker:function(){var f=b.getWalker();return new function(){function b(c){return a?
a(c,f.current()):c===f.current()}var c=[],d=WAVE.arrayWalkable(c);this.reset=function(){f.reset();c.splice(0,c.length)};this.moveNext=function(){for(;f.moveNext();)if(-1===d.wFirstIdx(b))return c.push(f.current()),!0;return!1};this.current=function(){return f.current()}}}};WAVE.extend(f,WAVE.Walkable);return f},wConcat:function(a){var b=this,f={getWalker:function(){var f=b.getWalker(),c=null;return{reset:function(){f.reset();c=null},moveNext:function(){if(null===c){if(f.moveNext())return!0;c=a.getWalker()}return c.moveNext()},
current:function(){return null===c?f.current():c.current()}}}};WAVE.extend(f,WAVE.Walkable);return f},wExcept:function(a,b){var f=this,k={getWalker:function(){function k(a){return b?b(c.current(),a):a===c.current()}var c=f.getWalker();return{reset:function(){c.reset()},moveNext:function(){for(;c.moveNext();)if(-1===a.wFirstIdx(k))return!0;return!1},current:function(){return c.current()}}}};WAVE.extend(k,WAVE.Walkable);return k},wGroup:function(a,b){var f=this,c={getWalker:function(){return new function(){var c=
f.wDistinct(function(b,f){return a(b)===a(f)}).getWalker();this.reset=function(){c.reset()};this.moveNext=function(){return c.moveNext()};this.current=function(){return{k:a(c.current()),v:f.wWhere(function(b){return a(b)===a(c.current())}).wSelect(function(a){return b(a)})}}}}};WAVE.extend(c,WAVE.Walkable);return c},wGroupIntoObject:function(){var a={};this.wEach(function(b){a[b.k]=b.v.wToArray()});return a},wGroupIntoArray:function(a,b){var f=[];this.wEach(function(a){f.push({k:a.k,v:a.v.wToArray()})});
return f},wGroupAggregate:function(a,b){var f=this,c={getWalker:function(){var b=f.getWalker();return{reset:function(){b.reset()},moveNext:function(){return b.moveNext()},current:function(){var f=b.current();return{k:f.k,v:f.v.wAggregate(function(b,c){return a(f.k,b,c)})}}}}};WAVE.extend(c,WAVE.Walkable);return c},wOrder:function(a){var b=this.wToArray();a||(a=function(a,b){return a<b?-1:a>b?1:0});b.sort(a);return WAVE.arrayWalkable(b)},wTake:function(a){var b=this,f={getWalker:function(){var f=b.getWalker();
return new function(){var b=0;this.reset=function(){f.reset();b=0};this.moveNext=function(){if(!(f.moveNext()&&b<a))return!1;b++;return!0};this.current=function(){return f.current()}}}};WAVE.extend(f,WAVE.Walkable);return f},wTakeWhile:function(a){var b=this,f={getWalker:function(){var f=b.getWalker();return{reset:function(){f.reset()},moveNext:function(){return f.moveNext()&&a(f.current())?!0:!1},current:function(){return f.current()}}}};WAVE.extend(f,WAVE.Walkable);return f},wSkip:function(a){var b=
this,f={getWalker:function(){var f=b.getWalker();return new function(){var b=-1;this.reset=function(){f.reset();b=-1};this.moveNext=function(){for(;f.moveNext();)if(b++,b>=a)return!0;return!1};this.current=function(){return f.current()}}}};WAVE.extend(f,WAVE.Walkable);return f},wAny:function(a){var b=this.getWalker();if(!a)return b.moveNext();for(;b.moveNext();)if(a(b.current()))return!0;return!1},wAll:function(a){var b=this.getWalker();if(!a)return!b.moveNext();for(;b.moveNext();)if(!a(b.current()))return!1;
return!0},wMin:function(a){a||(a=function(a,b){return a<b});var b=this.getWalker();if(!b.moveNext())return null;for(var f=b.current();b.moveNext();)a(b.current(),f)&&(f=b.current());return f},wMax:function(a){a||(a=function(a,b){return a>b});var b=this.getWalker();if(!b.moveNext())return null;for(var f=b.current();b.moveNext();)a(b.current(),f)&&(f=b.current());return f},wAggregate:function(a,b){var f=b;this.wEach(function(b){f=a(f,b)});return f},wSum:function(a){"undefined"===typeof a&&(a=0);return this.wAggregate(function(a,
f){return a+f},a)},wEqual:function(a,b){var f=this.getWalker(),c=a.getWalker();do{var d=f.moveNext(),e=c.moveNext();if(!d&&!e)return!0;if(d!==e)return!1;d=f.current();e=c.current();if(!b){if(d!==e)return!1}else if(!b(d,e))return!1}while(1)},wToArray:function(){for(var a=this.getWalker(),b=[];a.moveNext();)b.push(a.current());return b},wEach:function(a){for(var b=this.getWalker(),f=0;b.moveNext();)a(b.current(),f++);return this},wWMA:function(a){var b=this;"undefined"===typeof a&&(a=.5);var f={getWalker:function(){var f=
b.getWalker(),c=null,d={s:-1,a:0};return{reset:function(){c=null;d={s:-1,a:0};f.reset()},moveNext:function(){if(!f.moveNext())return!1;d.s=f.current().s;var b=f.current().a;d.a=0===d.s?b:(1-a)*b+a*c;c=d.a;return!0},current:function(){return d},samplingRate:function(){return f.samplingRate?f.samplingRate():2}}}};WAVE.extend(f,WAVE.Walkable);return f},wHarmonicFrequencyFilter:function(a,b){var f=this;"undefined"===typeof a&&(a=1);"undefined"===typeof b&&(b=1);1.0001>a&&(a=1.0001);1E-4>b&&(b=1E-4);var c=
{getWalker:function(){var c=f.getWalker(),k=0,d={s:-1,a:0},e=0,m=0;return{reset:function(){m=e=k=0;d={s:-1,a:0};c.reset()},moveNext:function(){if(!c.moveNext())return!1;d.s=c.current().s;var f=c.current().a,B=f-m;m=f;e+=(B-b*k)/a;e*=.98;d.a=k+e;k=d.a;return!0},current:function(){return d},samplingRate:function(){return c.samplingRate?c.samplingRate():2}}}};WAVE.extend(c,WAVE.Walkable);return c},wConstLinearSampling:function(a){var b=this,f={getWalker:function(){a=a||1;var f=b.getWalker(),c=!1,d=null,
e=a/2,m=0,n,l,B,v=[],G={};return new function(){this.reset=function(){v.splice(0,v.length);m=0;c=!1;d=null;f.reset()};this.moveNext=function(){function b(a,f){for(var c=0;c<v.length;c++){var k=v[c].s;if(k>a&&k<=f)return!0}return!1}function g(){if(f.moveNext())return d=f.current().s,!0;c=!0;return!1}function x(a,b){for(var f=0,c=0,k=0;k<v.length;k++){var d=v[k];d.s>a&&d.s<=b&&(f+=d.a,c++)}return f/c}function q(a){for(;g();)if(f.current().s>=a){v.push(f.current());break}else v.push(f.current())}if(!m){if(!g())return!1;
v.push(f.current());n=f.current().s;l=n-e;B=n+e;q(B);G.s=m++;var u=x(-Number.MAX_VALUE,B);G.a=u;return!0}n+=a;l=n-e;B=n+e;if(c&&d<l)return!1;G.s=m++;(function(a,b){for(;1<v.length&&v[0].s<a&&v[1].s<b;)v.shift()})(l,B);if(b(l,B))return G.a=x(l,B),!0;q(B);if(b(l,B))return G.a=x(l,B),!0;var u=v[0],t=v[1],t=(t.a-u.a)/(t.s-u.s);G.a=t*n+(u.a-t*u.s);return!0};this.current=function(){return G}}}};WAVE.extend(f,WAVE.Walkable);return f},wSineGen:function(a){var b=this,f={getWalker:function(){var f=b.getWalker();
a=a||{};var c=a.f||1,d="undefined"===typeof a.a?1:a.a,e=a.d||0,m=a.r||(f.samplingRate?f.samplingRate():2),n=a.p||0;2>m&&(m=2);var l=6.28318531/m*c,B=0,g=n,G={},f=b.getWalker();return new function(){this.reset=function(){B=0;g=n;f.reset()};this.moveNext=function(){if(!f.moveNext())return!1;G.s=B++;G.a=d*Math.sin(g)+e+f.current().a;g=v.wrapAngle(g,l);return!0};this.current=function(){return G};this.samplingRate=function(){return m}}}};WAVE.extend(f,WAVE.Walkable);return f},wSawGen:function(a){var b=
this,f={getWalker:function(){var f=b.getWalker();a=a||{};var c=a.f||1,d="undefined"===typeof a.a?1:a.a,e=a.d||0,m=a.r||(f.samplingRate?f.samplingRate():2),n=a.p||0,l=a.s||.9;2>m&&(m=2);var B=1/3.14159265/l,g=1/3.14159265/(l-1),G=1-2*l/(l-1),x=6.28318531/m*c,q=0,u=n,H={},f=b.getWalker();return new function(){this.reset=function(){q=0;u=n;f.reset()};this.moveNext=function(){if(!f.moveNext())return!1;H.s=q++;H.a=d*(u<6.28318531*l?B*u+-1:g*u+G)+e+f.current().a;u=v.wrapAngle(u,x);return!0};this.current=
function(){return H};this.samplingRate=function(){return m}}}};WAVE.extend(f,WAVE.Walkable);return f},wSquareGen:function(a){var b=this,f={getWalker:function(){var f=b.getWalker();a=a||{};var c=a.f||1,d="undefined"===typeof a.a?1:a.a,e=a.d||0,m=a.r||(f.samplingRate?f.samplingRate():2),n=a.p||0,l=a.s||.9;2>m&&(m=2);var B=-2/3.14159265/(1-l),g=1-3.14159265*B*l,G=2/3.14159265/(1-l),x=-1-3.14159265*G*(1+l),q=6.28318531/m*c,u=0,H=n,t={},f=b.getWalker();return new function(){this.reset=function(){u=0;H=
n;f.reset()};this.moveNext=function(){if(!f.moveNext())return!1;t.s=u++;t.a=d*(3.14159265>H?H<3.14159265*l?1:B*H+g:H<3.14159265+3.14159265*l?-1:G*H+x)+e+f.current().a;H=v.wrapAngle(H,q);return!0};this.current=function(){return t};this.samplingRate=function(){return m}}}};WAVE.extend(f,WAVE.Walkable);return f},wRandomGen:function(a){var b=this,f={getWalker:function(){var f=b.getWalker();a=a||{};var c="undefined"===typeof a.a?1:a.a,d=a.r||(b.samplingRate?b.samplingRate():2);2>d&&(d=2);var e=0,m={},
f=b.getWalker();return new function(){this.reset=function(){f.reset();e=0};this.moveNext=function(){if(!f.moveNext())return!1;m.s=e++;m.a=f.current().a+2*c*(Math.random()-.5);return!0};this.current=function(){return m};this.samplingRate=function(){return d}}}};WAVE.extend(f,WAVE.Walkable);return f}};d.signalConstSrc=function(a){function b(a){var b=a.a||0,f=a.qty,c=a.r||2;2>c&&(c=2);var d=0,e={};this.reset=function(){d=0};this.moveNext=function(){if(f&&d>=f)return!1;e.s=d;e.a=b;d++;return!0};this.current=
function(){return e};this.samplingRate=function(){return c}}a=a||{};var f={getWalker:function(){return new b(a)}};WAVE.extend(f,WAVE.Walkable);return f};d.arrayWalkable=function(a){var b=function(){var b=-1;this.reset=function(){b=-1};this.moveNext=function(){return++b<a.length};this.current=function(){return 0>b||b>=a.length?null:a[b]}},f={getWalker:function(){return new b},OriginalArray:a};WAVE.extend(f,WAVE.Walkable);return f};d.groupWalkable=function(a){var b=function(){var b=-1,f=null;this.reset=
function(){b=-1;f=null};this.moveNext=function(){if(++b<a.length){var c=a[b];f={k:c.k,v:WAVE.arrayWalkable(c.v)};return!0}return!1};this.current=function(){return f}},f={getWalker:function(){return new b},OriginalArray:a};WAVE.extend(f,WAVE.Walkable);return f};d.SVG=function(){var a={createCircle:function(b,f,c,d){d=d||{};d.cx=b;d.cy=f;d.r=c;return a.createShape("circle",d)},createRect:function(b,f,c,d,e){e=e||{};e.x=b;e.y=f;e.width=c;e.height=d;return a.createShape("rect",e)},createLine:function(b,
f,c,d,e){e=e||{};e.x1=b;e.y1=f;e.x2=c;e.y2=d;return a.createShape("line",e)},createPath:function(b){return a.createShape("path",b)},createText:function(b,f,c,d){d=d||{};d.x=f;d.y=c;f=a.createShape("text",d);b=document.createTextNode(b);f.appendChild(b);return f},createGroup:function(b){return a.createShape("g",b)},createMarker:function(a,f){var c=this.createShape("marker",a),d;for(d in f)c.appendChild(f[d]);return c},createDefs:function(a){var f=this.createShape("defs"),c;for(c in a)f.appendChild(a[c]);
return f},createUse:function(b,f,c){f=a.createShape("use",{x:f,y:c});f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+b);return f},createClipPath:function(b,f,c){c=c||{};c.id=b;b=a.createShape("clipPath",c);for(var d in f)b.appendChild(f[d]);return b},createShape:function(a,f){var c=document.createElementNS("http://www.w3.org/2000/svg",a),d;for(d in f)try{c.setAttribute(d,f[d])}catch(e){console.error(e)}return c}};return a}();d.ajaxCall=function(a,b,f,c,d,e,m,n){z(a,b,f,c,d,e,m,n)};
d.ajaxGet=function(a,b,f,c,d){z("GET",a,null,b,f,c,d)};d.ajaxGetJSON=function(a,b,f,c,e){z("GET",a,b,f,c,e,d.CONTENT_TYPE_JSON,d.CONTENT_TYPE_JSON)};d.ajaxPost=function(a,b,f,c,d,e,m){z("POST",a,b,f,c,d,e,m)};d.ajaxPostJSON=function(a,b,f,c,e){z("POST",a,b,f,c,e,d.CONTENT_TYPE_JSON,d.CONTENT_TYPE_JSON)};d.ajaxPatch=function(a,b,f,c,d){z("PATCH",a,null,b,f,c,d)};d.ajaxPatchJSON=function(a,b,f,c,e){z("PATCH",a,b,f,c,e,d.CONTENT_TYPE_JSON,d.CONTENT_TYPE_JSON)};d.onReady=function(a){d.isFunction(a)&&
("loading"!==document.readyState?a():d.isFunction(document.addEventListener)?document.addEventListener("DOMContentLoaded",a):d.isFunction(document.attachEvent)&&document.attachEvent("onreadystatechange",function(){"loading"!==document.readyState&&a()}))};d.copyToClipboard=function(a){if("undefined"!==typeof a&&null!==a){var b,f=!1;if(d.isString(a)){if(d.strEmpty(a))return;f=!0;b=document.createElement("p");b.style.border="0";b.style.padding="0";b.style.margin="0";b.style.position="absolute";b.style.left=
"-9999px";b.style.top="-9999px";b.setAttribute("readonly","");b.innerHTML=a;document.body.appendChild(b)}else b=a;var c;try{d.selectElement(b),c=document.execCommand("copy")}catch(e){c=!1}f&&document.body.removeChild(b);return c}};d.selectElement=function(a){var b,f;document.body.createTextRange?(b=document.body.createTextRange(),b.moveToElementText(a),b.select()):window.getSelection&&(f=window.getSelection(),b=document.createRange(),b.selectNodeContents(a),f.removeAllRanges(),f.addRange(b))};return d}();
WAVE.RecordModel=function(){var r={FIELDDEF_DEFAULTS:{Description:"",Placeholder:"",Type:"string",Key:!1,Kind:"text",Case:"asis",Stored:!0,Required:!1,Applicable:!0,Enabled:!0,ReadOnly:!1,Visible:!0,Password:!1,MinValue:null,MaxValue:null,MinSize:0,Size:0,ControlType:"auto",ScriptType:null,DefaultValue:null,Hint:null,Marked:!1,LookupDict:{},Lookup:{},DeferValidation:!1,Config:null},EVT_VALIDATION_DEFINITION_CHANGE:"validation-definition-change",EVT_INTERACTION_CHANGE:"interaction-change",EVT_DATA_CHANGE:"data-change",
EVT_RECORD_LOAD:"record-load",EVT_VALIDATE:"validate",EVT_VALIDATED:"validated",EVT_FIELD_LOAD:"field-load",EVT_FIELD_RESET:"field-reset",EVT_FIELD_DROP:"field-drop",EVT_PHASE_BEFORE:"before",EVT_PHASE_AFTER:"after",CTL_TP_AUTO:"auto",CTL_TP_CHECK:"check",CTL_TP_RADIO:"radio",CTL_TP_COMBO:"combo",CTL_TP_TEXT:"text",CTL_TP_NLS:"nls",CTL_TP_SCRIPT:"script",CTL_TP_TEXTAREA:"textarea",CTL_TP_HIDDEN:"hidden",CTL_TP_PUZZLE:"puzzle",CTL_TP_ERROR_REC:"error-rec",CTL_TP_ERROR_SUMMARY:"error-summary",CTL_TP_CHAIN_SELECTOR:"chain-selector",
KIND_TEXT:"text",KIND_SCREENNAME:"screenname",KIND_COLOR:"color",KIND_DATE:"date",KIND_DATETIME:"datetime",KIND_DATETIMELOCAL:"datetime-local",KIND_EMAIL:"email",KIND_MONTH:"month",KIND_NUMBER:"number",KIND_RANGE:"range",KIND_SEARCH:"search",KIND_TEL:"tel",KIND_TIME:"time",KIND_URL:"url",KIND_WEEK:"week",CASE_ASIS:"asis",CASE_UPPER:"upper",CASE_LOWER:"lower",CASE_CAPS:"caps",CASE_CAPSNORM:"capsnorm"},p=[];r.records=function(){return WAVE.arrayShallowCopy(p)};r.isDirty=function(){for(var r in p)if(p[r].isGUIModified())return!0;
return!1};r.Record=function(y,z){if(!y)throw"Record.ctor(need id+fieldFunc or initObject)";var d=this,A=!1;WAVE.extend(d,WAVE.EventManager);this.eventInvoke(r.EVT_RECORD_LOAD,r.EVT_PHASE_BEFORE);var e=null,u=null,c="unspecified",m="",g="";WAVE.isObject(y)&&y.fields?(e=y.ID,u=y.ISOLang,y.__FormMode&&(c=y.__FormMode),y.__CSRFToken&&(m=y.__CSRFToken),y.__Roundtrip&&(g=y.__Roundtrip)):(e=y.toString(),y=null);var n=WAVE.strEmpty(e)?WAVE.genRndKey(16):e,l=WAVE.strEmpty(u)?"eng":u,t=[],q=!1,x=null;this.ID=
function(){return n};this.ISOLang=function(){return l};this.formMode=function(){return c};this.csrfToken=function(){return m};this.roundtrip=function(){return g};this.loaded=function(){return A};this.fields=function(){return WAVE.arrayShallowCopy(t)};this.data=function(d,a){var b={},f;for(f in t){var e=t[f];d&&!e.isModified()&&!e.isGUIModified()||!a&&!e.stored()||(b[e.name()]=e.value())}WAVE.strEmpty(c)||"unspecified"===c||(b.__FormMode=c);WAVE.strEmpty(m)||(b.__CSRFToken=m);WAVE.strEmpty(g)||(b.__Roundtrip=
g);return b};this.fieldByName=function(c){if(WAVE.strEmpty(c))return null;for(var a in t){var b=t[a];if(WAVE.strSame(b.name(),c))return b}return null};this.allValidationErrors=function(){var c=[];null!==x&&c.push(x);for(var a in t){var b=t[a].validationError();null!==b&&c.push(b)}return c};this.allValidationErrorStrings=function(){var c="",a=this.allValidationErrors(),b;for(b in a)c+=a[b].toString()+"\n";return c};this.validate=function(){q=!1;x=null;var c=q=!0,a;for(a in t)t[a].validate()||(c=!1);
if(c)try{d.eventInvoke(r.EVT_VALIDATE)}catch(b){x=b,c=!1}d.eventInvoke(r.EVT_VALIDATED);return c};this.validated=function(){return q};this.validationError=function(){return x};this.valid=function(){return q&&null===x&&this.fieldsValid()};this.setExternalValidationError=function(c,a){WAVE.strEmpty(a)||(x=a,q=!1)};this.fieldsValidated=function(){for(var c in t)if(!t[c].validated())return!1;return!0};this.fieldsValid=function(){for(var c in t)if(!t[c].valid())return!1;return!0};this.isModified=function(){for(var c in t)if(t[c].isModified())return!0;
return!1};this.isGUIModified=function(){for(var c in t)if(t[c].isGUIModified())return!0;return!1};this.resetModified=function(){for(var c in t){var a=t[c];a.resetModified();a.resetGUIModified()}return!1};this.resetSchema=function(){for(var c in t)t[c].resetSchema()};this.applyDefaultValue=function(c){for(var a in t)t[a].applyDefaultValue(c)};this.latchAllEvents=function(c){this.eventInvocationSuspendCount+=c;for(var a in t)t[a].eventInvocationSuspendCount+=c};this.resetRecord=function(c){c&&d.latchAllEvents(1);
try{q=!1,x=null,this.resetSchema(),this.applyDefaultValue(!0),this.resetModified()}finally{c&&d.latchAllEvents(-1)}for(var a in t)c=t[a],c.eventInvoke(r.EVT_FIELD_RESET,c)};this.Field=function(c){function a(){q=!1;x=null;B=!1;p=null}function b(a,b){d.eventInvoke(r.EVT_VALIDATION_DEFINITION_CHANGE,m,a,b);m.eventInvoke(r.EVT_VALIDATION_DEFINITION_CHANGE,a,b)}function f(a,b){d.eventInvoke(r.EVT_INTERACTION_CHANGE,m,a,b);m.eventInvoke(r.EVT_INTERACTION_CHANGE,a,b)}var e=!1;if(!WAVE.isObject(c))throw"Field.ctor(fieldDef must be a map)";
if(WAVE.strEmpty(c.Name))throw"Field def must have a name";if(WAVE.strEmpty(c.Type))throw"Field def must have a type";c.Key=WAVE.strAsBool(c.Key,r.FIELDDEF_DEFAULTS.Key);c.Stored=WAVE.strAsBool(c.Stored,r.FIELDDEF_DEFAULTS.Stored);c.Required=WAVE.strAsBool(c.Required,r.FIELDDEF_DEFAULTS.Required);c.Applicable=WAVE.strAsBool(c.Applicable,r.FIELDDEF_DEFAULTS.Applicable);c.Enabled=WAVE.strAsBool(c.Enabled,r.FIELDDEF_DEFAULTS.Enabled);c.ReadOnly=WAVE.strAsBool(c.ReadOnly,r.FIELDDEF_DEFAULTS.ReadOnly);
c.Visible=WAVE.strAsBool(c.Visible,r.FIELDDEF_DEFAULTS.Visible);c.Password=WAVE.strAsBool(c.Password,r.FIELDDEF_DEFAULTS.Password);c.Marked=WAVE.strAsBool(c.Marked,r.FIELDDEF_DEFAULTS.Marked);c.DeferValidation=WAVE.strAsBool(c.DeferValidation,r.FIELDDEF_DEFAULTS.DeferValidation);var m=this;WAVE.extend(m,WAVE.EventManager);t.push(m);var n="fld"+c.Name;d[n]=m;d.eventInvoke(r.EVT_FIELD_LOAD,m,r.EVT_PHASE_BEFORE);WAVE.propStrAsObject(c,"LookupDict");WAVE.propStrAsObject(c,"Lookup");var h=WAVE.clone(c);
WAVE.extend(h,r.FIELDDEF_DEFAULTS,!0);var l=null,g=!1,u=!1,B=!1,p=null;this.record=function(){return d};this.loaded=function(){return e};this.drop=function(){if(!d[n])return!1;this.eventInvoke(r.EVT_FIELD_DROP,r.EVT_PHASE_BEFORE);d.eventInvoke(r.EVT_FIELD_DROP,m,r.EVT_PHASE_BEFORE);WAVE.arrayDelete(t,this);delete d[n];d.eventInvoke(r.EVT_FIELD_DROP,m,r.EVT_PHASE_AFTER);this.eventInvoke(r.EVT_FIELD_DROP,r.EVT_PHASE_AFTER);return!0};this.schemaDef=function(){return c};this.name=function(){return h.Name};
this.type=function(){return h.Type};this.isTypeLogical=function(){return WAVE.strOneOf(h.Type,["bool","boolean","logical"])};this.isLookupDict=function(){return 0<Object.keys(h.LookupDict).length};this.key=function(){return h.Key};this.stored=function(){return h.Stored};this.about=function(){var a=h.Description;WAVE.strEmpty(a)&&(a=h.Name);return a};this.inferControlType=function(){return this.isTypeLogical()?r.CTL_TP_CHECK:this.isLookupDict()?4<Object.keys(h.LookupDict).length?r.CTL_TP_COMBO:r.CTL_TP_RADIO:
64<h.Size?r.CTL_TP_TEXTAREA:r.CTL_TP_TEXT};this.getOrInferControlType=function(){var a=h.ControlType;if(WAVE.strEmpty(a)||WAVE.strOneOf(a,[r.CTL_TP_AUTO,"automatic","infer"]))a=this.inferControlType();return a};this.resetSchema=function(){h=WAVE.clone(c);WAVE.extend(h,r.FIELDDEF_DEFAULTS,!0);a();b(null,null);f(null,null)};this.validate=function(){function a(b,c){return WAVE.strTemplate(WAVE.strLocalize(d.ISOLang(),"RMField","error",b),c)}B=!0;p=null;try{if(h.Required&&(null===l||WAVE.strEmpty(l.toString())))throw a("Field '@f@' must have a value",
{f:this.about()});if(null!==l&&!WAVE.strEmpty(l.toString())){var b=h.MinValue;if(null!==b)try{if(l<b)throw 1;}catch(c){throw a("Field '@f@' value can not be less than '@b@'",{f:this.about(),b:b});}var f=h.MaxValue;if(null!==f)try{if(l>f)throw 1;}catch(c){throw a("Field '@f@' value can not be greater than '@b@'",{f:this.about(),b:f});}var e=h.Size;if(null!==e&&0<e&&l.toString().length>e)throw a("Field '@f@' value can not be longer than @b@ characters",{f:this.about(),b:e});e=h.MinSize;if(null!==e&&
0<e&&l.toString().length<e)throw a("Field '@f@' value can not be shorter than @b@ characters",{f:this.about(),b:e});var k=Object.keys(h.LookupDict),n=WAVE.isSimpleKeyStringMap(h.LookupDict);if(0<k.length&&n){var g=WAVE.convertScalarType(!1,l,"string","<unconvertible>");if(!WAVE.strOneOf(g,k))throw a("Field '@f@' value '@v@' is not allowed",{f:this.about(),v:g});}if(h.Kind===r.KIND_EMAIL&&!WAVE.strIsEMail(l))throw a("Field '@f@' must be a valid e-mail address",{f:this.about()});if(h.Kind===r.KIND_SCREENNAME&&
!WAVE.strIsScreenName(l))throw a("Field '@f@' must start from letter and contain only letters or digits separated by single '.' or '-' or '_'",{f:this.about()});}m.eventInvoke(r.EVT_VALIDATE)}catch(c){p=c}m.eventInvoke(r.EVT_VALIDATED);return null===p};this.validationError=function(){return p};this.setExternalValidationError=function(a,b){WAVE.strEmpty(b)||(p=b,B=!1)};this.required=function(c){if("undefined"===typeof c||c===h.Required)return h.Required;h.Required=c;a();b("required",c)};this.value=
function(b,c){if("undefined"===typeof b)return l;var f=l,e=WAVE.convertScalarType(!0,b,h.Type,h.DefaultValue),k=WAVE.isSame(f,e);if(c)var B=e,e=this.preProcessValueFromGUI(e),k=k&&WAVE.isSame(B,e);if(k)return l;d.eventInvoke(r.EVT_DATA_CHANGE,r.EVT_PHASE_BEFORE,m,f,e);this.eventInvoke(r.EVT_DATA_CHANGE,r.EVT_PHASE_BEFORE,f,e);l=e;g=!0;c&&(u=!0);h.DeferValidation?a():this.validate();this.eventInvoke(r.EVT_DATA_CHANGE,r.EVT_PHASE_AFTER,f,e);d.eventInvoke(r.EVT_DATA_CHANGE,r.EVT_PHASE_AFTER,m,f,e);return l};
this.preProcessValueFromGUI=function(a){if(null===a)return null;"string"===typeof a&&(a=WAVE.strTrim(a),h.Kind===r.KIND_TEL&&(a=WAVE.strNormalizeUSPhone(a)),h.Case===r.CASE_UPPER?a=a.toUpperCase():h.Case===r.CASE_LOWER?a=a.toLowerCase():h.Case===r.CASE_CAPS?a=WAVE.strCaps(a,!1):h.Case===r.CASE_CAPSNORM&&(a=WAVE.strCaps(a,!0)));return a};this.isNull=function(){return null===l};this.displayValue=function(){return null===l?"":WAVE.isDateType(h.Type)?h.Kind===r.KIND_DATE?WAVE.toUSDateString(l):WAVE.toUSDateTimeString(l):
l.toString()};this.setGUIValue=function(a){this.value(a,!0)};this.applyDefaultValue=function(a){(a||this.isNull())&&this.value(h.DefaultValue);return l};this.valid=function(){return null===p};this.validated=function(){return B};this.validationError=function(){return p};this.isModified=function(){return g};this.resetModified=function(){var a=g;g=!1;f("modified",!1);return a};this.isGUIModified=function(){return u};this.resetGUIModified=function(){var a=u;u=!1;f("guimodified",!1);return a};this.isEnabled=
function(){return this.enabled()&&this.applicable()};this.kind=function(a){if("undefined"===typeof a||a===h.Kind)return h.Kind;h.Kind=a;f("kind",a)};this.case=function(a){if("undefined"===typeof a||a===h.Case)return h.Case;h.Case=a;WAVE.isStringType(h.Type)&&this.value(l,!1)};this.applicable=function(a){if("undefined"===typeof a||a===h.Applicable)return h.Applicable;h.Applicable=a;f("applicable",a)};this.enabled=function(a){if("undefined"===typeof a||a===h.Enabled)return h.Enabled;h.Enabled=a;f("enabled",
a)};this.readonly=function(a){if("undefined"===typeof a||a===h.ReadOnly)return h.ReadOnly;h.ReadOnly=a;f("readonly",a)};this.visible=function(a){if("undefined"===typeof a||a===h.Visible)return h.Visible;h.Visible=a;f("visible",a)};this.password=function(a){if("undefined"===typeof a||a===h.Password)return h.Password;h.Password=a;f("password",a)};this.deferValidation=function(c){if("undefined"===typeof c||c===h.DeferValidation)return h.DeferValidation;h.DeferValidation=c;a();b("defervalidation",c)};
this.minValue=function(c){if("undefined"===typeof c||c===h.MinValue)return h.MinValue;h.MinValue=c;a();b("minvalue",c)};this.maxValue=function(c){if("undefined"===typeof c||c===h.MaxValue)return h.MaxValue;h.MaxValue=c;a();b("maxvalue",c)};this.minSize=function(c){if("undefined"===typeof c||c===h.MinSize)return h.MinSize;h.MinSize=c;a();b("minsize",c)};this.size=function(c){if("undefined"===typeof c||c===h.Size)return h.Size;h.Size=c;a();b("size",c)};this.controlType=function(a){if("undefined"===
typeof a||a===h.ControlType)return h.ControlType;h.ControlType=a;f("controltype",a)};this.scriptType=function(a){if("undefined"===typeof a||a===h.ScriptType)return h.ScriptType;h.ScriptType=a;f("scripttype",a)};this.defaultValue=function(c){if("undefined"===typeof c||c===h.DefaultValue)return h.DefaultValue;h.DefaultValue=c;a();b("defaultvalue",c)};this.lookupDict=function(c){if("undefined"===typeof c)return h.LookupDict;null===c&&(c={});if(WAVE.isSame(h.DefaultValue,c))return h.LookupDict;h.LookupDict=
c;a();b("lookupDict",c)};this.hint=function(a){if("undefined"===typeof a||a===h.Hint)return h.Hint;h.Hint=a;f("hint",a)};this.marked=function(a){if("undefined"===typeof a||a===h.Marked)return h.Marked;h.Marked=a;f("marked",a)};this.description=function(a){if("undefined"===typeof a||a===h.Description)return h.Description;h.Description=a;f("description",a)};this.placeholder=function(a){if("undefined"===typeof a||a===h.Placeholder)return h.Placeholder;h.Placeholder=a;f("placeholder",a)};this.config=
function(c){if("undefined"===typeof c||c===h.Config)return h.Config;if(!WAVE.isObject(c))throw"RecordView.config(val: must be object)";h.Config=c;a();b("config",null);f("config",null)};this.toString=function(){return"["+this.type()+"]Field("+this.name()+" = '"+this.value()+"')"};e=!0;d.eventInvoke(r.EVT_FIELD_LOAD,m,r.EVT_PHASE_AFTER)};if(y){for(var w in y.fields)e=y.fields[w],u=new this.Field(e.def),e.hasOwnProperty("val")&&u.value(e.val),e.hasOwnProperty("errorText")&&u.setExternalValidationError(WAVE.strDefault(e.error),
e.errorText),u.resetModified();y.hasOwnProperty("errorText")&&this.setExternalValidationError(WAVE.strDefault(y.error),y.errorText)}else WAVE.isFunction(z)&&z.apply(d);A=!0;p.push(this);this.eventInvoke(r.EVT_RECORD_LOAD,r.EVT_PHASE_AFTER)};r.Record.prototype.toString=function(){return"Record["+this.ID()+"]"};r.DATA_RECVIEW_ID_ATTR="data-wv-rid";r.DATA_FIELD_NAME_ATTR="data-wv-fname";r.DATA_CTL_TP_ATTR="data-wv-ctl";r.RecordView=function(p,z,d,A){if(WAVE.strEmpty(p))throw"RecordView.ctor(id: must specify)";
if(!WAVE.isObject(z))throw"RecordView.ctor(rec: must be Record)";WAVE.isObject(d)||(d=WAVE.RecordModel.GUI);var e=d,u=this,c=[],m=null;this.ID=function(){return p};this.record=function(){return z};this.gui=function(){return e};this.rootElement=function(){return m};this.destroyViews=function(){for(;0<c.length;)c[0].destroy()};var g=null;this.buildViews=function(){m=null;this.destroyViews();for(var c=document.getElementsByTagName("form"),d=0,e=c.length;d<e;d++){var u=c[d],x=u.getAttribute(r.DATA_RECVIEW_ID_ATTR);
if(WAVE.strSame(p,x)){m=u;break}}if(null===m)for(c=document.getElementsByTagName("div"),d=0,e=c.length;d<e;d++)if(u=c[d],x=u.getAttribute(r.DATA_RECVIEW_ID_ATTR),WAVE.strSame(p,x)){m=u;break}if(null===m)throw"No 'form' or 'div' element could be found with record binding '"+r.DATA_RECVIEW_ID_ATTR+"' annotation";c=WAVE.arrayShallowCopy(m.getElementsByTagName("div"));d=0;for(e=c.length;d<e;d++)u=c[d],x=u.getAttribute(r.DATA_FIELD_NAME_ATTR),WAVE.strEmpty(x)||("#"===x?new this.FieldView(u,null):(x=z.fieldByName(x),
null!==x&&new this.FieldView(u,x)));WAVE.strEmpty(z.formMode())&&WAVE.strEmpty(z.csrfToken())&&WAVE.strEmpty(z.roundtrip())||(null===g&&(g=document.createElement("div"),g.style.display="none",m.appendChild(g)),c="",WAVE.strEmpty(z.formMode())||(c+="<input type='hidden' name='__FormMode' value='"+z.formMode()+"'>"),WAVE.strEmpty(z.csrfToken())||(c+="<input type='hidden' name='__CSRFToken' value='"+z.csrfToken()+"'>"),WAVE.strEmpty(z.roundtrip())||(c+="<input type='hidden' name='__Roundtrip' value='"+
z.roundtrip()+"'>"),g.innerHTML=c)};this.views=function(){return WAVE.arrayShallowCopy(c)};this.FieldView=function(d,m){if(!d)throw"FieldView.ctor(div: element must be passed)";if(null!==m&&!WAVE.isObject(m))throw"FieldView.ctor(fld: must be Record.Field)";var g=this;c.push(g);null!==m?m.eventSinkBind(this):z.eventSinkBind(this);var q="";null!==m&&(q="fld"+m.name(),u[q]=g);this.eventNotify=function(c,u,q){WAVE.strOneOf(c,[WAVE.RecordModel.EVT_DATA_CHANGE,WAVE.RecordModel.EVT_INTERACTION_CHANGE,WAVE.RecordModel.EVT_VALIDATION_DEFINITION_CHANGE,
WAVE.RecordModel.EVT_VALIDATED])&&("undefined"===typeof q&&(q=""),q!==WAVE.RecordModel.EVT_PHASE_BEFORE&&(null!==m&&(d.style.visibility=m.visible()?"visible":"hidden"),e.eventNotifyFieldView(g,c,u,q)))};this.destroy=function(){d.innerHTML="";null!==m?m.eventSinkUnbind(this):z.eventSinkUnbind(this);WAVE.arrayDelete(c,this);null!==m&&delete u[q]};this.record=function(){return z};this.recView=function(){return u};this.field=function(){return m};this.DIV=function(){return d};this.getOrInferControlType=
function(){var c=d.getAttribute(r.DATA_CTL_TP_ATTR);return WAVE.strEmpty(c)?null===m?WAVE.RecordModel.CTL_TP_ERROR_REC:m.getOrInferControlType():c};(null===m||m.visible())&&e.buildFieldViewAnew(this)};A||this.buildViews()};return r}();
WAVE.Pay=function(){var r={Providers:{},Brands:{VISA:"Visa",MASTER_CARD:"MasterCard",AMERICAN_EXPRESS:"AmEx",DISCOVER:"Discover",JCB:"JCB",DINERS_CLUB:"Diners Club",UNKNOWN:"Card"},ErrorTypes:{OK:0,API_CONNECTION_ERROR:1,API_ERROR:2,AUTHENTICATION_ERROR:3,CARD_ERROR:4,INVALID_REQUEST_ERROR:5,RATE_LIMIT_ERROR:6,GENERAL_ERROR:100},CardErrors:{OK:0,INVALID_NUMBER:1,INVALID_EXPIRY_MONTH:2,INVALID_EXPIRY_YEAR:3,INVALID_CVC:4,INCORRECT_NUMBER:5,EXPIRED_CARD:6,INCORRECT_CVC:7,INCORRECT_ZIP:8,CARD_DECLINED:9,
MISSING:10,PROCESSING_ERROR:11,GENERAL_ERROR:100},Facade:function(p,r,z){if(WAVE.strEmpty(p))throw new WAVE.Pay.RequiredArgumentError("Facade.ctor()","providerName");if(WAVE.strEmpty(r))throw new WAVE.Pay.RequiredArgumentError("Facade.ctor()","provider");if(WAVE.strEmpty(z))throw new WAVE.Pay.RequiredArgumentError("Facade.ctor()","init");var d=this;this.providerName=function(){return p};WAVE.extend(d,WAVE.EventManager);try{r.initialize(z)}catch(A){throw new WAVE.Pay.ProviderInitError(A);}this.tokenize=
function(p,e){if(WAVE.strEmpty(p))throw new WAVE.Pay.RequiredArgumentError("tokenize()","paymentData");if(WAVE.strEmpty(e))throw new WAVE.Pay.RequiredArgumentError("tokenize()","callback");try{r.tokenize(d,p,e)}catch(u){throw new WAVE.Pay.TokenizeError(u);}}},RequiredArgumentError:function(p,r,z){this.name="RequiredArgumentError";this.message=p+" requires argument '"+r+"'";this.inner=z}};r.RequiredArgumentError.prototype=Error.prototype;r.ProviderInitError=function(p){this.name="ProviderInitError";
var r="Critical error during provider setup";"undefined"===typeof p||WAVE.strEmpty(p.message)||(r+=": "+p.message);this.message=r;this.inner=p};r.ProviderInitError.prototype=Error.prototype;r.TokenizeError=function(p){this.name="TokenizeError";var r="Critical error during tokenization";"undefined"===typeof p||WAVE.strEmpty(p.message)||(r+=": "+p.message);this.message=r;this.inner=p};r.TokenizeError.prototype=Error.prototype;r.CardValidationError=function(p){this.name="CardValidationError";var r="Card is invalid";
"undefined"===typeof p||WAVE.strEmpty(p.message)||(r+=": "+p.message);this.message=r;this.inner=p};r.CardValidationError.prototype=Error.prototype;r.validateCardNumber=function(p){if(WAVE.strEmpty(p))return!1;p=p.replace(/\s+|-/g,"");return 10<=p.length&&16>=p.length&&r.checkLuhn(p)};r.checkLuhn=function(p){if(WAVE.strEmpty(p))return!1;var r=0,z=0,d=!1;p=p.replace(/\D/g,"");for(var A=p.length-1;0<=A;A--)z=p.charAt(A),z=parseInt(z,10),d&&9<(z*=2)&&(z-=9),r+=z,d=!d;return 0===r%10};r.validateCVC=function(p){return WAVE.strEmpty(p)?
!1:3<=p.length&&4>=p.length&&/^\d+$/.test(p)};r.validateExpirationDate=function(p,r){if(WAVE.strEmpty(p)||WAVE.strEmpty(r))return!1;2===r.length&&(r="20"+r);return/^\d+$/.test(p)&&/^\d+$/.test(r)&&1<=p&&12>=p&&4===r.length&&2015<r};r.getCardBrand=function(p){return WAVE.strEmpty(p)||!/^\d{2}/.test(p)?r.Brands.UNKNOWN:/^4/.test(p)?r.Brands.VISA:/^5[1-5]/.test(p)?r.Brands.MASTER_CARD:/^3[47]/.test(p)?r.Brands.AMERICAN_EXPRESS:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/.test(p)?
r.Brands.DISCOVER:/^35(2[89]|[3-8][0-9])/.test(p)?r.Brands.JCB:/^3[0689]/.test(p)?r.Brands.DINERS_CLUB:r.Brands.UNKNOWN};return r}();WAVE.GUI=function(){function r(a){if(0<c.length){var b=c[c.length-1];a=a.target;"undefined"===typeof a||null===a||WAVE.isParentOf(b,a)||(b.tabIndex=0,b.focus())}}function p(){1!==c.length||WAVE.Platform.Mobile||(window.addEventListener("focus",r,!0),m=window.pageYOffset||document.documentElement.scrollTop,l=document.body.style.top,g=document.body.style.position,n=document.body.style.overflowY,t=document.body.style.paddingRight,document.body.parentElement.offsetHeight>window.innerHeight&&(q=!0,document.body.style.position=
"fixed",document.body.style.paddingRight=t+e.getScrollBarWidth()+"px",document.body.style.overflow="hidden",document.body.style.top=-m+"px"))}function y(){0!==c.length||WAVE.Platform.Mobile||(window.removeEventListener("focus",r,!0),q&&(document.body.style.top=l,document.body.style.position=g,document.body.style.overflowY=n,document.body.style.paddingRight=t,document.documentElement.scrollTop=document.body.scrollTop=m))}function z(a,b){if(a===b)return!0;if("undefined"===typeof a||"undefined"===typeof b)return!1;
WAVE.isObject(a)||(a={url:a});WAVE.isObject(b)||(b={url:b});if(a.url===b.url)if(WAVE.has(a,"clip")){if(WAVE.has(b,"clip"))return a.left|0===b.left|0&&a.right|0===b.right|0&&a.bottom|0===b.bottom|0&&a.top|0===b.top|0}else if(!WAVE.has(b,"clip"))return!0;return!1}function d(a,b,c,f){WAVE.isObject(a)||(a={url:a});a.url=WAVE.strDefault(function(a){return 0===a.indexOf("$")&&WAVE.isObject(f)?f[a.substr(1)]:a}(WAVE.strDefault(a.url)));var d=new Image;d.onerror=function(){a.error=!0;"undefined"!==typeof c&&
c.apply(d,arguments)};if(WAVE.has(a,"clip")){var e=a.clip,m=e.left|0,k=e.top|0,h=(e.right|0)-m,n=(e.bottom|0)-k,l=document.createElement("canvas");l.width=h;l.height=n;d.onload=function(){a.load=!0;a.width=h;a.height=n;l.getContext("2d").drawImage(this,m,k,h,n,0,0,h,n);"undefined"!==typeof b&&b.apply(l,arguments);delete a.img};a.element=l}else d.onload=function(){a.load=!0;a.width=this.width;a.height=this.height;"undefined"!==typeof b&&b.apply(d,arguments)},a.element=d;d.src=a.url;a.free=function(){a.element.parentNode&&
a.element.parentNode.removeChild(a.element);delete a.element;delete a.error;delete a.load;delete a.img;delete a.width;delete a.height;delete a.free};return a}function A(a,b,c,f,d){function e(d,m){function k(b){b.preventDefault();var f=b.pageX;b=b.pageY;var e=d-f,h=m-b;"undefined"!==typeof c&&c.call(a,d,m);a.scrollLeft+=e;a.scrollTop+=h;d=f;m=b}function h(b){b.preventDefault();var f=b.touches;b=f[0].pageX;var f=f[0].pageY,e=d-b,k=m-f;"undefined"!==typeof c&&c.call(a,d,m);a.scrollLeft+=e;a.scrollTop+=
k;d=b;m=f}function n(b){"undefined"!==typeof f&&f.call(a,b.pageX,b.pageY);da()}function l(b){"undefined"!==typeof f&&f.call(a,d,m);da()}function da(){document.removeEventListener("mousemove",k,!1);document.removeEventListener("touchmove",h,!1);document.removeEventListener("mouseup",n,!1);document.removeEventListener("touchend",l,!1)}"undefined"!==typeof b&&b.call(a,d,m);document.addEventListener("mousemove",k,!1);document.addEventListener("touchmove",h,!1);document.addEventListener("mouseup",n,!1);
document.addEventListener("touchend",l,!1)}a.addEventListener("mousedown",function(a){0===a.button&&(d&&a.preventDefault(),e(a.pageX,a.pageY))},!1);a.addEventListener("touchstart",function(a){var b=a.touches;1===b.length&&(d&&a.preventDefault(),e(b[0].pageX,b[0].pageY))},!1)}var e={TUNDEFINED:"undefined",CLS_TOAST:"wvToast",CLS_CURTAIN:"wvCurtain",CLS_DIALOG_BASE:"wvDialogBase",CLS_DIALOG_CONTENT:"wvDialogContent",CLS_DIALOG_HEADER:"wvDialogHeader",CLS_DIALOG_BODY:"wvDialogBody",CLS_DIALOG_FOOTER:"wvDialogFooter",
CLS_DIALOG_CONFIRM_FOOTER:"wvConfirmDialogFooter",CLS_DIALOG_CONFIRM_BUTTON:"wvConfirmDialogButton",DLG_UNDEFINED:"",DLG_CANCEL:"cancel",DLG_OK:"ok",DLG_YES:"yes",DLG_NO:"no",EVT_DIALOG_CLOSE:"dlg-close",EVT_PUZZLE_KEYPAD_CHANGE:"puzzle-change",CLS_TREE_NODE:"wvTreeNode",CLS_TREE_NODE_OWN_SELECTED:"wvTreeNodeOwnSelected",CLS_TREE_NODE_BUTTON_EXPANDED:"wvTreeNodeButtonExpanded",CLS_TREE_NODE_BUTTON_COLLAPSED:"wvTreeNodeButtonCollapsed",CLS_TREE_NODE_CONTENT:"wvTreeNodeContent",CLS_TREE_NODE_OWN:"wvTreeNodeOwn",
CLS_TREE_NODE_CHILDREN:"wvTreeNodeChildren",EVT_PHASE_BEFORE:"before",EVT_PHASE_AFTER:"after",EVT_TREE_NODE_ADD:"tree-node-add",EVT_TREE_NODE_REMOVE:"tree-node-remove",EVT_TREE_NODE_CONTENT:"tree-node-content",EVT_TREE_NODE_DATA:"tree-node-data",EVT_TREE_NODE_EXPANSION:"tree-node-expansion",EVT_TREE_NODE_SELECTION:"tree-node-selection",EVT_RULER_MOUSE_MOVE:"ruler-mouse-move",EVT_RULER_MOUSE_ENTER:"ruler-mouse-enter",EVT_RULER_MOUSE_LEAVE:"ruler-mouse-leave",TREE_SELECTION_NONE:0,TREE_SELECTION_SINGLE:1,
TREE_SELECTION_MULTI:2,CLS_OBJECTINSPECTOR_EDITOR:"wvObjectInspectorEditor",EVT_PS_EDITOR_UPDATED:"editor-updated",CLS_PS_DIV_LANGS_CONTAINER:"wvPSLangsContainer",CLS_PS_BTN_ADD:"wvPSBtnAdd",CLS_PS_BTN_DEL:"wvPSBtnDel",CLS_PS_BTN_RAW:"wvPSBtnRaw",CLS_PS_BTN_CLEAR:"wvPSBtnClear",CLS_PS_DIV_LANG_NAME:"wvPSLangLabel",CLS_PS_LANG_SELECTOR:"wvPSLangSelector",CLS_PS_TEXTAREA_RAW_EDITOR:"wvPSTextareaRawEditor",CLS_PS_LABEL_CONTAINER:"wvPSLabelContainer",CLS_PS_INPUT_CONTAINER:"wvPSInputContainer",CLS_TABS_ACTIVE_TAB:"wvTabsActive",
CLS_TABS_UL:"wvTabsUl",CLS_TABS_CONTENT_DIV:"wvTabsContentDiv",CLS_TABS_CONTENT_DIV_HIDDEN:"wvTabsContentDivHidden",CLS_TABS_CONTENT_DIV_SHOWN:"wvTabsContentDivShown",CLS_TABS_CONTENT_CONTAINER:"wvTabsContentContainer",CLS_TABS_UL_CONTAINER:"wvTabsUlContainer",CLS_TABS_LI_DISABLED:"wvTabDisabled",EVT_TABS_TAB_CHANGED:"wv-active-tab-changed",EVT_TABS_TAB_ADD:"wv-tab-add",EVT_TABS_TAB_REMOVE:"wv-tab-remove",EVT_MULTI_LINE_TEXT_UPDATED:"wv-multiline-updated",CLS_OBJECT_EDITOR_NODE_CONTAIER:"wvObjEditNode",
CLS_OBJECT_EDITOR_ARRAY_ITEM:"wvObjEditItem",CLS_OBJECT_EDITOR_ARRAY_ITEM_SEPARATOR:"wvObjEditItemSeparator",CLS_OBJECT_EDITOR_ARRAY_CONTAIER:"wvObjEditArrDiv",CLS_OBJECT_EDITOR_OBJECT_CONTAIER:"wvObjEditObjDiv",CLS_OBJECT_EDITOR_INPUT_CONTAIER:"wvObjEditInputDiv",EVT_OBJECT_EDITOR_UPDATED:"wv-objectEditor-updated",EVT_OBJECT_EDITOR_VALIDATION_ERROR:"wv-objectEditor-validation-error",EVT_OBJECT_EDITOR_VALIDATION_SUCCESS:"wv-objectEditor-validation-success",CLS_IMAGE_BOX_LOADING:"wvImageBox_loading",
CLS_IMAGE_BOX_ERROR:"wvImageBox_error",CLS_IMAGE_BOX_WIDER:"wvImageBox_wider",CLS_IMAGE_BOX_HIGHER:"wvImageBox_higher",CLS_IMAGE_VIEW:"wvImageView",CLS_IMAGE_VIEW_ZOOM:"wvImageView_zoom",CLS_IMAGE_VIEW_IMAGE:"wvImageView_image",CLS_GALLERY:"wvGallery",CLS_GALLERY_PREV:"wvGallery_prev",CLS_GALLERY_NEXT:"wvGallery_next",CLS_GALLERY_DISABLED:"wvGallery_disabled",CLS_GALLERY_LIST:"wvGallery_list",CLS_GALLERY_ITEM:"wvGallery_item",CLS_GALLERY_THUMBNAIL:"wvGallery_thumbnail",CLS_GALLERY_CONTENT:"wvGallery_content",
CLS_GALLERY_IMAGE:"wvGallery_image",CLS_GALLERY_SELECTED:"wvGallery_selected",CLS_GALLERY_SIMPLE_THUMBNAILS:"wvGallerySimple_thumbnails",CLS_GALLERY_SIMPLE_PREVIEW:"wvGallerySimple_preview",EVT_GALLERY_ADD:"wv-gallery-add",EVT_GALLERY_REMOVE:"wv-gallery-remove",EVT_GALLERY_CHANGE:"wv-gallery-change",CLS_DETAILS:"wvDetails",CLS_DETAILS_TITLE:"wvDetailsTitle",CLS_DETAILS_TITLE_SHOWN:"wvDetailsTitleShown",CLS_DETAILS_TITLE_HIDDEN:"wvDetailsTitleHidden",CLS_DETAILS_CONTENT:"wvDetailsContent",CLS_DETAILS_CONTENT_VISIBLE:"wvDetailsContentVisible",
CLS_DETAILS_CONTENT_HIDDEN:"wvDetailsContentHidden",CLS_DETAILS_MODAL:"wvDetailsModal",CLS_CHAIN_SELECTOR:"wvChainSelector",CLS_CS_DIV_INFO:"wvChainSelectorInfo",CLS_CS_DIV_NAME:"wvChainSelectorName",CLS_CS_DIV_DESCR:"wvChainSelectorDescription",CLS_CS_DIV_COMBO_WRAP:"wvChainSelectorComboWrap",CLS_CS_DIV_ARROW:"wvChainSelectorComboArrow",EVT_CHAIN_SELECTOR_UPDATED:"chain-selector-updated",EVT_DETAILS_SHOW:"wv-details-show",EVT_DETAILS_HIDE:"wv-details-hide"},u=0;e.pageWidth=function(){return window.innerWidth||
document.documentElement.clientWidth||document.body.clientWidth};e.pageHeight=function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight};e.toast=function(a,b,c){var f={};WAVE.intValidPositive(c)||(c=2500);var d=document.createElement("div");b=WAVE.strEmpty(b)?"":"_"+b;d.className=e.CLS_TOAST+b;d.style.zIndex=1E6;d.innerHTML=a;d.style.left=0;document.body.appendChild(d);a=Math.round(d.offsetWidth/2);d.style.left="50%";d.style.marginLeft=-a+"px";u++;1<u&&
(d.style.marginLeft=-(a+4*u)+"px",d.style.marginTop=-(4*u)+"px");var m=!1;f.close=function(){if(m)return!1;document.body.removeChild(d);u--;return m=!0};f.closed=function(){return m};setTimeout(function(){f.close()},c);return f};var c=[],m=0,g=null,n=null,l=null,t=null,q=!1;e.getScrollBarWidth=function(){var a=document.createElement("div");a.style.height="100px";a.style.position="absolute";a.style.top="-10000px";a.style.width="100px";a.style.overflow="scroll";document.body.appendChild(a);var b=a.offsetWidth-
a.clientWidth;document.body.removeChild(a);return b};e.curtainOn=function(a){try{document.activeElement.blur()}catch(b){}var f=document.createElement("div");f.style.backgroundColor="rgba(127,127,127,0.45)";f.className=e.CLS_CURTAIN;WAVE.strEmpty(a)||(f.className+=" "+a);f.style.position="fixed";f.style.left="0";f.style.top="0";f.style.width="100%";f.style.height="100%";f.style.zIndex=5E5+c.length;document.body.appendChild(f);c.push(f);p()};e.curtainOff=function(){if(0!==c.length){var a=c[c.length-
1];"undefined"!==typeof a.__DIALOG?a.__DIALOG.cancel():(document.body.removeChild(a),WAVE.arrayDelete(c,a),y())}};e.isCurtain=function(){return 0<c.length};e.currentDialog=function(){for(var a=c.length-1;0<=a;a--)if("undefined"!==typeof c[a].__DIALOG)return c[a].__DIALOG;return null};e.Dialog=function(a){function b(){if(0!==h||0!==n){var a=e.pageWidth(),c=e.pageHeight(),f=0===h?l.offsetWidth:Math.round(h/100*a),d=0===n?l.offsetHeight:Math.round(n/100*c);l.style.width=0===h?"auto":f+"px";l.style.left=
Math.round(a/2-l.offsetWidth/2)+"px";a=Math.round(c/2-l.offsetHeight/2);0>a&&(a=0);l.style.top=a+"px";l.style.width=0===h?"auto":f-2*l.offsetLeft+"px";l.style.height=0===h?"auto":d-(l.offsetTop+l.offsetLeft)+"px"}}function f(){da&&clearTimeout(da);da=setTimeout(function(){b();da=null},500)}WAVE.isObject(a)||(a={});var d=WAVE.isFunction(a.onShow)?a.onShow:function(){},m=WAVE.isFunction(a.onClose)?a.onClose:function(){return!0};WAVE.extend(this,WAVE.EventManager);var k=document.createElement("div");
k.__DIALOG=this;k.className=e.CLS_DIALOG_BASE+" "+WAVE.strDefault(a.cls);k.style.position="fixed";k.style.zIndex=5E5+c.length;var h=WAVE.intValidPositive(a.widthpct)?a.widthpct:0,n=WAVE.intValidPositive(a.heightpct)?a.heightpct:0;100<h&&(h=100);100<n&&(n=100);document.body.appendChild(k);c.push(k);var l=document.createElement("div");l.className=e.CLS_DIALOG_CONTENT;k.appendChild(l);var g=document.createElement("div");g.className=e.CLS_DIALOG_HEADER;g.innerHTML=WAVE.strDefault(a.header,"Dialog");l.appendChild(g);
var u=document.createElement("div");u.className=e.CLS_DIALOG_BODY;u.innerHTML=WAVE.strDefault(a.body,"&nbsp;");l.appendChild(u);var x=document.createElement("div");x.className=e.CLS_DIALOG_FOOTER;x.innerHTML=WAVE.strDefault(a.footer,"");l.appendChild(x);var da=null,q=e.DLG_UNDEFINED;this.result=function(){return q};this.close=function(a){"undefined"===typeof a&&(a=e.DLG_CANCEL);if(q!==e.DLG_UNDEFINED)return q;if(!m(this,a))return e.DLG_UNDEFINED;q=a;document.body.removeChild(k);WAVE.arrayDelete(c,
k);WAVE.removeEventHandler(window,"resize",f);y();this.eventInvoke(e.EVT_DIALOG_CLOSE,a);return a};this.ok=function(){this.close(e.DLG_OK)};this.cancel=function(){this.close(e.DLG_CANCEL)};this.title=function(a){if("undefined"===typeof a||null===a)return g.innerHTML;g.innerHTML=a;b()};this.content=function(a){if("undefined"===typeof a||null===a)return u.innerHTML;$(u).html(a);b()};this.baseDIV=function(){return k};this.headerDIV=function(){return g};this.bodyDIV=function(){return u};this.footerDIV=
function(){return x};this.widthpct=function(a){if("undefined"===typeof a||a===h)return h;h=a;b()};this.widthpct=function(a){if("undefined"===typeof a||a===n)return n;n=a;b()};this.adjustBounds=function(){b()};WAVE.addEventHandler(window,"resize",f);d(this);b();p();return this};e.showConfirmationDialog=function(a,b,c,f,d){function m(a,b){return WAVE.strHTMLTemplate('<button class="@btnClass@" onclick="WAVE.GUI.currentDialog().close(\'@result@\');">@label@</button>',{btnClass:e.CLS_DIALOG_CONFIRM_BUTTON+
" "+k,result:b,label:a})}WAVE.isObject(d)||(d={});WAVE.isArray(c)||(c=[]);b=WAVE.strDefault(b,"Please confirm");var k=WAVE.strDefault(d.btnCls),h=WAVE.strDefault(d.footerCls),n="",l="",g="",u="";WAVE.inArray(c,e.DLG_YES)&&(n=m("Yes",e.DLG_YES));WAVE.inArray(c,e.DLG_NO)&&(l=m("No",e.DLG_NO));WAVE.inArray(c,e.DLG_OK)&&(g=m("OK",e.DLG_OK));WAVE.inArray(c,e.DLG_CANCEL)&&(u=m("Cancel",e.DLG_CANCEL));b="<div>"+b+"<div>";h='<div class="'+e.CLS_DIALOG_CONFIRM_FOOTER+" "+h+'">'+n+l+g+u+"</div>";new e.Dialog({header:WAVE.strDefault(a,
"Confirmation"),body:b,footer:h,cls:WAVE.strDefault(d.cls),onShow:function(a){},onClose:f})};var x=!1;e.dirty=function(a){if("undefined"===typeof a)return x;x=a};e.isDirty=function(){return x||null!==e.currentDialog()};e.SUPPRESS_UNLOAD_CHECK=!1;window.onbeforeunload=function(a){e.SUPPRESS_UNLOAD_CHECK||!e.isDirty()&&!WAVE.RecordModel.isDirty()||((a||window.event).returnValue="The page is in the middle of the data entry. If you navigate away/close the page now some changes will be lost. Are you sure?")};
e.PuzzleKeypad=function(a){if("undefined"===typeof a||null===a||"undefined"===typeof a.DIV||WAVE.strEmpty(a.Image))throw"PuzzleKeypad.ctor(init.DIV, init.Image)";var b=this;WAVE.extend(b,WAVE.EventManager);var c=WAVE.genRndKey(4),f=a.DIV,d=WAVE.strEmpty(a.Help)?"Please enter the following security information by touching the symbols below":a.Help,m=WAVE.strEmpty(a.Question)?"":a.Question,k=[],h=a.Image,n=null,l=null,g=null,u=null;this.destroy=function(){f.innerHTML=""};this.value=function(){return k};
this.jsonValue=function(){return JSON.stringify(k)};this.help=function(a){if("undefined"===typeof a)return d;d=WAVE.strEmpty(a)?"Please enter the following security information by touching the symbols below":a;n.innerHTML=d};this.question=function(a){if("undefined"===typeof a)return m;m=WAVE.strEmpty(a)?"":a;l.innerHTML=m};this.image=function(a){if("undefined"===typeof a)return h;h=WAVE.strEmpty(a)?"":a;u.src=h+"&req="+WAVE.genRndKey()};(function(){var a="pzl_"+c+"_"+WAVE.genAutoincKey("_puzzle#-?Keypad@Elements"),
a={hid:"divHelp_"+a,qid:"divQuestion_"+a,tid:"tbValue_"+a,bid:"btnClear_"+a,iid:"img_"+a,help:d,question:m,img:h+"&req="+WAVE.genRndKey(),clear:"Clear"},B=WAVE.strTemplate("<div class='wvPuzzleHelp'     id='@hid@'>@help@</div><div class='wvPuzzleQuestion' id='@qid@'>@question@</div><div class='wvPuzzleInputs'> <input id='@tid@' placeholder='\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7' type='text' disabled /><button id='@bid@'>@clear@</button> </div><div class='wvPuzzleImg'> <img id='@iid@' src='@img@'/></div>",
a);f.innerHTML=B;$("#"+a.bid).click(function(a){a.preventDefault();g.value="";k=[];b.eventInvoke(e.EVT_PUZZLE_KEYPAD_CHANGE,k)});$("#"+a.iid).click(function(a){var c=$(this).offset();k.push({x:Math.round(a.pageX-c.left),y:Math.round(a.pageY-c.top)});g.value+="*";b.eventInvoke(e.EVT_PUZZLE_KEYPAD_CHANGE,k)});n=WAVE.id(a.hid);l=WAVE.id(a.qid);g=WAVE.id(a.tid);WAVE.id(a.bid);u=WAVE.id(a.iid)})()};var w=function(a){function b(a){return p.wFirst(function(b){return b.element===a})}function c(a){return x.wFirst(function(b){return b.name===
a})}function f(a,b){var d=c(a);null===d?(d={name:a,cfg:b||{},elementInfos:[]},u.push(d)):b&&(d.cfg=b);return d}function d(a){var c=a.currentTarget,f=b(c);null!==f&&(a=f.ruler.onMouseMove(a),h(c,f.scopeInfos,a),c=WAVE.arrayWalkable(f.scopeInfos).wSelect(function(a){return a.name}).wToArray(),g.eventInvoke(e.EVT_RULER_MOUSE_MOVE,a,c))}function m(a){a=a.currentTarget;var c=b(a);null!==c&&(c.ruler.onMouseEnter(),n(a,c.scopeInfos),a=WAVE.arrayWalkable(c.scopeInfos).wSelect(function(a){return a.name}).wToArray(),
g.eventInvoke(e.EVT_RULER_MOUSE_ENTER,a))}function k(a){var c=a.currentTarget,f=b(c);null!==f&&(f.ruler.onMouseLeave(a),l(c,f.scopeInfos),a=WAVE.arrayWalkable(f.scopeInfos).wSelect(function(a){return a.name}).wToArray(),g.eventInvoke(e.EVT_RULER_MOUSE_LEAVE,a))}function h(a,b,c){c={scope:null,masterRes:c};for(var f in b){var d=b[f];c.scope=d;for(var e in d.elementInfos){var m=d.elementInfos[e];if(a!==m.element)m.ruler.onScopeMouseMove(c)}}}function n(a,b){for(var c in b){var f=b[c],d;for(d in f.elementInfos){var e=
f.elementInfos[d];if(a!==e.element)e.ruler.onScopeMouseEnter(f)}}}function l(a,b){for(var c in b){var f=b[c],d;for(d in f.elementInfos){var e=f.elementInfos[d];if(a!==e.element)e.ruler.onScopeMouseLeave(f)}}}var g=this;WAVE.extend(this,WAVE.EventManager);var u=[],x=WAVE.arrayWalkable(u),q=[],p=WAVE.arrayWalkable(q);this.set=function(a){var c=a.element,e=a.elementCfg;a=f(a.scopeName||"",a.scopeCfg);var h=b(c);if(null===h){var h={element:c,cfg:e||{},scopeInfos:[]},n=$(c);n.bind("mouseenter",m);n.bind("mouseleave",
k);n.bind("mousemove",d);c=new v(c,e);h.ruler=c;q.push(h)}else e&&(h.cfg=e,h.ruler.cfg(e));c=h;-1===a.elementInfos.indexOf(c)&&a.elementInfos.push(c);-1===c.scopeInfos.indexOf(a)&&c.scopeInfos.push(a)};this.unset=function(a){var f=a.element,e=a.scopeName,h=b(a.element);null!==h&&(e?(a=c(e),null!==a&&WAVE.arrayDelete(a.elements,h),WAVE.arrayDelete(h.scopes,a)):(WAVE.arrayWalkable(h.scopeInfos).wEach(function(a){WAVE.arrayDelete(a.elementInfos,h)}),h.scopeInfos.splice(0,h.scopeInfos.length)),0===h.scopeInfos.length&&
(f=$(f),f.unbind("mouseenter",m),f.unbind("mouseleave",k),f.unbind("mousemove",d),WAVE.arrayDelete(q,h)))};this.setScope=function(a,b){f(a,b)};this.mouseMove=function(a,b){var c=x.wWhere(function(a){return-1!==b.indexOf(a.name)}).wToArray();h(null,c,a)};this.mouseEnter=function(a){var b=x.wWhere(function(b){return-1!==a.indexOf(b.name)}).wToArray();n(null,b)};this.mouseLeave=function(a){var b=x.wWhere(function(b){return-1!==a.indexOf(b.name)}).wToArray();l(null,b)}},v=function(a,b){function c(a,b,
f){a=new WAVE.arrayWalkable([v,p,t,w,r,null,L,y,F,C,null,E]);f?a.wEach(function(a){null!==a&&"hidden"===a.style.visibility&&(a.style.visibility="visible")}):a.wEach(function(a){null!==a&&"hidden"!==a.style.visibility&&(a.style.visibility="hidden")})}function f(){x||(v=document.createElement("div"),v.id="WAVE_GUI_Ruler",v.innerHTML="Hint DIV",v.className=l,v.style.position="absolute",document.body.appendChild(v),w=m(!0),p=m(!0),F=m(!1),L=m(!1),t=m(!1),r=m(!1),y=m(!0),C=m(!0),x=!0)}function d(){x&&
(k(v),v=null,k(w),w=null,k(p),p=null,k(F),F=null,k(L),L=null,k(t),t=null,k(r),r=null,k(y),y=null,k(C),C=null,x=!1)}function e(){q&&(k(E),E=null,q=!1)}function m(a){var b=document.createElement("div");a?b.style.height="1px":b.style.width="1px";b.style.position="absolute";b.className=g;document.body.appendChild(b);return b}function k(a){null!==a&&document.body.removeChild(a)}var h=this,n=b||{};this.cfg=function(a){"undefined"!==typeof a&&a!==b&&(n=a);return n};var l=n.hintCls||"wvRulerHint",g=n.sightCls||
"wvRulerSight",u=n.sightSize||8,x=!1,q=!1,v=null,p=null,t=null,w=null,r=null,L=null,y=null,F=null,C=null,E=null;this.onMouseEnter=function(a){f()};this.onMouseLeave=function(a){d()};this.onMouseMove=function(b){e();f();var d;if(n.parentRc)d=n.parentRc;else{var m=a.getBoundingClientRect();d=WAVE.Geometry.toRectWH(m.left,m.top,m.width,m.height)}var m=b.clientX-d.left(),k=b.clientY-d.top();v.style.left=b.clientX+"px";v.style.top=b.clientY+"px";var h=null,h=n.getTxt?n.getTxt({clientPoint:new WAVE.Geometry.Point(b.clientX,
b.clientY),divHint:v}):m+", "+k;v.innerHTML=h;for(var h=v.getBoundingClientRect(),h=WAVE.Geometry.toRectWH(h.left,h.top,h.width,h.height),l=b.clientX,g=b.clientY,x=d,q=null,H=h.square(),ma=Number.MAX_VALUE,ga=0;ga<2*Math.PI;ga+=Math.PI/4){var ba=WAVE.Geometry.rotateRectAroundCircle(l,g,20,h.width(),h.height(),ga),W=WAVE.Geometry.overlapAreaRect(x,ba),W=H-W;if(0===W){q=ba;break}W<ma&&(ma=W,q=ba)}h=q.topLeft();v.style.left=h.x()+"px";v.style.top=h.y()+"px";h=b.clientX;l=b.clientY;g=h-u;g<d.left()&&
(g=d.left());x=h+u;x>d.right()&&(x=d.right());q=l-u;q<d.top()&&(q=d.top());H=l+u;H>d.bottom()&&(H=d.bottom());p.style.left=d.left()+"px";p.style.width=g-d.left()+"px";p.style.top=l+"px";w.style.left=x+"px";w.style.width=d.right()-x+"px";w.style.top=l+"px";t.style.top=d.top()+"px";t.style.height=q-d.top()+"px";t.style.left=h+"px";r.style.top=H+"px";r.style.height=d.bottom()-H+"px";r.style.left=h+"px";L.style.top=q+"px";L.style.height=H-q+"px";L.style.left=g+"px";F.style.top=q+"px";F.style.height=H-
q+"px";F.style.left=x+"px";y.style.left=g+"px";y.style.width=x-g+"px";y.style.top=q+"px";C.style.left=g+"px";C.style.width=x-g+"px";C.style.top=H+"px";m=n.getMasterInfo?n.getMasterInfo({clientPoint:new WAVE.Geometry.Point(b.clientX,b.clientY)}):{elementRcPoint:new WAVE.Geometry.Point(m,k),isInParentRc:!0};c(b.clientX,b.clientY,m.isInParentRc);return m};this.onScopeMouseEnter=function(a){q||(E=m(!1),q=!0)};this.onScopeMouseLeave=function(a){e()};this.onScopeMouseMove=function(a){d();q||(E=m(!1),q=
!0);var b=h.getParentRc(),f,e,k;n.getSlaveInfo?(e=n.getSlaveInfo({masterRes:a.masterRes}),k=e.isInParentRc,f=e.clientPoint.x(),e=e.clientPoint.y()):(e=a.masterRes.elementRcPoint,k=!0,f=b.left()+e.x(),e=b.top()+e.y());c(f,e,a.masterRes.isInParentRc&&k);E.style.top=b.top()+"px";E.style.height=b.height()+"px";E.style.left=f+"px"};this.getParentRc=function(){var b;n.parentRc?b=n.parentRc:(b=a.getBoundingClientRect(),b=WAVE.Geometry.toRectWH(b.left,b.top,b.width,b.height));return b}},a=null;e.rulerSet=
function(b){null===a&&(a=new w);a.set(b)};e.rulerUnset=function(b){null!==a&&a.unset(b)};e.rulerSetScope=function(b,c){null===a&&(a=new w);a.setScope(b,c)};e.rulerMouseMove=function(b,c){null!==a&&a.mouseMove(b,c)};e.rulerMouseEnter=function(b){null!==a&&a.mouseEnter(b)};e.rulerMouseLeave=function(b){null!==a&&a.mouseLeave(b)};e.rulerEventBind=function(b,c){null===a&&(a=new w);a.eventBind(b,c)};e.WindowConnector=function(a){a=a||{};var b=this,c=a.wnd||window,f=[],d=WAVE.arrayWalkable(f);this.connectedWindows=
function(){return WAVE.arrayShallowCopy(f)};this.openWindow=function(a){var c=window.open(a||window.location.href);d.wEach(function(a){a.Connector.addWindow(c)});b.addWindow(c)};this.closeCurrentWindow=function(){d.wEach(function(a){a.Connector.removeWindow(c)})};this.addWindow=function(a){f.push(a.window)};this.removeWindow=function(a){WAVE.arrayDelete(f,a)};this.callWindowFunc=function(a){var c;d.wEach(function(b){b.closed?(c||(c=[]),c.push(b)):a(b)});if(c){var f=WAVE.arrayWalkable(c);f.wEach(function(a){b.removeWindow(a)});
f.wEach(function(a){d.wEach(function(b){b.Connector.removeWindow(a)})})}};this.logMsg=function(a){console.log(a)};if(c.opener&&c.opener.Connector){b.addWindow(c.opener);a=c.opener.Connector.connectedWindows();for(var e in a){var m=a[e];m!==c&&(m.closed||b.addWindow({window:m}))}}};e.connectorEnsure=function(a){a=a||window;a.Connector||(a.Connector=new e.WindowConnector({wnd:a}))};var b=0;e.Tree=function(a){function c(a,b){var d;l===e.TREE_SELECTION_SINGLE?(!0===b&&u.getDescendants().wEach(function(b){if(b.node!==
a&&!0===b.node.selected()){var c={phase:e.EVT_PHASE_BEFORE,node:b.node,value:b.node.selected()};f(e.EVT_TREE_NODE_SELECTION,c);b.node.selected(!1,!0);b={phase:e.EVT_PHASE_AFTER,node:b.node,value:b.node.selected()};f(e.EVT_TREE_NODE_SELECTION,b)}}),d={phase:e.EVT_PHASE_AFTER,node:a,value:b},f(e.EVT_TREE_NODE_SELECTION,d)):l===e.TREE_SELECTION_MULTI&&(d={phase:e.EVT_PHASE_AFTER,node:a,value:b},f(e.EVT_TREE_NODE_SELECTION,d))}function f(a,b){g||m.eventInvoke(a,b)}var d=function(a){a=a||{};var g=this;
b++;var x="tvn_"+b,q=a.parent||null;if(null!==q&&q.tree()!==m)throw"Tree.Node.ctor(wrong parent tree)";this.parent=function(){return q};var B,v,p,t,w;this.__divChildren=function(){return null!==q?w:k};var r="undefined"!==typeof a.id?a.id.toString():b.toString();this.id=function(){return r};var X="undefined"===typeof a.expandedContent?m.DEFAULT_NODE_EXPANDED_CONTENT:a.expandedContent;this.expandedContent=function(a){if("undefined"===typeof a)return X;X=a;v&&(v.innerHTML=A?X:y)};var y="undefined"===
typeof a.collapsedContent?m.DEFAULT_NODE_COLLAPSED_CONTENT:a.collapsedContent;this.collapsedContent=function(a){if("undefined"===typeof a)return y;y=a;v&&(v.innerHTML=A?X:y)};this.path=function(){return null===q?"":q===u?r:q.path()+"/"+r};this.level=function(){return null===q?-1:q===u?0:q.level()+1};this.html=function(a){if(null===q)return null;if("undefined"===typeof a)return t.innerHTML;var b={phase:e.EVT_PHASE_BEFORE,node:g,oldContent:t.innerHTML,newContent:a,abort:!1};f(e.EVT_TREE_NODE_CONTENT,
b);!0!==b.abort&&(t.innerHTML=a,f(e.EVT_TREE_NODE_CONTENT,{phase:e.EVT_PHASE_AFTER,node:g,oldContent:t.innerHTML,newContent:a}))};var C=!1!==a.selectable;this.selectable=function(a){if("undefined"===typeof a)return C;C=a;E&&!a&&g.selected(!1)};var E=!0===a.selected;this.selected=function(a,b){if(l===e.TREE_SELECTION_NONE)return!1;if("undefined"===typeof a)return E;if(a!==E&&(C||!C&&!a)){if(!0!==b){var d={phase:e.EVT_PHASE_BEFORE,node:g,value:a,abort:!1};f(e.EVT_TREE_NODE_SELECTION,d);if(!0===d.abort)return}E=
a;t.className=E?g.wvTreeNodeOwnSelected():g.wvTreeNodeOwn();!0!==b&&c(g,a)}};this.wvTreeNode=function(a){if("undefined"===typeof a)return B.className;B.className=a};this.wvTreeNodeButton=function(a){if("undefined"===typeof a)return v.className;v.className=a};this.wvTreeNodeContent=function(a){if("undefined"===typeof a)return p.className;p.className=a};var D=a.wvTreeNodeButtonExpanded||h.wvTreeNodeButtonExpanded;this.wvTreeNodeButtonExpanded=function(a){if("undefined"===typeof a)return D||h.wvTreeNodeButtonExpanded;
a!==D&&(D=a,v.className=A?g.wvTreeNodeButtonExpanded():g.wvTreeNodeButtonCollapsed())};var T=a.wvTreeNodeButtonCollapsed||h.wvTreeNodeButtonCollapsed;this.wvTreeNodeButtonCollapsed=function(a){if("undefined"===typeof a)return T||h.wvTreeNodeButtonCollapsed;a!==T&&(T=a,v.className=A?g.wvTreeNodeButtonExpanded():g.wvTreeNodeButtonCollapsed())};var la=a.wvTreeNodeOwn||h.wvTreeNodeOwn;this.wvTreeNodeOwn=function(a){if("undefined"===typeof a)return la||h.wvTreeNodeOwn;a!==la&&(la=a,t.className=E?g.wvTreeNodeOwnSelected():
g.wvTreeNodeOwn())};var z=a.wvTreeNodeOwnSelected||h.wvTreeNodeOwnSelected;this.wvTreeNodeOwnSelected=function(a){if("undefined"===typeof a)return z||h.wvTreeNodeOwnSelected;a!==z&&(z=a,t.className=E?g.wvTreeNodeOwnSelected():g.wvTreeNodeOwn())};this.wvTreeNodeChildren=function(a){if("undefined"===typeof a)return w.className;w.className=a};var ea=a.childrenDisplayVisible||n;this.childrenDisplayVisible=function(a){if("undefined"===typeof a)return ea;a!==ea&&(ea=a,A&&(w.style.display=ea))};var Z=a.data;
this.data=function(a){if("undefined"===typeof a)return Z;if(Z!==a){var b={phase:e.EVT_PHASE_BEFORE,node:g,oldData:Z,newData:a,abort:!1};f(e.EVT_TREE_NODE_DATA,b);!0!==b.abort&&(Z=a,f(e.EVT_TREE_NODE_DATA,{phase:e.EVT_PHASE_AFTER,node:g,oldData:Z,newData:a}))}};var A=!0===a.expanded;this.expanded=function(a){if("undefined"===typeof a)return A;if(null!==q&&A!==a){var b={phase:e.EVT_PHASE_BEFORE,node:g,value:a,abort:!1};f(e.EVT_TREE_NODE_EXPANSION,b);!0!==b.abort&&(A=a,v.className=A?g.wvTreeNodeButtonExpanded():
g.wvTreeNodeButtonCollapsed(),v.innerHTML=a?X:y,w.style.display=a?ea:"none",f(e.EVT_TREE_NODE_EXPANSION,{phase:e.EVT_PHASE_AFTER,node:g,value:a}))}};var Q=[];this.children=function(){return WAVE.arrayShallowCopy(Q)};this.__children=function(){return Q};this.tree=function(){return m};this.getDescendants=function(){return g.__getDescendants(0)};this.__getDescendants=function(a){var b=function(){var b=WAVE.arrayWalkable(Q).getWalker(),c=null,f=0,d=-1;this.reset=function(){b=WAVE.arrayWalkable(Q).getWalker();
f=0;d=-1};this.moveNext=function(){function e(){if(b.moveNext())return d++,f=1,!0;f=0;return!1}if(0===f)return e();if(1===f)if(c=b.current().__getDescendants(a+1).getWalker(),c.moveNext())f=2;else return e();else if(2===f&&!c.moveNext())return e();return!0};this.current=function(){if(1===f)return{level:a,nodeNum:d,node:b.current()};if(2===f)return c.current()}},c={getWalker:function(){return new b},tree:m};WAVE.extend(c,WAVE.Walkable);return c};this.getChildIdx=function(a,b){return b?g.getDescendants(0).wFirstIdx(function(b){return WAVE.strSame(b.node.id(),
a)}):WAVE.arrayWalkable(Q).wFirstIdx(function(b){return WAVE.strSame(b.id(),a)})};this.getChild=function(a,b){if(b){var c=g.getDescendants(0).wFirst(function(b){return WAVE.strSame(b.node.id(),a)});return c?c.node:null}return WAVE.arrayWalkable(Q).wFirst(function(b){return WAVE.strSame(b.id(),a)})};this.navigate=function(a){function b(a){return function(b){return b.id()===a}}if("undefined"===typeof a||null===a)return null;if(!WAVE.isArray(a)){if(WAVE.strEmpty(a))return null;a=a.split(/[\\/]+/)}var c=
null,f=WAVE.arrayWalkable(Q),d;for(d in a){c=f.wFirst(b(a[d]));if(null===c)return null;f=WAVE.arrayWalkable(c.__children())}return c};this.unveil=function(){var a=q;if(null!==a)for(;null!==a;){var b=a.parent();null!==b&&a.expanded(!0);a=b}};this.addChild=function(a){"undefined"===typeof a&&(a={});var b={phase:e.EVT_PHASE_BEFORE,parentNode:g,childNodeInit:a,abort:!1};f(e.EVT_TREE_NODE_ADD,b);if(!0!==b.abort)return a.parent=g,a=new d(a),Q.push(a),null!==q&&(v.style.visibility="visible"),f(e.EVT_TREE_NODE_ADD,
{phase:e.EVT_PHASE_AFTER,parentNode:g,childNode:a}),a};this.__removeChild=function(a){WAVE.arrayDelete(Q,a);0===Q.length&&null!==q&&(v.style.visibility="hidden")};this.remove=function(){if(null===q)console.error("Root node couldn't be removed");else{var a={phase:e.EVT_PHASE_BEFORE,parentNode:q,childNode:g,abort:!1};f(e.EVT_TREE_NODE_REMOVE,a);!0!==a.abort&&(B.parentNode.removeChild(B),q.__removeChild(g),f(e.EVT_TREE_NODE_REMOVE,{phase:e.EVT_PHASE_AFTER,parentNode:q,childNode:g}))}};this.removeAllChildren=
function(){var a=WAVE.arrayShallowCopy(Q),b;for(b in a)a[b].remove()};if(null!==q){var J={id:x,wvTreeNode:a.wvTreeNode||h.wvTreeNode,wvTreeNodeContent:a.wvTreeNodeContent||h.wvTreeNodeContent,wvTreeNodeOwn:a.wvTreeNodeOwn||h.wvTreeNodeOwn,wvTreeNodeOwnSelected:a.wvTreeNodeOwnSelected||h.wvTreeNodeOwnSelected,wvTreeNodeChildren:a.wvTreeNodeChildren||h.wvTreeNodeChildren};J.wvTreeNodeButton=A?g.wvTreeNodeButtonExpanded():g.wvTreeNodeButtonCollapsed();var ia=WAVE.strTemplate("<div id='exp_@id@' class='@wvTreeNodeButton@'></div><div id='content_@id@' class='@wvTreeNodeContent@'>  <div id='own_@id@' class='@wvTreeNodeOwn@'></div>  <div id='children_@id@' class='@wvTreeNodeChildren@'>  </div></div>",
J),R=q.__divChildren();B=document.createElement("div");B.id="root_"+x;B.className=J.wvTreeNode;B.innerHTML=ia;R.appendChild(B);p=WAVE.id("content_"+x);t=WAVE.id("own_"+x);w=WAVE.id("children_"+x);t.innerHTML=a.html;t.className=E?g.wvTreeNodeOwnSelected():g.wvTreeNodeOwn();$(t).click(function(){g.selected(!E)});a=!0===a.expanded;v=WAVE.id("exp_"+x);v.innerHTML=A?X:y;v.style.visibility="hidden";$(v).click(function(){g.expanded(!A)});w.style.display=a?ea:"none"}};if("undefined"===typeof a||null===a||
"undefined"===typeof a.DIV||null===a.DIV)throw"Tree.ctor(init.DIV)";var m=this;WAVE.extend(m,WAVE.EventManager);this.DEFAULT_NODE_EXPANDED_CONTENT="-";this.DEFAULT_NODE_COLLAPSED_CONTENT="+";var k=a.DIV,h={wvTreeNode:a.wvTreeNode||e.CLS_TREE_NODE,wvTreeNodeButtonExpanded:a.wvTreeNodeButtonExpanded||e.CLS_TREE_NODE_BUTTON_EXPANDED,wvTreeNodeButtonCollapsed:a.wvTreeNodeButtonCollapsed||e.CLS_TREE_NODE_BUTTON_COLLAPSED,wvTreeNodeContent:a.wvTreeNodeContent||e.CLS_TREE_NODE_CONTENT,wvTreeNodeOwn:a.wvTreeNodeOwn||
e.CLS_TREE_NODE_OWN,wvTreeNodeOwnSelected:a.wvTreeNodeOwnSelected||e.CLS_TREE_NODE_OWN_SELECTED,wvTreeNodeChildren:a.wvTreeNodeChildren||e.CLS_TREE_NODE_CHILDREN},n=a.childrenDisplayVisible||"block",l=a.treeSelectionType||e.TREE_SELECTION_NONE;this.treeSelectionType=function(a){if("undefined"===typeof l)return l;l=a};this.selectedNodes=function(a){if("undefined"===typeof a)return u.getDescendants().wWhere(function(a){return!0===a.node.selected()});if(null===a)throw"val couldn't be null";var b;if(WAVE.isFunction(a.wAny))b=
a;else if(WAVE.isArray(a))b=WAVE.arrayWalkable(a);else throw"val type is invalid";u.getDescendants().wEach(function(a){a.node.selected(b.wAny(function(b){return b===a.node.id()}),!0)})};var g=!0===a.supressEvents;this.supressEvents=function(a){if("undefined"===typeof a)return g;g=a};var u=new d;this.root=function(){return u}};var f=0;e.ObjectInspector=function(a,b){function c(b){for(var f=b.target.getAttribute("objpath").split(/\//),d=a,e=0;e<f.length-1;e++)d=d[f[e]];d[f[f.length-1]]=b.target.value}
function d(a,b,e){var m=Object.keys(b),h,n;for(n in m){var l=m[n],g=b[l];if(null!==g&&"object"!==typeof g){var q="objinsp_edit_"+f++;h=WAVE.strTemplate('<div class="@cls@">  <label for="@id@">@key@</label>  <input type="textbox" id="@id@" value="@val@" objpath="@objpath@"></div>',{id:q,key:l,val:g,objpath:e?e+"/"+l:l,cls:k});h=a.addChild({html:h});q=WAVE.id(q);q.objpath=h.path();q.addEventListener("input",c)}else h=a.addChild({html:l}),d(h,g,e?e+"/"+l:l)}}WAVE.extend(this,WAVE.EventManager);var m=
new e.Tree({DIV:b.div});b=b||{};var k=b.wvObjectInspectorEditor||e.CLS_OBJECTINSPECTOR_EDITOR;this.wvObjectInspectorEditor=function(a){if("undefined"===typeof a)return k;k=a};d(m.root(),a,"")};e.MultiLineTextBox=function(a){if("undefined"===typeof a||null===a||"undefined"===typeof a.DIV||null===a.DIV)throw"MultiLineTextBox.ctor(init.DIV)";if(WAVE.strEmpty(a.id))throw"MultiLineTextBox.ctor(init.id)";var b=this;WAVE.extend(b,WAVE.EventManager);var c=a.DIV,f=a.id,d=WAVE.strAsBool(a.addLabel,!0),m="shdw_div_"+
f,h=WAVE.strDefault(a.placeholder),k=WAVE.strAsBool(a.readonly,!1),n=WAVE.strAsBool(a.disabled,!1),l=WAVE.strDefault(a.value);a=WAVE.tryParseJSON(a.attrs).obj;c.innerHTML=WAVE.strHTMLTemplate("<div id='@shdwDivId@' style='position: fixed;visibility: hidden;height: auto;width: auto;'></div>"+(d?"<label for='@id@'>@placeholder@</label>":"")+"<textarea id='@id@' @disabled@ @readonly@ style='resize: none' placeholder='@placeholder@' title='@placeholder@'></textarea>",{shdwDivId:m,id:f,disabled:n?"disabled":
"",readonly:k?"readonly":"",placeholder:h});var g=WAVE.id(f),q=WAVE.id(m);g.onresize=function(){q.style.maxWidth=WAVE.styleOf(g,"width")};g.style.overflow="hidden";for(var u in a)g.setAttribute(u,a[u]);q.innerText=g.value=l;q.style.maxWidth=WAVE.styleOf(g,"width");q.style.font=WAVE.styleOf(g,"font");q.style.minHeight=WAVE.styleOf(g,"height");q.style.paddingTop=WAVE.styleOf(g,"padding-top");q.style.paddingRight=WAVE.styleOf(g,"padding-right");q.style.paddingBottom=WAVE.styleOf(g,"padding-bottom");
q.style.paddingLeft=WAVE.styleOf(g,"padding-left");q.style.wordWrap=WAVE.styleOf(g,"word-wrap");q.style.wordSpacing=WAVE.styleOf(g,"word-spacing");q.style.whiteSpace=WAVE.styleOf(g,"white-space");q.style.borderSpacing=WAVE.styleOf(g,"border-spacing");q.style.letterSpacing=WAVE.styleOf(g,"letter-spacing");q.style.lineHeight=WAVE.styleOf(g,"line-height");q.style.boxSizing=WAVE.styleOf(g,"box-sizing");q.style.border=WAVE.styleOf(g,"border");q.style.borderWidth=WAVE.styleOf(g,"border-width");q.style.borderRadius=
WAVE.styleOf(g,"border-radius");q.style.textIndent=WAVE.styleOf(g,"text-indent");var x=function(a){q.innerText=WAVE.strEmpty(a.value)?"W":a.value.replace(/\r\n|\r|\n/g,"\n ");a.style.height=q.clientHeight+"px"};g.onchange=function(a){x(this);q.style.maxWidth=WAVE.styleOf(g,"width");b.eventInvoke(e.EVT_MULTI_LINE_TEXT_UPDATED,{phase:e.EVT_PHASE_AFTER,target:a.target,value:this.value})};g.onkeydown=g.onkeyup=function(a){x(this)};x(g);return b};var k=0;e.PropSetEditor=function(a){function b(a,c){return WAVE.strLocalize(Y,
"PSEditor","ps",WAVE.strDefault(D[a],c))}function c(){var a=[],b;for(b in y)WAVE.has(u,y[b])||a.push(y[b]);return a}function f(){q.innerHTML=WAVE.strHTMLTemplate("<input id='@outerId@' type='hidden' name='@outerName@'/><div id='@divEditorsContainerId@' class='@divEditorsContainerClass@'></div>"+(v||t?"":(w?"<input type='button' id='@btnAddId@' class='@btnAddClass@' value='@add@' />":"")+(p?"<input type='button' id='@btnRawId@' class='@btnRawClass@' value='@raw@' />":"")+(r?"<input type='button' id='@btnClearId@' class='@btnClearClass@' value='@clear@' />":
"")),{outerId:E.outputHiddenId,outerName:WAVE.strDefault(x,""),divEditorsContainerId:E.divEditorsContainerId,divEditorsContainerClass:e.CLS_PS_DIV_LANGS_CONTAINER,btnAddId:E.btnAddId,btnAddClass:F.addBtnCls,btnRawId:E.btnRawId,btnRawClass:F.rawBtnCls,btnClearId:E.btnClearId,btnClearClass:F.clearBtnCls,add:D.btnAdd,raw:D.btnRaw,clear:D.btnClear});v||t||!w||0!==c().length||(WAVE.id(E.btnAddId).disabled=!0);v||t||(w&&0<c().length&&(WAVE.id(E.btnAddId).onclick=function(){var a=this,b=c(),f="",d;for(d in b)f+=
"<option>"+b[d]+"</option>";var m="newIso_"+C;e.showConfirmationDialog(n()+D.addTitle,"<div>"+D.addBody+"</div><div><select class='"+e.CLS_PS_LANG_SELECTOR+"' id='"+m+"'>"+f+"</select></div>",[e.DLG_OK,e.DLG_CANCEL],function(c,f){if(f===e.DLG_OK){var d=WAVE.id(m).value;l.addLang(d);1===b.length&&(a.disabled=!0)}return!0},{btnCls:F.modalBtnCls});WAVE.id(m).focus()}),p&&(WAVE.id(E.btnRawId).onclick=function(){var a="raw"+C;e.showConfirmationDialog(n()+D.rawTitle,"<div>"+D.rawBody+"</div><div><textarea style='width: 70vw; height: 70vh;' class='"+
e.CLS_PS_TEXTAREA_RAW_EDITOR+"' type='text' id='"+a+"'></textarea></div>",[e.DLG_OK,e.DLG_CANCEL],function(b,c){if(c===e.DLG_OK){var f=WAVE.id(a).value,d=WAVE.tryParseJSON(f);if(d.ok){if(WAVE.checkKeysUnique(d.obj))return e.toast(WAVE.strLocalize(Y,"PSEditor","ps","JSON is valid, but some keys are duplicated"),"error"),!1;l.content(f)}else return e.toast(WAVE.strLocalize(Y,"PSEditor","ps","Invalid JSON"),"error"),!1}return!0},{btnCls:F.modalBtnCls});WAVE.id(a).value=l.content();WAVE.id(a).focus()}),
r&&(WAVE.id(E.btnClearId).onclick=function(){e.showConfirmationDialog(n()+D.clearConfirmTitle,"<div>"+D.clearConfirmBody+"</div>",[e.DLG_OK,e.DLG_CANCEL],function(a,b){b===e.DLG_OK&&l.clear();return!0},{btnCls:F.modalBtnCls})}))}function d(a){var b=C+"_"+a,c=WAVE.id(E.divEditorsContainerId),f=E.divDeleteButtonId+"_"+a,m=E.divLangNameId+"_"+a,h=E.divTextTemplateId+"_"+a;c.insertAdjacentHTML("beforeend",WAVE.strHTMLTemplate("<fieldset id='@langId@'><legend id='@isoLabelId@' class='@langClass@'></legend><div class='@textEditorsContainerClass@' id='@controlContainerId@'></div>"+
(!r||v||t?"":"<input type='button' id='@deleteButtonId@' class='@delCls@' value='@delText@'/>")+"</fieldset>",{langId:b,controlContainerId:h,deleteButtonId:f,isoLabelId:m,langClass:e.CLS_PS_DIV_LANG_NAME,labelContainerClass:e.CLS_PS_LABEL_CONTAINER,textEditorsContainerClass:e.CLS_PS_INPUT_CONTAINER,delCls:F.delBtnCls,disabled:t?"disabled":"",readonly:v?"readonly":"",delText:D.btnDel}));WAVE.id(m).innerText=a;(new e.ObjectEditor({DIV:WAVE.id(h),meta:{type:"object",schema:A},content:u[a],disabled:t,
readonly:v})).eventBind(e.EVT_OBJECT_EDITOR_UPDATED,function(b,c){u[a]=c;l.content(JSON.stringify(u),!1)});!r||v||t||(WAVE.id(f).onclick=function(){e.showConfirmationDialog(n()+D.delConfirmTitle+" : "+a.toUpperCase(),"<div>"+D.delConfirmBody+"</div>",[e.DLG_OK,e.DLG_CANCEL],function(b,c){c===e.DLG_OK&&l.deleteLang(a);return!0},{btnCls:F.modalBtnCls})})}function m(){if(WAVE.isObject(u))for(var a in u)d(a)}function h(){for(;q.hasChildNodes();)q.removeChild(q.lastChild);f();m();g()}function g(){null!==
x&&(WAVE.id(E.outputHiddenId).value=l.content())}function n(){return WAVE.strEmpty(L)?"":L+": "}if("undefined"===typeof a||null===a||"undefined"===typeof a.DIV||null===a.DIV)throw"PropSetEditor.ctor(init.DIV)";var l=this;WAVE.extend(l,WAVE.EventManager);k++;var q=a.DIV,u=WAVE.memberClone(WAVE.tryParseJSON(a.content).obj),x=WAVE.strDefault(a.outputFormFieldName,null),v=WAVE.strAsBool(a.readonly,!1),t=WAVE.strAsBool(a.disabled,!1),p=WAVE.strAsBool(a.canRaw,!0),w=WAVE.strAsBool(a.canAdd,!0),r=WAVE.strAsBool(a.canDel,
!0),y=WAVE.mergeArrays(["eng"],a.sets,function(a,b){return a.toLowerCase()===b.toLowerCase()},function(a){return a.toLowerCase()}),Y=WAVE.strDefault(a.local,"eng"),L=WAVE.strDefault(a.title),A=WAVE.get(a,"schema",{n:{type:"text",plh:"Name"},d:{type:"textarea",plh:"Description"}}),F=WAVE.get(a,"btnClasses",{});F.addBtnCls=WAVE.strDefault(F.addBtnCls,e.CLS_PS_BTN_ADD);F.delBtnCls=WAVE.strDefault(F.delBtnCls,e.CLS_PS_BTN_DEL);F.rawBtnCls=WAVE.strDefault(F.rawBtnCls,e.CLS_PS_BTN_RAW);F.clearBtnCls=WAVE.strDefault(F.clearBtnCls,
e.CLS_PS_BTN_CLEAR);F.modalBtnCls=WAVE.strDefault(F.modalBtnCls,"");var C="ps_"+k,E={btnAddId:"addLang_"+C,btnRawId:"rawEdit_"+C,btnClearId:"clearBtn_"+C,divTextTemplateId:"textTemplate_"+C,divEditorsContainerId:"divEditorsContainer_"+C,divDeleteButtonId:"deleteButtonId_"+C,inputId:"_inputId_"+C,divLangNameId:"islLabel_"+C,outputHiddenId:"hidden_"+C},D=WAVE.get(a,"texts",{});D.addTitle=b("add-title","Add New Language");D.addBody=b("add-body","");D.rawTitle=b("raw-title","Raw Edit");D.rawBody=b("raw-body");
D.clearConfirmTitle=b("clear-confirm-title","Confirm Clear");D.clearConfirmBody=b("clear-confirm-body","Clear all language data?");D.delConfirmTitle=b("del-confirm-title","Confirm Delete");D.delConfirmBody=b("del-confirm-body");D.btnDel=b("btn-del","Delete");D.btnAdd=b("btn-add","Add");D.btnRaw=b("btn-raw","Edit Raw");D.btnClear=b("btn-clear","Clear");f();this.DIV=function(){return q};this.jsonContent=function(){return u};this.content=function(a,b){if("undefined"===typeof a)return WAVE.empty(u)?"":
JSON.stringify(u,null,2);var c=WAVE.tryParseJSON(a);if(c.ok){if(b=WAVE.strAsBool(b,!0))for(var f in u)WAVE.removeElem(C+"_"+f);u=WAVE.memberClone(c.obj);b&&m();g();l.eventInvoke(e.EVT_PS_EDITOR_UPDATED,u)}return a};this.title=function(a){if("undefined"===typeof a)return L;L=WAVE.strDefault(a)};this.enable=function(a){if("undefined"===typeof a)return!t;t=!0!==a;h();return a};this.readOnly=function(a){if("undefined"===typeof a)return v;v=!0===a;h();return a};this.canAdd=function(a){if("undefined"===
typeof a)return w;w=!0===a;h();return a};this.canDel=function(a){if("undefined"===typeof a)return r;r=!0===a;h();return a};this.canRaw=function(a){if("undefined"===typeof a)return p;p=!0===a;h();return a};this.addLang=function(a){if(WAVE.strEmpty(a))return!1;a=a.toLowerCase();if(WAVE.has(u,a))return!1;u[a]={};d(a);l.content(JSON.stringify(u));return!0};this.deleteLang=function(a){if(WAVE.strEmpty(a))return!1;a=a.toLowerCase();if(!WAVE.has(u,a))return!1;delete u[a];WAVE.removeElem(C+"_"+a);v||t||(WAVE.id(E.btnAddId).disabled=
!1);l.content(JSON.stringify(u));return!0};this.clear=function(){v||t||(WAVE.id(E.btnAddId).disabled=!1);l.content("{}")};h();return l};var J=0;e.ObjectEditor=function(a){function b(a,c){return WAVE.strLocalize(y,"ObjectEditor","objEd",WAVE.strDefault(C[a],c))}function c(a,b,f,d,h,k,g,l){a=a(m,f,d);a.ok?(l(),m.eventInvoke(e.EVT_OBJECT_EDITOR_VALIDATION_SUCCESS,{phase:e.EVT_PHASE_AFTER,target:b})):(g(),m.eventInvoke(e.EVT_OBJECT_EDITOR_VALIDATION_ERROR,{phase:e.EVT_PHASE_AFTER,target:b}));return a}
function f(){A=[];k.innerHTML=WAVE.strHTMLTemplate("<div id='@contId@'></div><div id='@buttonsId@'></div>",{contId:F.editorContainerId,buttonsId:F.buttonsContainerId});var a=WAVE.id(F.editorContainerId),b=WAVE.id(F.buttonsContainerId);if("array"===l){if(WAVE.isArray(u))for(var c=0;c<u.length;c++)d(c,a)}else for(c in n)new E(c,a);"array"!==l||!w||x||v||WAVE.isArray(u)&&!(u.length<r)||(a="add_"+h,b.insertAdjacentHTML("beforeend","<input type='button' value='"+C.btnAdd+"' id='"+a+"' class='"+D.addBtnCls+
"'/>"),WAVE.id(a).onclick=function(){WAVE.isArray(u)||(u=[]);u.push({});m.content(u,!0);m.validate()});t&&(b.insertAdjacentHTML("beforeend","<input type='button' value='"+C.btnRaw+"' id='"+F.btnRawId+"' class='"+D.addBtnCls+"'/>"),WAVE.id(F.btnRawId).onclick=function(){var a="raw"+h;e.showConfirmationDialog(C.rawTitle,"<div>"+C.rawBody+"</div><div><textarea style='width: 70vw; height: 70vh;' class='"+e.CLS_PS_TEXTAREA_RAW_EDITOR+"' type='text' id='"+a+"'></textarea></div>",[e.DLG_OK,e.DLG_CANCEL],
function(b,c){if(c===e.DLG_OK){var f=WAVE.id(a).value,d=WAVE.tryParseJSON(f);if(d.ok){if("array"!==l&&WAVE.checkKeysUnique(d.obj))return e.toast(WAVE.strLocalize(y,"ObjectEditor","objEd","JSON is valid, but some keys are duplicated"),"error"),!1;m.content(f,!0)}else return e.toast(WAVE.strLocalize(y,"ObjectEditor","objEd","Invalid JSON"),"error"),!1}return!0},{btnCls:D.modalBtnCls});WAVE.id(a).value=m.content();WAVE.id(a).focus()})}function d(a,b){var c=WAVE.memberClone(g);c.type="object";for(var f in c.schema)c.schema[f].index=
a;var h=F.editorContainerId+"_"+a;f="del"+h;b.insertAdjacentHTML("beforeend",WAVE.strHTMLTemplate(z,{divCLS:e.CLS_OBJECT_EDITOR_ARRAY_ITEM,divId:h,BtnId:f,BtnCls:D.delBtnCls,delText:C.btnDel,arrSep:e.CLS_OBJECT_EDITOR_ARRAY_ITEM_SEPARATOR}));c=new e.ObjectEditor({DIV:WAVE.id(h),content:u[a],meta:c,disabled:v,readonly:x});c.eventBind(e.EVT_OBJECT_EDITOR_UPDATED,function(b,c){u[a]=c;m.content(u)});c.eventBind(e.EVT_OBJECT_EDITOR_VALIDATION_ERROR,function(a,b){m.eventInvoke(e.EVT_OBJECT_EDITOR_VALIDATION_ERROR,
{phase:e.EVT_PHASE_AFTER,target:b.target})});c.eventBind(e.EVT_OBJECT_EDITOR_VALIDATION_SUCCESS,function(a,b){m.eventInvoke(e.EVT_OBJECT_EDITOR_VALIDATION_SUCCESS,{phase:e.EVT_PHASE_AFTER,target:b.target})});var c=c.validators(),k;for(k in c)A.push(c[k]);!p||x||v||(WAVE.id(f).onclick=function(){e.showConfirmationDialog(C.delConfirmTitle,"<div>"+C.delConfirmBody+"</div>",[e.DLG_OK,e.DLG_CANCEL],function(b,c){c===e.DLG_OK&&(u.splice(a,1),m.content(u,!0));return!0},{btnCls:D.modalBtnCls})})}if("undefined"===
typeof a||null===a||"undefined"===typeof a.DIV||null===a.DIV)throw"ObjectEditor.ctor(init.DIV)";var m=this;WAVE.extend(m,WAVE.EventManager);J++;var h="wvObjEditor_"+J,k=a.DIV,g=WAVE.get(a,"meta",{}),l=WAVE.strDefault(g.type,"text"),n=WAVE.get(g,"schema",{});WAVE.strDefault(g.plh);WAVE.mergeArrays([],g.sets,function(a,b){return a.toLowerCase()===b.toLowerCase()},function(a){return a.toLowerCase()});var q=g.dflt,u=WAVE.get(a,"content","undefined"!==typeof q?q:{}),x=WAVE.strAsBool(a.readonly,!1),v=WAVE.strAsBool(a.disabled,
!1),t=WAVE.strAsBool(a.canRaw,!1)&&!x&&!v,p=WAVE.strAsBool(a.canDel,!0)&&!x&&!v,w=WAVE.strAsBool(a.canAdd,!0)&&!x&&!v,r=WAVE.intValidPositive(g.maxLength)?g.maxLength:2,Y=WAVE.strDefault(a.outputFormFieldName,""),y=WAVE.strDefault(a.local,"eng"),A=[],F={editorContainerId:"edit_cont_"+h,buttonsContainerId:"edit_buttons_"+h,inputId:"edit_input_"+h,outputHiddenId:"edit_conf_out_"+h,btnRawId:"edit_raw_"+h,btnDelId:"edit_del_"+h},C=WAVE.get(a,"texts",{});C.addTitle=b("add-title","Add New Language");C.addBody=
b("add-body","");C.rawTitle=b("raw-title","Raw Edit");C.rawBody=b("raw-body");C.clearConfirmTitle=b("clear-confirm-title","Confirm Clear");C.clearConfirmBody=b("clear-confirm-body","Clear all language data?");C.delConfirmTitle=b("del-confirm-title","Confirm Delete");C.resetConfirmTitle=b("reset-confirm-title","Confirm Reset");C.delConfirmBody=b("del-confirm-body");C.resetConfirmBody=b("reset-confirm-body");C.btnDel=b("btn-del","Delete");C.btnAdd=b("btn-add","Add");C.btnRaw=b("btn-raw","Edit Raw");
C.btnClear=b("btn-clear","Clear");C.btnReset=b("btn-reset","Reset");C.required=b("err-meg","Required");var E=function(a,b){function f(){var b=R();b.ok&&(u=WAVE.isObject(u)?u:{},u[a]=b.value,m.content(u))}var d=n[a],h=WAVE.get(d,"DIV",b),k=d.dflt,g=WAVE.get(u,a,k),l=WAVE.strDefault(d.type,"text");WAVE.get(d,"schema",{});var q=WAVE.strDefault(d.plh,""),t=WAVE.intValidPositiveOrZero(d.index)?d.index:-1,p=WAVE.mergeArrays([],d.sets,function(a,b){return a.toLowerCase()===b.toLowerCase()},function(a){return a.toLowerCase()}),
B=WAVE.isObject(d.items)?d.items:{},w=WAVE.strAsBool(d.disabled,v),r=WAVE.strAsBool(d.readonly,x),H=WAVE.strAsBool(d.canRaw,!1),Y=WAVE.strAsBool(d.canDel,!0),y=WAVE.strAsBool(d.canAdd,!0),ja=WAVE.strAsBool(d.required,!1),X=WAVE.strDefault(d.cls),D=WAVE.strDefault(d.errMsg,ja?C.required:""),E=WAVE.isFunction(d.showError)?d.showError:function(){WAVE.id(J).innerText=D},ka=WAVE.isFunction(d.hideError)?d.hideError:function(){WAVE.id(J).innerText=""},L=WAVE.isFunction(d.validate)?d.validate:function(a,
b,c){a=!0;if(ja){if("text"===l||"textarea"===l||"radio"===l||"combo"===l)a=!WAVE.strEmpty(b);if("array"===l||"multiple"===l)a=WAVE.isArray(b)&&0<b.length;if("object"===l||"ps"===l)a=WAVE.isObject(b)&&!WAVE.empty(b)}return{ok:a,value:b,index:c}},U=a+F.editorContainerId,z=a+F.inputId,J=U+"_err",T=null,P,M,V,I,R,O;if("text"===l||"textarea"===l||"combo"===l||"check"===l)R=function(){var a=WAVE.id(z);return c(L,a,"check"===l?a.checked:a.value,t,J,D,E,ka)};if("array"===l||"object"===l||"ps"===l)R=function(){return c(L,
T,T.jsonContent(),t,J,D,E,ka)};if("radio"===l||"multiple"===l)R=function(){V=document.getElementsByName(z);M=V.length;O=[];for(P=0;P<M;P++)V[P].checked&&O.push(V[P].value);return c(L,V,"multiple"===l?O:0<O.length?O[0]:null,t,J,D,E,ka)};A.push(R);var ba="<div class='@nodeCont@'>"+(WAVE.strEmpty(q)?"":"<label class='@lblCls@' for='@labelFor@'>@plh@</label>")+"<div class='@errorDivCls@' id='@errorDivId@'></div><div id='@divId@' class='@ccCls@'></div></div>",K=w?"disabled":"",N=r?"readonly":"";h.insertAdjacentHTML("beforeend",
WAVE.strHTMLTemplate(ba,{nodeCont:e.CLS_OBJECT_EDITOR_NODE_CONTAIER+" "+X,labelFor:z,lblCls:ja?"wvRequired":"",plh:q,errorDivCls:"wvError",errorDivId:J,divId:U,ccCls:"array"===l?e.CLS_OBJECT_EDITOR_ARRAY_CONTAIER:"object"===l||"ps"===l?e.CLS_OBJECT_EDITOR_OBJECT_CONTAIER:e.CLS_OBJECT_EDITOR_INPUT_CONTAIER}));h=WAVE.id(U);WAVE.id(J);d={DIV:h,id:z,value:WAVE.strDefault(g),meta:d,content:g,disabled:w,readonly:r,addLabel:!1,placeholder:q,sets:p,canRaw:H,canAdd:y,canDel:Y};if("textarea"===l)T=new e.MultiLineTextBox(d),
T.eventBind(e.EVT_MULTI_LINE_TEXT_UPDATED,function(a,b){f()});else if("object"===l||"array"===l)T=new e.ObjectEditor(d),T.eventBind(e.EVT_OBJECT_EDITOR_UPDATED,function(a,b){f()});else if("ps"===l)T=new e.PropSetEditor(d),T.eventBind(e.EVT_PS_EDITOR_UPDATED,function(a,b){f()});else if("check"===l)h.innerHTML=WAVE.strHTMLTemplate("<input id='@id@' @disabled@ @readonly@ type='checkbox' placeholder='@plh@' title='@plh@' />",{id:z,disabled:K,readonly:N,plh:q,value:WAVE.strDefault(g)}),k=WAVE.id(z),k.checked=
WAVE.strAsBool(g,!1),k.onclick=function(a){f()};else if("multiple"===l){d="";for(I in B)k=z+"_+ "+I,d+=WAVE.strHTMLTemplate("<label for='@id@'>@name@</label>",{id:k,name:WAVE.strDefault(B[I],I)}),d+=WAVE.strHTMLTemplate("<input type='checkbox' @checked@ name='@name@' value='@value@' id='@id@' @disabled@ @readonly@/>",{checked:WAVE.isArray(g)&&WAVE.inArray(g,I)?"checked='checked'":"",name:z,value:I,id:k,disabled:K,readonly:N});h.innerHTML=d;V=document.getElementsByName(z);M=V.length;for(P=0;P<M;P++)V[P].onclick=
f}else if("radio"===l){d="";for(I in B)k=z+"_+ "+I,d+=WAVE.strHTMLTemplate("<label for='@id@'>@name@</label>",{id:k,name:WAVE.strDefault(B[I],I)}),d+=WAVE.strHTMLTemplate("<input type='radio' @checked@ name='@name@' value='@value@' id='@id@' @disabled@ @readonly@/>",{checked:g===I?"checked='checked'":"",name:z,value:I,id:k,disabled:K,readonly:N});h.innerHTML=d;V=document.getElementsByName(z);M=V.length;for(P=0;P<M;P++)V[P].onclick=f}else if("combo"===l){d="<select id='@id@' @disabled@ @readonly@>";
WAVE.strEmpty(k)&&(d+="<option value=''></option>");for(I in B)d+=WAVE.strHTMLTemplate("<option @selected@ value='@value@'>@text@</option>",{selected:g===I?"selected":"",value:I,text:WAVE.strDefault(B[I],I)});h.innerHTML=WAVE.strHTMLTemplate(d+"</select>",{id:z,name:WAVE.strDefault(q,I),disabled:K,readonly:r?"disabled":""});!WAVE.strEmpty(k)&&WAVE.strEmpty(u[a])&&(u[a]=k);WAVE.id(z).onchange=function(a){f()}}else"text"===l&&(h.innerHTML=WAVE.strHTMLTemplate("<input id='@id@' @disabled@ @readonly@ type='text' placeholder='@plh@' title='@plh@' value='@value@'/>",
{id:z,disabled:K,readonly:N,plh:q,value:WAVE.strDefault(g)}),WAVE.id(z).onchange=function(a){f()});R()},D=WAVE.get(a,"btnClasses",{});D.addBtnCls=WAVE.strDefault(D.addBtnCls,e.CLS_PS_BTN_ADD);D.delBtnCls=WAVE.strDefault(D.delBtnCls,e.CLS_PS_BTN_DEL);D.rawBtnCls=WAVE.strDefault(D.rawBtnCls,e.CLS_PS_BTN_RAW);D.clearBtnCls=WAVE.strDefault(D.clearBtnCls,e.CLS_PS_BTN_CLEAR);D.modalBtnCls=WAVE.strDefault(D.modalBtnCls,"");this.content=function(a,b){if("undefined"===typeof a)return WAVE.empty(u)?"":JSON.stringify(u,
null,2);var c=WAVE.tryParseJSON(a);c.ok&&(u=c.obj,""!==Y&&(WAVE.id(F.outputHiddenId).value=m.content()),m.eventInvoke(e.EVT_OBJECT_EDITOR_UPDATED,u),!0===b&&f());return a};this.jsonContent=function(){return u};this.maxLength=function(){return r};this.DIV=function(){return k};this.validate=function(){var a=[],b=!0,c;for(c in A){var f=A[c](),b=b&&f.ok;a.push(f)}return{ok:b,result:a}};this.validators=function(){return A};var z="<div class='@divCLS@' id='@divId@'></div>"+(!p||x||v?"":"<input type='button' id='@BtnId@' class='@BtnCls@' value='@delText@'/>")+
"<div class='@arrSep@'></div>";f()};var N=0;e.Tabs=function(a){function b(a){for(var c=null,f=0;f<g.length;f++){var d=g[f];d.name()===a?(c=a,d.activate()):d.deactivate()}return c}function c(a){for(var b=0;b<g.length;b++)if(g[b].name()===a)return g[b];return null}if("undefined"===typeof a||null===a||"undefined"===typeof a.DIV||null===a.DIV)throw"Tabs.ctor(init.DIV)";var f=this;WAVE.extend(f,WAVE.EventManager);N++;var d="wvTabs_"+N,m=a.DIV,h=WAVE.styleOf(m,"display"),k=WAVE.strAsBool(a.unswitchable,
!1),l=WAVE.strAsBool(a.parse,!1),g=WAVE.isArray(a.tabs)?a.tabs:[],n=0,u=function(a){n++;a=WAVE.isObject(a)?a:{};var b=this,c=WAVE.strDefault(a.title,n.toString()),k=WAVE.strDefault(a.content),l=WAVE.strAsBool(a.isHtml,!0),u=WAVE.strAsBool(a.isActive,!1),x=WAVE.strDefault(a.id,d+"_"+n),v=WAVE.strDefault(a.name,n.toString()),t=WAVE.strAsBool(a.visible,!0),p=WAVE.strDefault(a.cls),w=WAVE.get(a,"cont",null),B=WAVE.get(a,"li",null),r;this.build=function(a,b){a&&(null===B&&(WAVE.id(q.ulTabsId).insertAdjacentHTML("beforeend",
"<li id='"+x+"'></li>"),B=WAVE.id(x)),B.innerText=c,B.onclick=function(){f.tabActive(v)},b&&(r=WAVE.styleOf(B,"display")));if(null===w){var d="content_"+x;WAVE.id(q.divContentContId).insertAdjacentHTML("beforeend","<div id='"+d+"' class='"+e.CLS_TABS_CONTENT_DIV+" "+p+"'></div>");w=WAVE.id(d);l?w.innerHTML=k:w.innerText=k}B.style.display=t?r:"none";WAVE.addClass(w,t&&u?e.CLS_TABS_CONTENT_DIV_SHOWN:e.CLS_TABS_CONTENT_DIV_HIDDEN);WAVE.removeClass(w,t&&u?e.CLS_TABS_CONTENT_DIV_HIDDEN:e.CLS_TABS_CONTENT_DIV_SHOWN)};
this.activate=function(){u=!0;WAVE.addClass(w,e.CLS_TABS_CONTENT_DIV_SHOWN);WAVE.removeClass(w,e.CLS_TABS_CONTENT_DIV_HIDDEN);WAVE.addClass(B,e.CLS_TABS_ACTIVE_TAB)};this.deactivate=function(){u=!1;WAVE.addClass(w,e.CLS_TABS_CONTENT_DIV_HIDDEN);WAVE.removeClass(w,e.CLS_TABS_CONTENT_DIV_SHOWN);WAVE.removeClass(B,e.CLS_TABS_ACTIVE_TAB)};this.destroy=function(){return WAVE.removeElem(w.id)&&WAVE.removeElem(B.id)};this.name=function(){return v};this.tab=function(){return B};this.cont=function(){return w};
this.isActive=function(a){if("undefined"===typeof a||null===a)return u;u=a};this.content=function(a){if("undefined"===typeof a||null===a)return k;k=a;l?w.innerHTML=k:w.innerText=k};this.title=function(a){if("undefined"===typeof a||null===a)return c;c=a;B.innerText=c};this.visible=function(a){if("undefined"===typeof a||null===a)return t;t=!0===a;b.build(!1,!0);a=!0;for(var c=0,d=g.length;c<d;c++){var e=g[c];e.visible()&&g[c].name()!==v&&(u&&!t&&f.tabActive(e.name()),a=!1)}a?(h=WAVE.styleOf(m,"display"),
m.style.display="none"):m.style.display=h};this.titleCtrl=function(){return B};this.contentCtrl=function(){return w};return b};for(a=0;a<g.length;a++)g[a]=new u(g[a]);var q={divTabsContId:"tabs_cont_"+d,divContentContId:"content_cont_"+d,ulTabsId:"ul_tabs_ "+d};this.DIV=function(){return m};this.tabs=function(){return g};this.unswitchable=function(a){if("undefined"===typeof a)return k;k=!0===a;for(var b=0;b<g.length;b++){var c=g[b];k?g[b].isActive()||(c.tab().className+=" "+e.CLS_TABS_LI_DISABLED):
WAVE.removeClass(c.tab(),e.CLS_TABS_LI_DISABLED)}return a};this.tabByName=function(a){return"undefined"===typeof a||null===a?null:c(a)};this.tabAdd=function(a){var b={phase:e.EVT_PHASE_BEFORE,tabControl:f,tabInit:a,abort:!1};f.eventInvoke(e.EVT_TABS_TAB_ADD,b);if(!0!==b.abort)return a=new u(a),b=c(a.name()),null!==b&&(b.destroy(),g.splice(g.indexOf(b),1)),g.push(a),a.build(!0,!1),(a.isActive()||null===f.tabActive())&&f.tabActive(a.name()),f.eventInvoke(e.EVT_TABS_TAB_ADD,{phase:e.EVT_PHASE_AFTER,
tabControl:f,tab:a}),a};this.tabDelete=function(a){if("undefined"===typeof a||null===a)return!1;for(var c=!1,d=0;d<g.length;d++)if(g[d].name()===a){var m=g[d],h={phase:e.EVT_PHASE_BEFORE,tabControl:f,tab:m,abort:!1};f.eventInvoke(e.EVT_TABS_TAB_REMOVE,h);if(!0===h.abort)return c;c=m.destroy();g.splice(d,1);m.isActive()&&0<g.length&&b(g[0].name());break}f.eventInvoke(e.EVT_TABS_TAB_REMOVE,{phase:e.EVT_PHASE_AFTER,tabControl:f,name:a,ok:c});return c};this.tabActive=function(a){var c=null;if("undefined"===
typeof a||null===a)for(a=0;a<g.length;a++){if(g[a].isActive()){c=g[a].name();break}}else k||f.tabActive()===a||(c=b(a),f.eventInvoke(e.EVT_TABS_TAB_CHANGED,a));return c};this.tabContent=function(a,b){if("undefined"===typeof a||null===a||WAVE.strEmpty(a))return null;var f=c(a);if(null===f)return null;if("undefined"===typeof b)return f.content();f.content(b);return b};this.tabTitle=function(a,b){if("undefined"===typeof a||null===a||WAVE.strEmpty(a))return null;var f=c(a);if(null===f)return null;if("undefined"===
typeof b)return f.title();f.title(b);return b};this.tabVisible=function(a,b){if("undefined"===typeof a||null===a||WAVE.strEmpty(a))return null;var f=c(a);if(null===f)return null;if("undefined"===typeof b)return f.visible();b=!0===b;f.visible(b);return b};(function(){var a,c,f;if(l){g=[];var d=m.getElementsByTagName("li");a=0;for(c=d.length;a<c;a++){var h=d[a];f={};f.title=h.innerText;f.name=WAVE.strDefault(h.getAttribute("data-tabs-name"));WAVE.strEmpty(f.name)&&(f.name=null);f.isHtml=WAVE.strAsBool(h.getAttribute("data-tabs-isHtml"),
!0);f.isActive=WAVE.strAsBool(h.getAttribute("data-tabs-isActive"),!1);f.visible=WAVE.strAsBool(h.getAttribute("data-tabs-visible"),!0);f.cont=WAVE.id(WAVE.strDefault(h.getAttribute("data-tabs-contId")));f.li=h;g.push(new u(f))}}else m.innerHTML=WAVE.strHTMLTemplate("<div id='@divTabsId@' class='@ulContainer@'><ul id='@ulId@' class='@ulClass@'></ul></div><div id='@divContId@' class='@divClass@'></div>",{divTabsId:q.divTabsContId,divContId:q.divContentContId,ulId:q.ulTabsId,ulClass:e.CLS_TABS_UL,divClass:e.CLS_TABS_CONTENT_CONTAINER,
ulContainer:e.CLS_TABS_UL_CONTAINER});if(0!==g.length){c=null;d=!1;for(a=0;a<g.length;a++)f=g[a],f.isActive()&&f.visible()&&(d?f.isActive(!1):(c=f.name(),d=!0)),f.build(!0,!1);if(!d)for(a=0;a<g.length;){if(g[a].visible()){c=g[a].name();g[a].isActive(!0);break}a++}null!==c&&b(c)}})();return f};var h=0;e.Details=function(a){function b(){R&&setTimeout(function(){m()},Q);J&&(WAVE.addEventHandler(window,"focus",c),setTimeout(function(){WAVE.addEventHandler(window,"mousemove",f)},1));D&&setTimeout(function(){WAVE.addEventHandler(window,
"click",c,!0)},1);K&&setTimeout(function(){WAVE.addEventHandler(window,"scroll",m)},1);N&&setTimeout(function(){WAVE.addEventHandler(window,"resize",m)},1)}function c(a){var b=a.target,f="modal"===Z&&null!==aa?aa.baseDIV():q;if(null!==aa&&a.target===aa.baseDIV()||!WAVE.isParentOf(f,b))a.preventDefault(),m()}function f(a){a=a.target;WAVE.isParentOf(q,a)||WAVE.isParentOf(u,a)||m()}function d(a){WAVE.strEmpty(x)||(y?u.innerHTML=a:u.innerText=a)}function m(){if(!fa){var a={phase:e.EVT_PHASE_BEFORE,abort:!1};
g.eventInvoke(e.EVT_DETAILS_HIDE,a);!0!==a.abort&&(d(x),F&&WAVE.addEventHandler(u,"click",k),E&&WAVE.removeEventHandler(u,"click",m),"modal"===Z&&null!==aa?aa.close():(WAVE.addClass(q,e.CLS_DETAILS_CONTENT_HIDDEN),WAVE.removeClass(q,e.CLS_DETAILS_CONTENT_VISIBLE)),WAVE.removeEventHandler(window,"focus",c),WAVE.removeEventHandler(window,"click",c,!0),WAVE.removeEventHandler(window,"mousemove",f),WAVE.addClass(u,e.CLS_DETAILS_TITLE_HIDDEN),WAVE.removeClass(u,e.CLS_DETAILS_TITLE_SHOWN),setTimeout(function(){fa=
!0;g.eventInvoke(e.EVT_DETAILS_HIDE,{phase:e.EVT_PHASE_AFTER})},1))}}function k(){if(fa){var a={phase:e.EVT_PHASE_BEFORE,abort:!1};g.eventInvoke(e.EVT_DETAILS_SHOW,a);!0!==a.abort&&(d(v),F&&WAVE.removeEventHandler(u,"click",k),E&&WAVE.addEventHandler(u,"click",m),"modal"===Z?(aa=new e.Dialog({cls:e.CLS_DETAILS_CONTENT+" "+z,body:t,onShow:function(a){b();WAVE.strEmpty(p)||WAVE.ajaxCall("GET",p,null,function(b){null!==r?(b=r(b),WAVE.strEmpty(b)||a.content(b)):a.content(b)},console.error,console.error,
w,w)},header:A}),q=aa.bodyDIV(),WAVE.id(l+"close").onclick=m):(WAVE.removeClass(q,e.CLS_DETAILS_CONTENT_HIDDEN),WAVE.addClass(q,e.CLS_DETAILS_CONTENT_VISIBLE),b()),fa=!1,WAVE.addClass(u,e.CLS_DETAILS_TITLE_SHOWN),WAVE.removeClass(u,e.CLS_DETAILS_TITLE_HIDDEN),g.eventInvoke(e.EVT_DETAILS_SHOW,{phase:e.EVT_PHASE_AFTER}))}}if("undefined"===typeof a||null===a)throw"Details.ctor(init)";var g=this;WAVE.extend(g,WAVE.EventManager);var l="wvDetails_"+h++,n,u,q,x=WAVE.strDefault(a.title),v=WAVE.strDefault(a.altTitle,
x),t=WAVE.strDefault(a.content),p=WAVE.strDefault(a.contentUrl),w=WAVE.strDefault(a.contentType),r=WAVE.isFunction(a.loadCallback)?a.loadCallback:null,y=WAVE.strAsBool(a.isTitleHtml,!0),Y=WAVE.strAsBool(a.isContentHtml,!0),z=WAVE.strDefault(a.modalCls,e.CLS_DETAILS_MODAL),A="<div class='wvDetailsHeader'>"+WAVE.strDefault(a.modalTitle)+"</div><div class='wvCloseDetails' id='"+l+"close'></div>",F=WAVE.strAsBool(a.showOnClick,!0),C=WAVE.strAsBool(a.showOnFocus,!1),E=WAVE.strAsBool(a.hideOnTitle,!0),
D=WAVE.strAsBool(a.hideOnClick,!0),J=WAVE.strAsBool(a.hideOnFocus,!1),R=WAVE.strAsBool(a.hideOnTimer,!1),K=WAVE.strAsBool(a.hideOnScroll,!1),N=WAVE.strAsBool(a.hideOnResize,!1),Z=WAVE.strDefault(a.mode,"swap"),S=WAVE.tryParseInt(a.timeout),Q=S.ok?S.value:0,ha=l+"_title",ia=l+"_content",aa=null,fa=!1;WAVE.has(a,"DIV")&&(n=WAVE.isString(a.DIV)?WAVE.id(a.DIV):a.DIV);WAVE.has(a,"titleCtrl")&&(u=WAVE.isString(a.titleCtrl)?WAVE.id(a.titleCtrl):a.titleCtrl);WAVE.has(a,"contentCtrl")&&(q=WAVE.isString(a.contentCtrl)?
WAVE.id(a.contentCtrl):a.contentCtrl);this.hide=function(){m()};this.show=function(){k()};this.toggle=function(){fa?k():m()};this.content=function(a){if("undefined"===typeof a||null===a)return t;a=t=a;Y?q.innerHTML=a:q.innerText=a};(function(){if("undefined"!==typeof n&&null!==n)if(WAVE.addClass(n,e.CLS_DETAILS),"modal"===Z)n.innerHTML=WAVE.strHTMLTemplate("<span id='@titleId@' class='@titleClass@' tabindex='0'></span>",{titleId:ha,titleClass:e.CLS_DETAILS_TITLE}),u=WAVE.id(ha),d(x);else{n.innerHTML=
WAVE.strHTMLTemplate("<span id='@titleId@' class='@titleClass@' tabindex='0'></span><div id='@contId@' class='@contClass@'></div>",{titleId:ha,titleClass:e.CLS_DETAILS_TITLE,contId:ia,contClass:e.CLS_DETAILS_CONTENT});u=WAVE.id(ha);q=WAVE.id(ia);var a=t;Y?q.innerHTML=a:q.innerText=a}else if(null!==u&&null!==q)WAVE.addClass(u,e.CLS_DETAILS_TITLE),WAVE.addClass(q,e.CLS_DETAILS_CONTENT);else throw"Details.build(unacceptable init)";d(x);F&&WAVE.addEventHandler(u,"click",k);C&&(WAVE.addEventHandler(u,
"mouseover",k),WAVE.addEventHandler(u,"focus",k));m()})();return g};var R=0;e.ImageView=function(a,b){function c(a){if("undefined"!==typeof a&&(h.clear(!0),null!==a))return WAVE.isObject(a)&&WAVE.has(a,"element")?(a.error||k.appendChild(a.element),f(a)):a=d(a,function(){this.className=e.CLS_IMAGE_VIEW_IMAGE;h.clear()&&k.appendChild(this);f(a)},function(){f(a)},b),a}function f(a){if("undefined"!==typeof k)if(k.className=e.CLS_IMAGE_VIEW,a.error)k.className+=" "+e.CLS_IMAGE_BOX_ERROR;else if(a.load){var b=
m(k),b=b.x/b.y;a=(a.width|0)/(a.height|0);isNaN(a)||(k.className+=" "+(a>=b?e.CLS_IMAGE_BOX_WIDER:e.CLS_IMAGE_BOX_HIGHER))}else k.className+=" "+e.CLS_IMAGE_BOX_LOADING}function m(a){return{x:a.offsetWidth,y:a.offsetHeight}}if("undefined"===typeof a||null===a)a={};WAVE.isString(a)&&(a={DIV:a});if(!WAVE.has(a,"DIV"))throw"ImageView.ctor(init.thumbnails)";R++;var h=this;WAVE.extend(h,WAVE.EventManager);var k=function(a){var b=document.createElement("div");b.className=e.CLS_IMAGE_VIEW;a.appendChild(b);
A(b,function(a,c){var f,d;h.image();f=b;var k=0;for(d=0;null!==f;)k+=f.offsetLeft,d+=f.offsetTop,f=f.offsetParent;f=k;var k=m(b),l=a-f-k.x/2,n=c-d-k.y/2,k=m(g.element),l=l*g.width/k.x,n=n*g.height/k.y;if(g.width>k.x||g.height>k.y)b.className+=" "+e.CLS_IMAGE_VIEW_ZOOM,k=b.scrollHeight,b.scrollLeft=l+b.scrollWidth/2-(a-f),b.scrollTop=n+k/2-(c-d)},void 0,f,!0);return b}(WAVE.isString(a.DIV)?WAVE.id(a.DIV):a.DIV),g;h.image=function(a){"undefined"!==typeof a&&(g=c(a));return g};h.clear=function(a){a&&
(k.innerHTML="");return""===k.innerHTML};h.image(a.image);window.addEventListener("resize",function(){f(h.image()||{})},!1);return h};var S=0;e.Gallery=function(a){function b(a){var d;if(c(a.id))d=p[a.id],d.update(a);else{d=new n.Item(a,n,x);d.order=a.order|0;a:{a=t;for(var e=d,m=f,k=0,h=a.length,g=-1,l=0;k<h;)if(g=(k+h)/2|0,l=m(a[g],e),0>l)k=g+1;else if(0<l)h=g;else{for(;g<h&&0===m(a[g],e);)g++;a=g;break a}a=k}q.insertBefore(d.element(),WAVE.has(t,a)?t[a].element():null);t.splice(a,0,d);p[d.id()]=
d}return d}function c(a){return"undefined"===typeof a?!1:WAVE.has(p,a)}function f(a,b){return a.order-b.order}function m(a){return{x:a.offsetWidth,y:a.offsetHeight}}function k(a){function b(a){return a}var c=Date.now(),f=setInterval(function(){var d=(Date.now()-c)/(+a.duration||1E3);1<d&&(d=1);var e=a.step((a.delta||b)(d))||!0;1!==d&&e||clearInterval(f)},+a.delay||10)}function h(a,b,c,f,d){var e=a.scrollLeft,m=a.scrollTop;k({duration:c,delta:f,step:function(c){a.scrollLeft=e+b.x*c;a.scrollTop=m+b.y*
c;d&&d.call(a,c)}})}function g(a,b,c){return function(){var f={evt:b,phase:e.EVT_PHASE_BEFORE,args:arguments,abort:!1};a.eventInvoke(b,f);if(!0!==f.abort){var d=c.apply(a,arguments);f.result=d;f.phase=e.EVT_PHASE_AFTER;delete f.abort;a.eventInvoke(b,f);return d}}}if("undefined"===typeof a||null===a)a={};WAVE.isString(a)&&(a={thumbnails:a});if(!WAVE.has(a,"thumbnails"))throw"Gallery.ctor(init.thumbnails)";var l=WAVE.has(a,"urls");if(l&&!WAVE.isObject(a.urls))throw"Gallery.ctor(init.urls)";S++;var n=
this;WAVE.extend(n,WAVE.EventManager);n.urls=l?a.urls:{};var u,q=function(a){function b(){f.className=e.CLS_GALLERY_PREV+(0===q.scrollLeft&&0===q.scrollTop?" "+e.CLS_GALLERY_DISABLED:"");d.className=e.CLS_GALLERY_NEXT+(q.scrollLeft+q.clientWidth===q.scrollWidth&&q.scrollTop+q.clientHeight===q.scrollHeight?" "+e.CLS_GALLERY_DISABLED:"")}var c=document.createElement("ul"),f=document.createElement("div"),d=document.createElement("div");c.className=e.CLS_GALLERY_LIST;f.className=e.CLS_GALLERY_PREV;d.className=
e.CLS_GALLERY_NEXT;f.onclick=function(a){a.preventDefault();a=m(c.firstChild);h(c,{x:-a.x,y:-a.y},400,void 0,b)};d.onclick=function(a){a.preventDefault();a=m(c.firstChild);h(c,a,400,void 0,b)};A(c,void 0,b,b);a.appendChild(f);a.appendChild(c);a.appendChild(d);window.addEventListener("resize",b,!1);u=b;return c}(WAVE.isString(a.thumbnails)?WAVE.id(a.thumbnails):a.thumbnails),x=WAVE.isString(a.preview)?new e.ImageView(a.preview,n.urls):a.preview,v,t=[],p={},w=0;n.Item=function(a,b,c){function f(a){x.innerHTML=
"";x.className=e.CLS_GALLERY_THUMBNAIL+" "+e.CLS_IMAGE_BOX_LOADING;n=d(a,function(){this.className=e.CLS_GALLERY_IMAGE;this.id=e.CLS_GALLERY_IMAGE+g.id();x.appendChild(this);x.className=e.CLS_GALLERY_THUMBNAIL+" "+(this.width>=this.height?e.CLS_IMAGE_BOX_WIDER:e.CLS_IMAGE_BOX_HIGHER)},function(){x.className=e.CLS_GALLERY_THUMBNAIL+" "+e.CLS_IMAGE_BOX_ERROR},b.urls);u()}var m=w++,k=WAVE.isObject(a)&&WAVE.has(a,"id")?a.id:m;a.id=k;var h={},g=this;WAVE.extend(g,WAVE.EventManager);var l,n,q=document.createElement("li"),
x=document.createElement("div"),v=document.createElement("div");q.className=e.CLS_GALLERY_ITEM;v.className=e.CLS_GALLERY_CONTENT;x.className=e.CLS_GALLERY_THUMBNAIL;q.appendChild(x);q.appendChild(v);q.onclick=function(){b.current(k)};g.id=function(){return k};g.title=function(a){"undefined"!==typeof a&&h.title!==a&&(a=h.title=a,x.title=a);return WAVE.strDefault(h.title,k)};g.content=function(a,b){if("undefined"!==typeof a&&(h.content!==a||!!h.isText!==!!b)){var c=h.content=a;(h.isText=!!b)?v.innerText=
c:v.innerHTML=c}return WAVE.strDefault(h.content)};g.isText=function(){return!!h.isText};g.image=function(a){if("undefined"!==typeof a&&!z(h.image,a)){a=h.image=a;var b=!1;"undefined"!==typeof l&&(b=l===c.image(),WAVE.has(l,"free")&&l.free());l=a;b&&g.show()}return l};g.thumb=function(a){"undefined"===typeof a||z(h.thumb,a)||f(h.thumb=a);return n};g.data=function(a){"undefined"!==typeof a&&(h.data=a);return h.data};g.show=function(){l=c.image(l)};g.update=function(a){if(!WAVE.isObject(a)||WAVE.has(a,
"url"))a={image:a};if(!WAVE.has(a,"image"))throw"Gallery.Item.update(init.image)";if(a.id!==k)throw"Gallery.Item.update(init.id)";g.image(a.image);g.thumb(a.thumb||a.image);g.title(a.title);g.content(a.content,a.isText);g.data(a.data)};g.free=function(){q.parentNode&&q.parentNode.removeChild(q);c.image()===l&&l.element.parentNode&&l.element.parentNode.removeChild(l.element)};g.element=function(){return q};g.update(a);return g};var r=g(n,e.EVT_GALLERY_CHANGE,function(a){if(c(a))return a=p[a],"undefined"!==
typeof v&&(v.element().className=e.CLS_GALLERY_ITEM),a.element().className=e.CLS_GALLERY_ITEM+" "+e.CLS_GALLERY_SELECTED,a.show(),a});n.current=function(a){"undefined"!==typeof a&&(a=r(a),"undefined"!==typeof a&&(v=a));if("undefined"!==typeof v)return v.id()};n.has=c;n.get=function(a){return p[a]};var y=g(n,e.EVT_GALLERY_REMOVE,function(a){if(!c(a))return!0;p[a].free();t=t.filter(function(b){return b.id()!==a});delete p[a];return!0});n.remove=function(a){return c(a)?!!y(a):!0};n.images=function(){return t};
n.update=g(n,e.EVT_GALLERY_ADD,b);WAVE.each(a.images,b);u();return n};e.GallerySimple=function(a){if("undefined"===typeof a||null===a||"undefined"===typeof a.DIV||null===a.DIV)throw"GallerySimple.ctor(init.DIV)";var b=WAVE.isString(a.DIV)?WAVE.id(a.DIV):a.DIV,c=document.createElement("div");c.className=e.CLS_GALLERY_SIMPLE_PREVIEW;a.preview=new e.ImageView({DIV:c},a.urls);a.thumbnails=document.createElement("div");a.thumbnails.className=e.CLS_GALLERY_SIMPLE_THUMBNAILS;b.appendChild(a.thumbnails);
b.appendChild(c);return e.Gallery.call(this,a)};var K=0;e.ChainSelector=function(a){function b(a){a=v.indexOf(a.target.parentNode);a=m().slice(0,a+1);d(a)}function c(a,f){if(x||u)return!1;var d=v.length,e=p.selectBodyId+d.toString(),m=WAVE.strHTMLTemplate("<div id='@divComboWrapId@' class='@divComboWrapCls@' @disabled@ @readonly@><select id='@selectBodyId@'><option value=''></option>",{divComboWrapId:p.divComboWrapId+d.toString(),divComboWrapCls:t.divComboWrapCls,selectBodyId:e,disabled:x?"":"disabled",
readonly:u?"readonly":""});a.wEach(function(a){m+=WAVE.strHTMLTemplate("<option value='@value@' @selected@>@descr@</option>",{value:a.id,selected:WAVE.strSame(a.id,f)?"selected":"",descr:a.val})});var m=m+WAVE.strHTMLTemplate("</select><div id='@divArrowId@' class='@divArrowCls@'></div></div>",{divArrowId:p.divArrowId+d.toString(),divArrowCls:t.divArrowCls}),k=WAVE.id(p.divInfoId),h=document.createElement("div");h.innerHTML=m;h=h.firstChild;g.insertBefore(h,k);v[d]=h;WAVE.addEventHandler(WAVE.id(e),
"change",b);return h}function f(a){if(x||u)return!1;for(var c=0;c<a;c++){var d=v.pop();if(!WAVE.exists(d))break;WAVE.removeEventHandler(WAVE.id(p.selectBodyId+v.length.toString()),"change",b);g.removeChild(d)}}function d(a){if(x||u)return!1;WAVE.exists(a)||(a=[""]);WAVE.isString(a)&&(a=a.split("."));if(!WAVE.isArray(a))return!1;var b=WAVE.arrayWalkable(n),m=null,g,q,t=!0;f(v.length-a.length);0>=v.length&&c(b,"");for(var w in a){g=a[w];if(WAVE.strSame(g,"")){f(v.length-w);m=b;break}if(null===b){t=
!1;f(v.length-w);break}m=b.wFirst(function(a){return WAVE.strSame(a.id,g)});if(null===m){t=!1;f(v.length-w);m=b;break}q=m;m=WAVE.exists(q.children)?WAVE.arrayWalkable(q.children):null;WAVE.exists(v[w])?(b=WAVE.id(p.selectBodyId+w.toString()),WAVE.strSame(b.value,g)||(f(v.length-w-1),b.value=g)):(f(v.length-w),c(b,g));b=m}WAVE.exists(m)&&c(m,"");a=WAVE.id(p.divNameId);w=WAVE.exists(q)?WAVE.strDefault(q.name,""):"";a.innerText=WAVE.strSame(w,"")?"":"Name: "+w;q=WAVE.exists(q)?WAVE.strDefault(q.descr,
""):"";WAVE.id(p.divDescrId).innerText=WAVE.strSame(q,"")?"":"Description: "+q;null!==l&&(WAVE.id(p.outputHiddenId).value=k.value());k.eventInvoke(e.EVT_CHAIN_SELECTOR_UPDATED,h());return t}function m(){var a=[],b;for(b in v){var c=WAVE.id(p.selectBodyId+b.toString());a.push(c.value)}return a}function h(){var a=m().join(".");0<a.length&&WAVE.strSame(a[a.length-1],".")&&(a=a.substring(0,a.length-1));return a}if(!WAVE.exists(a))throw"ChainSelector.ctor(init=null)";var k=this;WAVE.extend(k,WAVE.EventManager);
K++;var g;WAVE.has(a,"DIV")&&(g=WAVE.isString(a.DIV)?WAVE.id(a.DIV):a.DIV);var l=WAVE.strDefault(a.outputFormFieldName,null);WAVE.strDefault(a.description);var n=WAVE.has(a,"values")&&WAVE.exists(a.values)&&WAVE.isArray(a.values)?a.values:[],q=WAVE.strDefault(a.path,""),u=WAVE.strAsBool(a.readonly,!1),x=WAVE.strAsBool(a.disabled,!1),v=[],t=WAVE.get(a,"classes",{});t.divWrapCls=WAVE.strDefault(t.divWrapCls,e.CLS_CHAIN_SELECTOR);t.divInfoCls=WAVE.strDefault(t.divInfoCls,e.CLS_CS_DIV_INFO);t.divNameCls=
WAVE.strDefault(t.divNameCls,e.CLS_CS_DIV_NAME);t.divDescrCls=WAVE.strDefault(t.divDescrCls,e.CLS_CS_DIV_DESCR);t.divComboWrapCls=WAVE.strDefault(t.divComboWrapCls,e.CLS_CS_DIV_COMBO_WRAP);t.divArrowCls=WAVE.strDefault(t.divArrowCls,e.CLS_CS_DIV_ARROW);a="cs_"+K;var p={divInfoId:"divInfo_"+a,divNameId:"divName_"+a,divDescrId:"divDescr_"+a,divComboWrapId:"divComboWrap_"+a+"_",selectBodyId:"selectBodyId"+a+"_",divArrowId:"divArrow_"+a+"_",outputHiddenId:"hidden_"+a};this.navigate=function(a){return d(a)};
this.path=function(){return m()};this.value=function(){return h()};(function(){if(WAVE.exists(g)){WAVE.addClass(g,t.divWrapCls);var a=WAVE.strHTMLTemplate("<input id='@outerId@' type='hidden' name='@outerName@'/><div id='@divInfoId@' class='@divInfoCls@'><div id='@divNameId@' class='@divNameCls@'></div><div id='@divDescrId@' class='@divDescrCls@'></div></div>",{outerId:p.outputHiddenId,outerName:WAVE.strDefault(l,""),divInfoId:p.divInfoId,divInfoCls:t.divInfoCls,divNameId:p.divNameId,divNameCls:t.divNameCls,
divDescrId:p.divDescrId,divDescrCls:t.divDescrCls});g.innerHTML=a;d(q)}})();return k};return e}();
WAVE.RecordModel.GUI=function(){function r(c){var d=WAVE.genAutoincKey("__wv.rm.gui");return"_"+c.recView().ID()+"_"+d}function p(c){var d=c.field(),e=c.DIV(),m=WAVE.get(c,"@#$CHAIN_SELECTOR_GEN_ID$#@",null);null===m&&(m=r(c),c["@#$CHAIN_SELECTOR_GEN_ID$#@"]=m);var a="divCS_"+m,b="labelCont_"+m;c=WAVE.id(b);m=WAVE.id(a);if(null===c||null===m)e.innerHTML=WAVE.strHTMLTemplate("<div id='@idLabelDiv@'></div><div id='@idCSDiv@'></div>",{idLabelDiv:b,idCSDiv:a}),c=WAVE.id(b),m=WAVE.id(a);e="";a=d.validationError();
null!==a&&(e+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:l.CLS_ERROR,error:a}));e+=WAVE.strHTMLTemplate("<label class='@cls@'>@about@</label>",{about:d.about(),cls:(d.required()?l.CLS_REQ:"")+" "+(d.isGUIModified()?l.CLS_MOD:"")});c.innerHTML=e;e=d.lookupDict();e=WAVE.exists(e)?e.values:[];c=d.isNull()?"":d.value();(new WAVE.GUI.ChainSelector({DIV:m,outputFormFieldName:d.name(),classes:{divArrowCls:l.CLS_COMBO_ARROW,divComboWrapCls:l.CLS_COMBO_WRAP},path:c,disable:d.isEnabled()?!1:
!0,readonly:d.readonly(),values:e})).eventBind(WAVE.GUI.EVT_CHAIN_SELECTOR_UPDATED,function(a,b){d.value(b,!0)})}function y(c){var d=c.field(),e=c.DIV(),m="tb"+r(c),a=WAVE.strHTMLTemplate("<label for='@tbid@' class='@cls@'>@about@</label>",{tbid:m,about:d.about(),cls:(d.required()?l.CLS_REQ:"")+" "+(d.isGUIModified()?l.CLS_MOD:"")}),b=d.validationError();null!==b&&(a+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:l.CLS_ERROR,error:b}));b=d.kind();b=d.password()?"password":b===WAVE.RecordModel.KIND_SCREENNAME?
"text":b;a+=WAVE.strHTMLTemplate("<input id='@id@' type='@tp@' name='@name@' @disabled@ @maxlength@ @readonly@ value='@value@' placeholder='@placeholder@' @required@>",{id:m,tp:b,name:d.name(),disabled:d.isEnabled()?"":"disabled",maxlength:0>=d.size()?"":"maxlength="+d.size(),readonly:d.readonly()?"readonly":"",value:d.isNull()?"":d.displayValue(),placeholder:WAVE.strEmpty(d.placeholder())?"":d.placeholder(),required:d.required()?"required":""});e.innerHTML=a;WAVE.id(m).__fieldView=c;$("#"+m).change(function(){var a=
this.value;try{this.__fieldView.field().setGUIValue(a),t=null}catch(b){WAVE.GUI.toast("Wrong value for field '"+this.__fieldView.field().about()+"'. Please re-enter or undo","error");var c=this;if(t===c||null===t)t=c,setTimeout(function(){c.ERRORED||$(c).blur(function(){$(c).change()});c.focus();c.ERRORED=!0},50)}})}function z(c){var d=c.field(),e=c.DIV(),m="tb"+r(c),a=WAVE.strHTMLTemplate("<label for='@tbid@' class='@cls@'>@about@</label>",{tbid:m,about:d.about(),cls:(d.required()?l.CLS_REQ:"")+
" "+(d.isGUIModified()?l.CLS_MOD:"")}),b=d.validationError();null!==b&&(a+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:l.CLS_ERROR,error:b}));a+=WAVE.strHTMLTemplate("<textarea id='@id@' name='@name@' @disabled@ @maxlength@ @readonly@ placeholder='@placeholder@' @required@>@value@</textarea>",{id:m,name:d.name(),disabled:d.isEnabled()?"":"disabled",maxlength:0>=d.size()?"":"maxlength="+d.size(),readonly:d.readonly()?"readonly":"",value:d.isNull()?"":d.displayValue(),placeholder:WAVE.strEmpty(d.placeholder())?
"":d.placeholder(),required:d.required()?"required":""});e.innerHTML=a;WAVE.id(m).__fieldView=c;$("#"+m).change(function(){var a=this.value;try{this.__fieldView.field().setGUIValue(a),t=null}catch(b){WAVE.GUI.toast("Wrong value for field '"+this.__fieldView.field().about()+"'. Please re-enter or undo","error");var c=this;if(t===c||null===t)t=c,setTimeout(function(){c.ERRORED||$(c).blur(function(){$(c).change()});c.focus();c.ERRORED=!0},50)}})}function d(c){function d(a){var b=a.target.value,c=a.target.__fieldView.field();
c.readonly()?g(a.target.__fieldView):c.value(b,!0)}var e=c.field(),m=c.DIV(),a=e.lookupDict(),b=Object.keys(a),f;f="<fieldset>"+WAVE.strHTMLTemplate("<legend class='@cls@'>@about@</legend>",{about:e.about(),cls:(e.required()?l.CLS_REQ:"")+" "+(e.isGUIModified()?l.CLS_MOD:"")});var k=e.validationError();null!==k&&(f+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:l.CLS_ERROR,error:k}));var k=r(c),n;for(n in Object.keys(a)){var u=b[n],h=a[u],t="rbt"+k+"_"+n;f+=WAVE.strHTMLTemplate("<input id='@id@' type='radio' name='@name@' @disabled@ @readonly@ value='@value@' @required@ @checked@>",
{id:t,name:e.name(),disabled:e.isEnabled()?"":"disabled",readonly:e.readonly()?"readonly":"",value:u,required:e.required()?"required":"",checked:WAVE.strSame(u,e.value())?"checked":""});f+=WAVE.strHTMLTemplate("<label for='@rbtid@'>@about@</label>",{rbtid:t,about:h})}m.innerHTML=f+"</fieldset>";for(var p in Object.keys(a))e="rbt"+k+"_"+p,WAVE.id(e).__fieldView=c,$("#"+e).change(d)}function A(c){var d=c.field(),e=c.DIV(),m="chk"+r(c),a="",b=d.validationError();null!==b&&(a+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",
{ec:l.CLS_ERROR,error:b}));a+=WAVE.strHTMLTemplate("<input id='h_@id@' type='hidden'  value='@val@' name='@name@'>",{id:m,name:d.name(),val:WAVE.strAsBool(d.value())?"true":"false"});a+=WAVE.strHTMLTemplate("<label for='@chkid@' class='@cls@'>@about@</label>",{chkid:m,about:d.about(),cls:(d.required()?l.CLS_REQ:"")+" "+(d.isGUIModified()?l.CLS_MOD:"")});a+=WAVE.strHTMLTemplate("<input id='@id@' type='checkbox' @disabled@ @readonly@  @required@ @checked@>",{id:m,disabled:d.isEnabled()?"":"disabled",
readonly:d.readonly()?"readonly":"",required:d.required()?"required":"",checked:WAVE.strAsBool(d.value())?"checked":""});e.innerHTML=a;WAVE.id(m).__fieldView=c;$("#"+m).change(function(){var a=this.checked;$("#h_"+m).val(a?"true":"false");var b=this.__fieldView.field();b.readonly()?g(this.__fieldView):b.value(a,!0)})}function e(c){var d=c.field(),e=c.DIV(),m=WAVE.get(c,"@#$PS_EDITOR_GEN_ID$#@",null);null===m&&(m=r(c),c["@#$PS_EDITOR_GEN_ID$#@"]=m);var a="divps_"+m,b="labelCont_"+m,f=WAVE.id(b),m=
WAVE.id(a);if(null===f||null===m)e.innerHTML=WAVE.strHTMLTemplate("<div id='@idLabelDiv@'></div><div id='@idPSDiv@'></div>",{idLabelDiv:b,idPSDiv:a}),f=WAVE.id(b),m=WAVE.id(a);e="";a=d.validationError();null!==a&&(e+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:l.CLS_ERROR,error:a}));e+=WAVE.strHTMLTemplate("<label class='@cls@'>@about@</label>",{about:d.about(),cls:(d.required()?l.CLS_REQ:"")+" "+(d.isGUIModified()?l.CLS_MOD:"")});f.innerHTML=e;f=d.isNull()?"":d.value();e=WAVE.get(c,
"@#$PS_EDITOR$#@",null);null===e&&(e=new WAVE.GUI.PropSetEditor({DIV:m,outputFormFieldName:d.name(),langs:WAVE.LOCALIZER.allLanguageISOs(),content:f,disable:d.isEnabled()?!1:!0,readonly:d.readonly(),title:d.about()}),c["@#$PS_EDITOR$#@"]=e,e.eventBind(WAVE.GUI.EVT_PS_EDITOR_UPDATED,function(a,b){d.value(b,!0)}))}function u(c){var d=c.field(),e=c.DIV(),m="cbo"+r(c),a="lbl"+m,b=WAVE.strHTMLTemplate("<label for='@cbid@' class='@cls@'>@about@</label>",{cbid:m,about:d.about(),cls:(d.required()?l.CLS_REQ:
"")+" "+(d.isGUIModified()?l.CLS_MOD:"")}),f=d.validationError();null!==f&&(b+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:l.CLS_ERROR,error:f}));var b=b+WAVE.strHTMLTemplate("<div class='@comboWrapCls@'><select id='@id@' name='@name@' @disabled@ @readonly@ value='@value@' placeholder='@placeholder@' @required@>",{id:m,name:d.name(),disabled:d.isEnabled()?"":"disabled",readonly:d.readonly()?"readonly":"",value:d.value(),placeholder:WAVE.strEmpty(d.placeholder())?"":d.placeholder(),
required:d.required()?"required":"",comboWrapCls:l.CLS_COMBO_WRAP}),f=d.lookupDict(),k=Object.keys(f),b=b+"<option value=''></option>",g;for(g in Object.keys(f))b+=WAVE.strHTMLTemplate("<option value='@value@' @selected@>@descr@</option>",{value:k[g],selected:WAVE.strSame(k[g],d.value())?"selected":"",descr:f[k[g]]});b+=WAVE.strHTMLTemplate("</select><div id='@id@' class='@comboArrowCls@'></div></div>",{id:a,comboArrowCls:l.CLS_COMBO_ARROW});e.innerHTML=b;WAVE.id(m).__fieldView=c;$("#"+m).change(function(){var a=
d.value();d.readonly()?this.value!==a&&(this.value=a):(a=this.value,this.__fieldView.field().value(a,!0))});WAVE.id(a).onclick=function(){var a=WAVE.id(m);try{var b=new MouseEvent("mousedown");a.dispatchEvent(b)}catch(c){}return!1}}function c(c){if(!c.PUZZLE){var d=c.field(),e=c.DIV(),m=r(c),a="divPuzzle"+m,m="hiddenPuzzle"+m,b="",f=d.validationError();null!==f&&(b+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:l.CLS_ERROR,error:f}));b+=WAVE.strTemplate("<div id='@id@' class='@cls@'></div><input id='@idh@' type='hidden' name=@fname@ value=''></input>",
{id:a,idh:m,fname:d.name(),cls:l.CLS_PUZZLE});e.innerHTML=b;var e=d.value(),a=new WAVE.GUI.PuzzleKeypad({DIV:WAVE.id(a),Image:WAVE.strDefault(e.Image,""),Help:WAVE.strDefault(e.Help,""),Question:WAVE.strDefault(e.Question,"")}),k=WAVE.id(m);k.value=JSON.stringify(d.value());a.eventBind(WAVE.GUI.EVT_PUZZLE_KEYPAD_CHANGE,function(a){d.value().Answer=a.value();k.value=JSON.stringify(d.value())});c.PUZZLE=a}}function m(c,d){var e=c.record(),m=c.DIV(),a="";if(d){var e=e.allValidationErrors(),b;for(b in e){var f=
e[b];null!==f&&(a+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:l.CLS_ERROR,error:f}))}}else b=e.validationError(),null!==b&&(a+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:l.CLS_ERROR,error:b}));m.innerHTML=a}function g(g){var t=l.getControlType(g);WAVE.strSame(t,WAVE.RecordModel.CTL_TP_CHECK)?(n(g,t),A(g)):WAVE.strSame(t,WAVE.RecordModel.CTL_TP_CHAIN_SELECTOR)?(n(g,t),p(g)):WAVE.strSame(t,WAVE.RecordModel.CTL_TP_CHECK)?(n(g,t),A(g)):WAVE.strSame(t,WAVE.RecordModel.CTL_TP_RADIO)?
(n(g,t),d(g)):WAVE.strSame(t,WAVE.RecordModel.CTL_TP_NLS)?(n(g,t),e(g)):WAVE.strSame(t,WAVE.RecordModel.CTL_TP_COMBO)?(n(g,t),u(g)):WAVE.strSame(t,WAVE.RecordModel.CTL_TP_PUZZLE)?(n(g,t),c(g)):WAVE.strSame(t,WAVE.RecordModel.CTL_TP_TEXTAREA)||WAVE.strSame(t,WAVE.RecordModel.CTL_TP_SCRIPT)?(n(g,t),z(g)):WAVE.strSame(t,WAVE.RecordModel.CTL_TP_HIDDEN)?(n(g,t),g.DIV().innerHTML=WAVE.strHTMLTemplate("<input type='hidden' name='@fName@' value='@fValue@'>",{fName:g.field().name(),fValue:g.field().displayValue()})):
WAVE.strSame(t,WAVE.RecordModel.CTL_TP_ERROR_REC)?m(g,!1):WAVE.strSame(t,WAVE.RecordModel.CTL_TP_ERROR_SUMMARY)?m(g,!0):(n(g,t),y(g))}function n(c,d){if(null===c.field())throw"The control type '"+d+"' requires the field binding, but was bound to record";}var l={CLS_ERROR:"wvError",CLS_REQ:"wvRequired",CLS_MOD:"wvModified",CLS_PUZZLE:"wvPuzzle",CLS_COMBO_ARROW:"wvComboArrow",CLS_COMBO_WRAP:"wvComboWrap"},t=null;l.getControlType=function(c){return c.getOrInferControlType()};l.buildFieldViewAnew=function(c){g(c)};
l.eventNotifyFieldView=function(c,d,e,m){g(c)};return l}();WAVE.Chart={};
WAVE.Chart.SVG=function(){function r(d){return Math.log(d)/Math.LN10}var p={EVT_SERIES_POINT_MOUSEOVER:"EVT_SERIES_POINT_MOUSEOVER",EVT_SERIES_POINT_MOUSEOUT:"EVT_SERIES_POINT_MOUSEOUT",EVT_SERIES_POINT_CLICK:"EVT_SERIES_POINT_CLICK",EVT_SERIES_POINT_TITLE_MOUSEOVER:"EVT_SERIES_POINT_TITLE_MOUSEOVER",EVT_SERIES_POINT_TITLE_MOUSEOUT:"EVT_SERIES_POINT_TITLE_MOUSEOUT",EVT_SERIES_POINT_TITLE_CLICK:"EVT_SERIES_POINT_TITLE_CLICK"},y=WAVE.Geometry;p.DataType={NUMBER:0,DATE:1};p.ChartType={POINT:1,LINE:2,
SPLINE:4,LINE_SQUARE:8,SPLINE_SQUARE:16,BAR:32};p.SquareFillType={TOP:1,BOTTOM:2};p.PointType={NONE:0,CIRCLE:1,RECT:2,TRI:3};p.RectSide={LEFT:0,TOP:1,RIGHT:2,BOTTOM:3};p.RectCorner={LEFTTOP:0,RIGHTTOP:1,LEFTBOTTOM:2,RIGHTBOTTOM:3};p.AxisMarkType={AUTO:0,EXACT_BY_POINTS:1,CUSTOM:2};var z=WAVE.arrayWalkable([1,2,5,10,20,30,60,120,300,600,900,1200,1800,3600,7200,10800,14400,21600,28800,43200,86400,172800,259200,604800,2592E3,5184E3,7776E3,15552E3,31536E3,63072E3,94608E3,15768E4,31536E4,63072E4,15768E5]);
p.dvInfo=function(d,c,e,g,n){var l=d instanceof Date;this.isDate=function(){return l};var t=d;this.d0=function(a){"undefined"!==typeof a&&(t=a);return t};var q=c;this.d1=function(a){"undefined"!==typeof a&&(q=a);return q};var p=e;this.v0=function(a){"undefined"!==typeof a&&(p=a);return p};var w=g;this.v1=function(a){"undefined"!==typeof a&&(w=a);return w};var v=n;this.isLinear=function(a){"undefined"!==typeof a&&(v=a);return v};if(n){var a;l?(a=(c.getTime()-d.getTime())/(g-e),this.d2v=function(b){return Math.floor(e+
(b.getTime()-d.getTime())/a)},this.v2d=function(b){return new Date(Math.ceil(d.getTime()+(b-e)*a))}):(a=(c-d)/(g-e),this.d2v=function(b){return e+(b-d)/a},this.v2d=function(b){return d+(b-e)*a})}else{var b,f;l?(n=r(d.getTime()),c=r(c.getTime()),b=(g-e)/(c-n),f=e-b*n,this.d2v=function(a){return Math.floor(1>=a.getTime()?0:b*r(a.getTime())+f)},this.v2d=function(a){return new Date(Math.ceil(Math.pow(10,(a-f)/b)))}):(n=r(0>=d?1:d),c=r(0>=c?1:c),b=(g-e)/(c-n),f=e-b*n,this.d2v=function(a){return Math.floor(1>=
a?0:b*r(a)+f)},this.v2d=function(a){return Math.ceil(Math.pow(10,(a-f)/b))})}};p.dvInfo.prototype.toString=function(){return"(d0="+this.d0()+",d1="+this.d1()+") (v0="+this.v0()+",v1="+this.v1()+") isLinear="+this.isLinear()};p.Axis=function(d,c){var e=this;WAVE.extend(e,WAVE.EventManager);c=c||{};this.chart=function(){return d};var g=c.dataType||p.DataType.NUMBER;this.dataType=function(a){"undefined"!==typeof a&&a!==g&&(g=a,e.fireChanged());return g};var n=c.min||null;this.min=function(a){"undefined"!==
typeof a&&a!==n&&(n=a,e.fireChanged());return n};var l=c.max||null;this.max=function(a){"undefined"!==typeof a&&a!==l&&(l=a,e.fireChanged());return l};var t=c.minMargin||0;this.minMargin=function(a){"undefined"!==typeof a&&$.isNumeric(a)&&a!==t&&(t=a,e.fireChanged());return t};var q=c.maxMargin||0;this.maxMargin=function(a){"undefined"!==typeof a&&$.isNumeric(a)&&a!==q&&(q=a,e.fireChanged());return q};var x=!1!==c.isLinear;this.isLinear=function(a){"undefined"!==typeof a&&a!==x&&(x=a,e.fireChanged());
return x};var r=c.markType||p.AxisMarkType.AUTO;this.markType=function(a){"undefined"!==typeof a&&a!==r&&(r=a,e.fireChanged());return r};var v=5;this.tickLength=function(a){"undefined"!==typeof a&&a!==v&&(v=a,e.fireChanged());return v};var a=c.tickTextMargin||3;this.tickTextMargin=function(b){"undefined"!==typeof b&&b!==a&&(a=b,e.fireChanged());return a};var b;this.dvInfo=function(a){"undefined"!==typeof a&&(b=a);return b};var f;this.ticks=function(a){"undefined"!==typeof a&&(f=a);return f};this.fireChanged=
function(){e.eventInvoke("EVT_CHANGED")}};p.Axis.prototype.toSeconds=function(d){return d.valueOf()/1E3};p.Axis.prototype.fromSeconds=function(d){return new Date(1E3*d)};p.Axis.prototype.getVTimeTicks=function(d,c,e,g,n,l){e=this.toSeconds(e);var t=this.toSeconds(g)-e,q=c-d;g=t/q;var t=this.calcTimeTickLength(q,t,n,l),p=t.dThreshhold,t=t.vTickLength,p=(Math.floor(e/p)*p-e)/g,r=[],v=l+n/2;for(n=q-(l+n/2);p<=c;)p>=v&&p<=n&&r.push({vTick:d+p,dTick:this.fromSeconds(e+p*g)}),p+=t;return r};p.Axis.prototype.calcTimeTickLength=
function(d,c,e,g){var n=c/d,l=c/Math.floor(d/(e+2*g));d=z.wFirst(function(c){return l<c});return{vTickLength:d/n,dThreshhold:d}};p.Axis.prototype.getVLog10Ticks=function(d,c,e,g,n,l){var t=c-d;g=Math.ceil(Math.log(g-e)/Math.LN10);c=t/g;var q=[],p=l+n/2;n=t-(l+n/2);l=0;for(var t=d,r=1;l<=g;l++,t+=c,r*=10)t>=p&&t<=n&&q.push({vTick:d+t,dTick:e+r});return q};p.Axis.prototype.getVTicks=function(d,c,e,g,n,l){var t=[],q=g-e,p=c-d;g=q/p;var q=this.calcTicksLength(p,q,n,l),r=q.dTickLength,q=q.vTickLength,
r=(Math.ceil(e/r)*r-e)/g,v=l+n/2;for(n=p-(l+n/2);r<=c;)r>=v&&r<=n&&t.push({vTick:d+r,dTick:e+r*g}),r+=q;return t};p.Axis.prototype.calcTicksLength=function(d,c,e,g){var n=c/d,l=WAVE.arrayWalkable([1,2,3,5,10]);d=c/(Math.floor(d/(e+g))-1);c=Math.pow(10,Math.floor(Math.log(d)/Math.LN10));var t=d/c,l=l.wFirst(function(c){return t<c})*c;return{vTickLength:l/n,dTickLength:l}};p.Axis.prototype.labelValToStr=function(d){return this.dataType()===p.DataType.NUMBER?WAVE.siNum(d,2):WAVE.toUSDateTimeString(d)};
p.Axis.prototype.calcLabelRc=function(d,c,e){this.dataType()===p.DataType.NUMBER?(c=this.labelValToStr(c),e=this.labelValToStr(e),e=e.length>=c.length?e:c):e=this.labelValToStr(c);e=WAVE.SVG.createText(e,0,0,{class:"wvAxisLabel wvXAxisLabel",visibility:"hidden"});d.appendChild(e);c=e.getBBox();d.removeChild(e);return c};p.XZone=function(d){var c=this;WAVE.extend(c,WAVE.EventManager);this.chart=function(){return d};var e=!0;this.enabled=function(d){"undefined"!==typeof d&&d!==e&&(e=d,c.eventInvoke("EVT_CHANGED"));
return e}};p.XZone.prototype.getHeight=function(d){var c=this.chart().seriesListWalkable().wGroup(function(c){return c.xAxis()},function(c){return c.dataSet()}),e=WAVE.arrayWalkable(c.wSelect(function(c){return{axis:c.k,height:c.k.getHeight(d,c.v)}}).wToArray()).wGroup(function(c){return c.axis.isBottom()},function(c){return c.height}).wGroupAggregate(function(c,d,e){return(d||0)+e}),c={top:0,bottom:0};if(!this.enabled())return c;for(e=e.getWalker();e.moveNext();){var g=e.current();!0===g.k?c.bottom=
g.v:c.top=g.v}return c};p.XZone.prototype.draw=function(d,c){for(var e in c){var g=c[e],g=WAVE.SVG.createRect(g.left(),g.top(),g.width(),g.height(),{class:"wvSvgBkgr wvXZoneBackground"});d.appendChild(g)}e=this.chart().seriesListWalkable().wGroup(function(c){return c.xAxis()},function(c){return c.dataSet()}).getWalker();for(var g=c.top.bottom(),n=c.bottom.top();e.moveNext();){var l=e.current(),t=l.k.getHeight(d,l.v),q;!0===l.k.isBottom()?(q=new y.Rectangle(new y.Point(c.bottom.left(),n),new y.Point(c.bottom.right(),
n+t)),n+=t):(q=new y.Rectangle(new y.Point(c.top.left(),g-t),new y.Point(c.top.right(),g)),g-=t);l.k.draw(d,q,l.v)}};p.XAxis=function(d,c){p.Axis.call(this,d,c);var e=this;c=c||{};var g=c.verticalMargin||3;this.verticalMargin=function(c){"undefined"!==typeof c&&c!==g&&(g=c,e.fireChanged());return g};var n=!1!==c.isBottom;this.isBottom=function(c){"undefined"!==typeof c&&c!==n&&(n=c,e.fireChanged());return n}};p.XAxis.prototype=Object.create(p.Axis.prototype);p.XAxis.prototype.constructor=p.XAxis;
p.XAxis.prototype.d2v=function(d){return this.dvInfo().d2v(d)};p.XAxis.prototype.v2d=function(d){return this.dvInfo().v2d(d)};p.XAxis.prototype.draw=function(d,c,e){var g=this.getMinMax(e);this.dvInfo(new p.dvInfo(g.min,g.max,c.left(),c.right(),this.isLinear()));g=this.isBottom()?WAVE.SVG.createLine(c.left(),c.top(),c.right(),c.top(),{class:"wvAxisLine"}):WAVE.SVG.createLine(c.left(),c.bottom(),c.right(),c.bottom(),{class:"wvAxisLine"});d.appendChild(g);this.markAxis(d,c,e)};p.XAxis.prototype.getHeight=
function(d,c){this.minMax=this.getMinMax(c);var e;!this.minMax.min&&0!==this.minMax.min||!this.minMax.max&&0!==this.minMax.max?e=0:(e=this.calcLabelRc(d,this.minMax.min,this.minMax.max),e=Math.ceil(e.height));return this.tickLength()+this.verticalMargin()+this.tickTextMargin()+e};p.XAxis.prototype.getMinMax=function(d){var c=this.min()||d.wSelect(function(c){return c.getMinX()}).wWhere(function(c){return null!==c}).wMin();null===c&&(c=this.dataType()===p.DataType.DATE?new Date:0);c=this.dataType()===
p.DataType.DATE?new Date(c.getTime()-1E3*this.minMargin()):c-this.minMargin();d=this.max()||d.wSelect(function(c){return c.getMaxX()}).wMax();null===d&&(d=this.dataType()===p.DataType.DATE?new Date:0);d=this.dataType()===p.DataType.DATE?new Date(d.getTime()+1E3*this.maxMargin()):d+this.maxMargin();return this.minMax={min:c,max:d}};p.XAxis.prototype.markAxis=function(d,c,e){var g,n=this.getMinMax(e);if((this.minMax.min||0===this.minMax.min)&&(this.minMax.max||0===this.minMax.max)){var l=this.calcLabelRc(d,
n.min,n.max),t=l.width,l=l.height;if(this.markType()===p.AxisMarkType.AUTO)g=this.dataType()===p.DataType.DATE?this.getVTimeTicks(c.left(),c.right(),n.min,n.max,t,5):this.getVTicks(c.left(),c.right(),n.min,n.max,t,5);else if(this.markType()===p.AxisMarkType.EXACT_BY_POINTS){e=e[0];g=[];for(var q in e)n=e[q],g.push({vTick:this.d2v(n.x),dTick:n.x})}this.ticks(g);for(var r in g)q=g[r],e=this.isBottom()?WAVE.SVG.createLine(q.vTick,c.top(),q.vTick,c.top()+this.tickLength(),{class:"wvAxisTickLine"}):WAVE.SVG.createLine(q.vTick,
c.bottom(),q.vTick,c.bottom()-this.tickLength(),{class:"wvAxisTickLine"}),d.appendChild(e),e=this.labelValToStr(q.dTick),e=this.isBottom()?WAVE.SVG.createText(e,q.vTick,c.top()+this.tickTextMargin()+l,{class:"wvAxisLabel wvXAxisLabel"}):WAVE.SVG.createText(e,q.vTick,c.bottom()-this.tickTextMargin()-this.tickLength(),{class:"wvAxisLabel wvXAxisLabel"}),d.appendChild(e),n=e.getBBox(),e.setAttribute("x",q.vTick-n.width/2)}};p.YZone=function(d){var c=this;WAVE.extend(c,WAVE.EventManager);this.chart=function(){return d};
var e=!0;this.enabled=function(d){"undefined"!==typeof d&&d!==e&&(e=d,c.eventInvoke("EVT_CHANGED"));return e};this.getWidth=function(d){var n=c.chart().seriesListWalkable().wGroup(function(c){return c.yAxis()},function(c){return c.dataSet()}),l=WAVE.arrayWalkable(n.wSelect(function(c){return{axis:c.k,width:c.k.getWidth(d,c.v)}}).wToArray()).wGroup(function(c){return c.axis.isLeft()},function(c){return c.width}).wGroupAggregate(function(c,d,e){return(d||0)+e}),n={left:0,right:0};if(!e)return n;for(l=
l.getWalker();l.moveNext();){var u=l.current();!0===u.k?n.left=u.v:n.right=u.v}return n};this.draw=function(d,e){for(var m in e){var u=e[m],u=WAVE.SVG.createRect(u.left(),u.top(),u.width(),u.height(),{class:"wvSvgBkgr wvYZoneBackground"});d.appendChild(u)}m=c.chart().seriesListWalkable().wGroup(function(a){return a.yAxis()},function(a){return a.dataSet()}).getWalker();for(var u=e.left.right(),q=e.right.left();m.moveNext();){var p=m.current(),r=p.k.getWidth(d,p.v),v;!0===p.k.isLeft()?(v=new y.Rectangle(new y.Point(u-
r,e.left.top()),new y.Point(u,e.left.bottom())),u-=r):(v=new y.Rectangle(new y.Point(q,e.left.top()),new y.Point(q+r,e.left.bottom())),q+=r);p.k.draw(d,v,p.v)}}};p.YAxis=function(d,c){p.Axis.call(this,d,c);var e=this;c=c||{};var g=c.horizontalMargin||3;this.horizontalMargin=function(c){"undefined"!==typeof c&&c!==g&&(g=c,e.fireChanged());return g};var n=c.minWidth||0;this.minWidth=function(c){"undefined"!==typeof c&&c!==n&&(n=c,e.fireChanged());return n};var l=!1!==c.isLeft;this.isLeft=function(c){"undefined"!==
typeof c&&c!==l&&(l=c,e.fireChanged());return l}};p.YAxis.prototype=Object.create(p.Axis.prototype);p.YAxis.prototype.constructor=p.YAxis;p.YAxis.prototype.d2v=function(d){return this.dvInfo().v0()+this.dvInfo().v1()-this.dvInfo().d2v(d)};p.YAxis.prototype.v2d=function(d){return this.dvInfo().v2d(this.dvInfo().v0()+this.dvInfo().v1()-d)};p.YAxis.prototype.markAxis=function(d,c,e){var g;if(this.markType()===p.AxisMarkType.AUTO){g=this.getMinMax(e);var n=this.calcLabelRc(d,g.min,g.max).height;e=.2*
n;g=this.dataType()===p.DataType.DATE?this.getVTimeTicks(c.top(),c.bottom(),g.min,g.max,n,e):this.isLinear()?this.getVTicks(c.top(),c.bottom(),g.min,g.max,n,e):this.getVLog10Ticks(c.top(),c.bottom(),g.min,g.max,n,e)}else if(this.markType()===p.AxisMarkType.EXACT_BY_POINTS)for(n in e=e[0],e){var l=e[n];g.push({vTick:this.d2v(l.y),dTick:l.y})}this.ticks(g);n=0;e=[];for(var t in g){var q=g[t],l=c.top()+c.bottom()-q.vTick,r;r=this.isLeft()?WAVE.SVG.createLine(c.right()-this.tickLength(),l,c.right(),l,
{class:"wvAxisTickLine"}):WAVE.SVG.createLine(c.left(),l,c.left()+this.tickLength(),l,{class:"wvAxisTickLine"});d.appendChild(r);q=this.labelValToStr(q.dTick);q=this.isLeft()?WAVE.SVG.createText(q,c.right()-this.tickTextMargin()-this.tickLength(),l,{class:"wvAxisLabel wvYAxisLabel"}):WAVE.SVG.createText(q,c.left()+this.tickLength()+this.tickTextMargin(),l,{class:"wvAxisLabel wvYAxisLabel"});d.appendChild(q);r=q.getBBox();q.setAttribute("y",l+r.height/3);e.push(q);r.width>n&&(n=r.width)}if(!this.isLeft())for(var w in e)d=
e[w],c=parseFloat(d.getAttribute("x")),c+=n,d.setAttribute("x",c)};p.YAxis.prototype.draw=function(d,c,e){var g=this.getMinMax(e);this.dvInfo(new p.dvInfo(g.min,g.max,c.top(),c.bottom(),this.isLinear()));g=this.isLeft()?WAVE.SVG.createLine(c.right(),c.top(),c.right(),c.bottom(),{class:"wvAxisLine"}):WAVE.SVG.createLine(c.left(),c.top(),c.left(),c.bottom(),{class:"wvAxisLine"});d.appendChild(g);this.markAxis(d,c,e)};p.YAxis.prototype.getWidth=function(d,c){this.minMax=this.getMinMax(c);var e=this.calcLabelRc(d,
this.minMax.min,this.minMax.max),e=this.tickLength()+this.horizontalMargin()+Math.ceil(e.width);return Math.max(e,this.minWidth())};p.YAxis.prototype.getMinMax=function(d){var c=this.min()||d.wSelect(function(c){return c.getMinY()}).wWhere(function(c){return null!==c}).wMin(),c=this.dataType()===p.DataType.DATE?new Date(c.getTime()-1E3*this.minMargin()):c-this.minMargin();d=this.max()||d.wSelect(function(c){return c.getMaxY()}).wMax();d=this.dataType()===p.DataType.DATE?new Date(d.getTime()+1E3*this.maxMargin()):
d+this.maxMargin();return this.minMax={min:c,max:d}};p.LZone=function(d,c){function e(){g.eventInvoke("EVT_CHANGED")}c=c||{};var g=this;WAVE.extend(g,WAVE.EventManager);this.chart=function(){return d};var n=!1!==c.enabled;this.enabled=function(c){"undefined"!==typeof c&&c!==n&&(n=c,e());return n};var l=c.legendMargin||10;this.legendMargin=function(c){"undefined"!==typeof c&&c!==l&&(l=c,e());return l};var t=c.seriesMargin||3;this.seriesMargin=function(c){"undefined"!==typeof c&&c!==t&&(t=c,e());return t};
var q=c.prefixLength||10;this.prefixLength=function(c){"undefined"!==typeof c&&c!==q&&(q=c,e());return q};var r=c.rowSpace||3;this.rowSpace=function(c){"undefined"!==typeof c&&c!==r&&(r=c,e());return r};var w=c.corner||p.RectCorner.RIGHTTOP;this.corner=function(c){"undefined"!==typeof c&&c!==w&&(w=c,e());return w}};p.LZone.prototype.getSize=function(d){var c=this.chart().seriesListWalkable().wSelect(function(c){return c.title()||""}).wMax(function(c,d){return c.length>d.length}),e=WAVE.SVG.createText(c,
0,0,{class:"wvLegendName",visibility:"hidden"});d.appendChild(e);c=e.getBBox();d.removeChild(e);d=this.rowSpace()+this.prefixLength()+this.rowSpace()+c.width+this.rowSpace();c=this.chart().seriesListWalkable().wCount()*(2*this.seriesMargin()+c.height);return{w:d,h:c}};p.LZone.prototype.drawLegendPrefix=function(d,c,e){var g=(c.top()+c.bottom())/2;c=WAVE.SVG.createPath({d:"M"+c.left()+","+g+" L"+(c.left()+this.prefixLength())+","+g,class:e.lineClass()});d.appendChild(c)};p.LZone.prototype.draw=function(d,
c){if(this.enabled()){var e=this,g=this.chart().seriesListWalkable(),n=WAVE.SVG.createRect(c.left(),c.top(),c.width(),c.height(),{class:"wvLZoneBackground"});d.appendChild(n);var l=c.top()+this.seriesMargin();g.wEach(function(g){var n=WAVE.SVG.createGroup({class:g.class()});d.appendChild(n);var p=WAVE.SVG.createText(g.title(),c.left()+e.rowSpace()+e.prefixLength()+e.rowSpace(),l,{class:"wvLegendName"});n.appendChild(p);var r=p.getBBox();p.setAttribute("y",l+3*r.height/4);p=new y.Rectangle(new y.Point(c.left()+
e.rowSpace(),l),new y.Point(c.left()+e.rowSpace()+e.prefixLength(),l+r.height));e.drawLegendPrefix(n,p,g);l+=r.height+2*e.seriesMargin()})}};var d=0;p.SZone=function(d,c){function e(){g.eventInvoke("EVT_CHANGED")}var g=this;WAVE.extend(g,WAVE.EventManager);c=c||{};this.chart=function(){return d};var n=c.chartType||p.ChartType.LINE;this.chartType=function(a){"undefined"!==typeof a&&a!==n&&(n=a,e());return n};var l=c.squareFillType||p.SquareFillType.BOTTOM;this.squareFillType=function(a){"undefined"!==
typeof a&&a!==l&&(l=a,e());return l};var t=c.pointType||p.PointType.CIRCLE;this.pointType=function(a){"undefined"!==typeof a&&a!==t&&(t=a,e());return t};var q=c.lineClass||"wvSeriesLine";this.lineClass=function(a){"undefined"!==typeof a&&a!==q&&(q=a,e());return q};var r=c.lineSquareClass||"wvSeriesLineArea";this.lineSquareClass=function(a){"undefined"!==typeof a&&a!==r&&(r=a,e());return r};var w=c.pointClass||"wvSeriesPoint";this.pointClass=function(a){"undefined"!==typeof a&&a!==w&&(w=a,e());return w};
var v=c.pointSize||5;this.pointSize=function(a){"undefined"!==typeof a&&a!==v&&(v=a,e());return v};var a=c.barClass||"wvSeriesRect";this.barClass=function(b){"undefined"!==typeof b&&b!==a&&(a=b,e());return a};var b=c.barWidth||10;this.barWidth=function(a){"undefined"!==typeof a&&a!==b&&(b=a,e());return b};var f=c.barGroupMargin||5;this.barGroupMargin=function(a){"undefined"!==typeof a&&a!==f&&(f=a,e());return f};var k=c.barMargin||3;this.barMargin=function(a){"undefined"!==typeof a&&a!==f&&(k=a,e());
return k};var y=c.showPointTooltip||!1;this.showPointTooltip=function(a){"undefined"!==typeof a&&a!==y&&(y=a);return y};var z=c.pointTooltipFormat||"Series: @series@, title: @title@, v: [@vx@, @vy@], d: [@dx@, @dy@]";this.pointTooltipFormat=function(a){"undefined"!==typeof a&&a!==z&&(z=a);return z};var h=c.showPointTitle||!1;this.showPointTitle=function(a){"undefined"!==typeof a&&a!==h&&(h=a,e());return h};var A=c.pointTitleFormat||"@title@";this.pointTitleFormat=function(a){"undefined"!==typeof a&&
a!==A&&(A=a,e());return A};var S=c.pointTitleClass||"wvChartPointTitle";this.pointTitleClass=function(a){"undefined"!==typeof a&&a!==S&&(S=a,e());return S};var K=c.pointTitleAngle||0;this.pointTitleAngle=function(a){"undefined"!==typeof a&&a!==K&&(K=a,e());return K};var B=c.pointTitleMargin||5;this.pointTitleMargin=function(a){"undefined"!==typeof a&&a!==B&&(B=a,e());return B};var O=!1!==c.showPointTitleLeg;this.showPointTitleLeg=function(a){"undefined"!==typeof a&&a!==O&&(O=a,e());return O};this.showDefaultRuler=
function(a){var b=0<G.length;return"undefined"!==typeof a&&a!==b?(a?g.attachToRulerScope(""):g.detachFromRulerScope(""),G.length&&e(),a):b};var G=[];this.rulerScopes=function(){return WAVE.arrayShallowCopy(G)};this.attachToRulerScope=function(a){-1===G.indexOf(a)&&(G.push(a),e())};this.detachFromRulerScope=function(a){a=G.indexOf(a);-1!==a&&(G.splice(a,1),e())};var U=!1!==c.rulerCheckXContains;this.rulerCheckXContains=function(a){"undefined"!==typeof a&&a!==U&&(U=a,e());return U};var M=!1!==c.rulerCheckYContains;
this.rulerCheckYContains=function(a){"undefined"!==typeof a&&a!==M&&(M=a,e());return M};var ca=null;this.lastArea=function(){return ca};var H=[],na=WAVE.arrayWalkable(H),I=[],X=WAVE.arrayWalkable(I),W=[],ba=WAVE.arrayWalkable(W);this.addVTitle=function(a){H.push(a)};this.addVPoint=function(a){I.push(a)};this.addVLine=function(a){W.push(a)};this.getTitleRcPenalty=function(a,b){var c=a.square(),d=WAVE.Geometry.overlapAreaRect(b,a),c=c-d,d=na.wWhere(function(b){return!(b.right()<a.left()||b.left()>a.right()||
b.bottom()<a.top()||b.top()>a.bottom())}).wSelect(function(b){return WAVE.Geometry.overlapAreaRect(a,b)}).wSum(),f=X.wWhere(function(b){return!(b.right()<a.left()||b.left()>a.right()||b.bottom()<a.top()||b.top()>a.bottom())}).wSelect(function(b){return WAVE.Geometry.overlapAreaRect(a,b)}).wSum(),e=ba.wWhere(function(b){return!(b.x2<a.left()||b.x1>a.right())}).wSelect(function(b){return WAVE.Geometry.intersectionLengthRectLineXY(a.left(),a.top(),a.right(),a.bottom(),b.x1,b.y1,b.x2,b.y2)}).wSum();return c+
d+f+2*e};this.draw=function(a,b){ca=b;H.splice(0,H.length);I.splice(0,I.length);W.splice(0,W.length);var c=WAVE.SVG.createRect(b.left(),b.top(),b.width(),b.height(),{class:"wvSvgBkgr wvSZoneBackground"});a.appendChild(c);var c="clip"+WAVE.genAutoincKey("__wv.chart.svg"),d=WAVE.SVG.createRect(b.left(),b.top(),b.width(),b.height()),d=WAVE.SVG.createClipPath(c,[d]),d=WAVE.SVG.createDefs([d]);a.appendChild(d);var f=WAVE.SVG.createGroup({style:"clip-path: url(#"+c+")"});a.appendChild(f);var c=g.chart().seriesListWalkable(),
d=c.wSelect(function(a){return a.xAxis()}).wDistinct(),e=c.wSelect(function(a){return a.yAxis()}).wDistinct();d.wEach(function(a){a=a.ticks();for(var c in a){var d=a[c],d=WAVE.SVG.createLine(d.vTick,b.top(),d.vTick,b.bottom(),{class:"wvGridLine wvGridXLine"});f.appendChild(d)}});e.wEach(function(a){a=a.ticks();for(var c in a){var d=a[c],d=b.top()+b.bottom()-d.vTick,d=WAVE.SVG.createLine(b.left(),d,b.right(),d,{class:"wvGridLine wvGridYLine"});f.appendChild(d)}});c.wGroup(function(a){return a.chartType()},
function(a){return a}).wEach(function(c){switch(c.k){case p.ChartType.BAR:var d=g.barWidth(),e=g.barGroupMargin(),h=g.barMargin(),k=c.v.wCount(),m=c.v.wFirst();if(m.barBase()===p.RectSide.BOTTOM){var l=c.v.wMin(function(a,b){return a.dataSet().getMinX()<a.dataSet().getMinX()});if("undefined"===typeof l)break;var n=c.v.wMax(function(a,b){return a.dataSet().getMaxX()>a.dataSet().getMaxX()});if("undefined"===typeof n)break;for(var l=l.dataSet().getMinX(),n=n.dataSet().getMaxX(),q=m.xAxis().dvInfo(),
m=q.d2v(l),n=q.d2v(n),k=Math.floor((n-m+e)/(k*(d+h)-h+e)),e=(n-m+e)/k,n=0;n<k;n++){var u=m+e*n,t=u;c.v.wEach(function(a){var c=q.v2d(u),c=a.getVY(c),c="M"+t+","+c+" h"+d+" V"+b.bottom()+" h-"+d+" Z",c=WAVE.SVG.createPath({d:c,class:a.lineSquareClass()});a=WAVE.SVG.createGroup({class:a.class()});f.appendChild(a);a.appendChild(c);t+=d+h})}}break;default:c.v.wEach(function(c){var d=WAVE.SVG.createGroup({class:c.class()});f.appendChild(d);c.drawAllButTitle(a,d,b)})}});c.wWhere(function(a){return a.chartType()&
p.ChartType.POINT}).wEach(function(c){var d=WAVE.SVG.createGroup({class:c.class()});f.appendChild(d);c.drawPointTitles(a,d,b)})}};var A=function(e,c){function m(){g.invokeEvent("EVT_CHANGED")}var g=this;WAVE.extend(g,WAVE.EventManager);c=c||{};this.chart=function(){return e};var n="undefined"!==typeof c.id?c.id:(++d).toString();this.id=function(){return n};var l=c.title||"";this.title=function(a){"undefined"!==typeof a&&a!==l&&(l=a,m());return l};var t=c.class||"";this.class=function(a){"undefined"!==
typeof a&&a!==t&&(t=a,m());return t};var q=c.lineClass;this.lineClass=function(a){"undefined"!==typeof a&&a!==q&&(q=a,m());return q||g.chart().sZone().lineClass()};var r=c.lineSquareClass;this.lineSquareClass=function(a){"undefined"!==typeof a&&a!==r&&(r=a,m());return r||g.chart().sZone().lineSquareClass()};var w=c.barClass;this.barClass=function(a){"undefined"!==typeof a&&a!==w&&(w=a,m());return w||g.chart().sZone().barClass()};var v=c.chartType;this.chartType=function(a){"undefined"!==typeof a&&
a!==v&&(v=a,m());return v||g.chart().sZone().chartType()};var a=c.squareFillType;this.squareFillType=function(b){"undefined"!==typeof b&&b!==a&&(a=b,m());return a||g.chart().sZone().squareFillType()};var b=c.pointType;this.pointType=function(a){"undefined"!==typeof a&&a!==b&&(b=a,m());return b||g.chart().sZone().pointType()};var f=c.pointClass||"wvSeriesPoint";this.pointClass=function(a){"undefined"!==typeof a&&a!==f&&(f=a,m());return f||g.chart().sZone().pointClass()};var k=c.pointSize;this.pointSize=
function(a){"undefined"!==typeof a&&a!==k&&(k=a,m());return k||g.chart().sZone().pointSize()};var y=p.RectSide.BOTTOM;this.barBase=function(a){"undefined"!==typeof a&&a!==y&&(y=a,m());return y||g.chart().sZone().barBase()};var z=new p.DataSet;z.eventBind("EVT_CHANGED",function(){g.eventInvoke("EVT_CHANGED")});this.dataSet=function(){return z};var h=c.xAxis;this.xAxis=function(a){"undefined"!==typeof a&&a!==h&&(h&&h.eventUnbind("EVT_CHANGED",m),h=a,h.eventBind("EVT_CHANGED",m),m());return h||g.chart().xAxis()};
var A=c.yAxis;this.yAxis=function(a){"undefined"!==typeof a&&a!==A&&(A&&A.eventUnbind("EVT_CHANGED",m),A=a,A.eventBind("EVT_CHANGED",m),m());return A||g.chart().yAxis()};var S=c.showPointTooltip;this.showPointTooltip=function(a){"undefined"!==typeof a&&a!==S&&(S=a);return S||g.chart().sZone().showPointTooltip()};var K=c.pointTooltipFormat;this.pointTooltipFormat=function(a){"undefined"!==typeof a&&a!==K&&(K=a);return K||g.chart().sZone().pointTooltipFormat()};var B=c.showPointTitle;this.showPointTitle=
function(a){"undefined"!==typeof a&&a!==B&&(B=a,m());return B||g.chart().sZone().showPointTitle()};var O=c.pointTitleFormat;this.pointTitleFormat=function(a){"undefined"!==typeof a&&a!==O&&(O=a,m());return O||g.chart().sZone().pointTitleFormat()};var G=c.pointTitleClass;this.pointTitleClass=function(a){"undefined"!==typeof a&&a!==G&&(G=a,m());return G||e.sZone().pointTitleClass()};var U=c.pointTitleAngle;this.pointTitleAngle=function(a){"undefined"!==typeof a&&a!==U&&(U=a,m());return U||e.sZone().pointTitleAngle()};
var M=c.pointTitleMargin;this.pointTitleMargin=function(a){"undefined"!==typeof a&&a!==M&&(M=a,m());return M||e.sZone().pointTitleMargin()};var ca=!1!==c.showPointTitleLeg;this.showPointTitleLeg=function(a){"undefined"!==typeof a&&a!==ca&&(ca=a,m());return!1===ca?!1:ca||e.sZone().showPointTitleLeg()}};A.prototype.getDY=function(d){var c=this.dataSet().getPointByX(d);if(null!==c)return c.y;c=this.dataSet().getNearestNeighbours(d);return null===c?null:null===c.left?c.right.y:null===c.right?c.left.y:
(d-c.left.x)/(c.right.x-c.left.x)*(c.right.y-c.left.y)+c.left.y};A.prototype.getVY=function(d){d=this.getDY(d);return this.yAxis().d2v(d)};A.prototype.foreachPoint=function(d){var c=this,e=this.xAxis(),g=this.yAxis();c.dataSet().forEach(function(n){var l=Math.round(e.d2v(n.x)),p=Math.round(g.d2v(n.y));isNaN(l)||isNaN(p)||d(l,p,n.x,n.y,n.title,c)})};A.prototype.drawAllButTitle=function(d,c,e,g){var n=this,l,t;if(this.chartType()&p.ChartType.LINE||this.chartType()&p.ChartType.LINE_SQUARE){l="";t=null;
var q,r;n.foreachPoint(function(a,b,c,d,e,g){null===t?(t=a,c="M"):(c="L",n.chart().sZone().addVLine({x1:q,y1:r,x2:a,y2:b}));l+=c+a+","+b+" ";q=a;r=b});""!==l&&this.chartType()&p.ChartType.LINE_SQUARE&&(l=this.squareFillType()===p.SquareFillType.BOTTOM?l+("V"+e.bottom()+" H"+t+" Z"):l+("V"+e.top()+" H"+t+" Z"));g=WAVE.SVG.createPath({d:l,class:this.chartType()&p.ChartType.LINE_SQUARE?this.lineSquareClass():this.lineClass()});c.appendChild(g)}if(this.chartType()&p.ChartType.SPLINE||this.chartType()&
p.ChartType.SPLINE_SQUARE){l="";var w="M",v=0,a=[];t=null;n.foreachPoint(function(b,c,d,e,h,g){null===t&&(t=b);"M"===w?(l="M"+b+","+c+" ",w="C"):"C"===w?(a.unshift({x:b,y:c}),v++,3===v&&(b=a.pop(),c=a.pop(),d=a.pop(),l+="C"+b.x+","+b.y+" "+c.x+","+c.y+" "+d.x+","+d.y+" ",v=0,w="S")):"S"===w&&(a.unshift({x:b,y:c}),v++,2===v&&(c=a.pop(),d=a.pop(),l+="S"+c.x+","+c.y+" "+d.x+","+d.y+" ",v=0))});if("C"===w)if(1===v)g=a.pop(),l+="L"+g.x+","+g.y;else{if(2===v){g=a.pop();var b=a.pop();l+="Q"+g.x+","+g.y+
" "+b.x+","+b.y}}else"S"===w&&1===v&&(g=a.pop(),l+="T"+g.x+","+g.y);""!==l&&this.chartType()&p.ChartType.SPLINE_SQUARE&&(l+="V"+e.bottom()+" H"+t+" Z");g=WAVE.SVG.createPath({d:l,class:this.chartType()&p.ChartType.SPLINE_SQUARE?this.lineSquareClass():this.lineClass()});c.appendChild(g)}this.chartType()&p.ChartType.POINT&&n.foreachPoint(function(a,b,g,l,h,q){n.drawPoint(d,c,e,a,b,g,l,h,q)})};A.prototype.drawPointTitles=function(d,c,e){var g=this;this.chartType()&p.ChartType.POINT&&this.foreachPoint(function(n,
l,p,q,r,w){g.drawPointTitle(d,c,e,n,l,p,q,r)})};A.prototype.drawPoint=function(d,c,e,g,n,l,t,q){var r;switch(this.pointType()){case p.PointType.CIRCLE:r=this.drawPointCircle(g,n,l,t);break;case p.PointType.RECT:r=this.drawPointRect(g,n,l,t);break;case p.PointType.TRI:r=this.drawPointTriangle(g,n,l,t)}var w=this;r&&(r.addEventListener("mouseover",function(c){w.chart().onSeriesMouseOver({originalEvt:c,vx:g,vy:n,dx:l,dy:t,title:q,series:w})}),r.addEventListener("mouseout",function(c){w.chart().onSeriesMouseOut({originalEvt:c,
vx:g,vy:n,dx:l,dy:t,title:q,series:w})}),r.addEventListener("click",function(c){w.chart().onSeriesClick({originalEvt:c,vx:g,vy:n,dx:l,dy:t,title:q,series:w})}),c.appendChild(r))};A.prototype.drawPointTitle=function(d,c,e,g,n,l,p,q){if(this.showPointTitle()&&q){var r=WAVE.strTemplate(this.pointTitleFormat(),{vx:g,vy:n,dx:l,dy:p,title:q,series:this.title()}),w=WAVE.SVG.createGroup({class:this.pointTitleClass(),transform:"rotate("+this.pointTitleAngle()+","+g+","+n+")"}),r=WAVE.SVG.createText(r,g,n);
w.appendChild(r);d.appendChild(w);var v=w.getBBox();d.removeChild(w);var a=v.x,b=v.y,f=v.width,k=v.height,a=a-2,b=b-2,f=f+4,k=k+4,v=g-a;d=n-b;for(var y=n-(b+k/2),A=g+this.pointTitleMargin(),a=WAVE.Geometry.toRectWH(a+(A-a),b+y,f,k),b=this.chart().sZone(),f=Number.MAX_VALUE,k=0;k<2*Math.PI;k+=Math.PI/4){y=WAVE.Geometry.rotateRectAroundCircle(g,n,15,a.width(),a.height(),k);A=b.getTitleRcPenalty(y,e);if(0===A){a=y;break}A<f&&(f=A,a=y)}b.addVTitle(a);e=WAVE.SVG.createRect(a.left(),a.top(),a.width(),a.height(),
{rx:4,ry:4});r.setAttribute("x",a.left()+v);r.setAttribute("y",a.top()+d);var h=this;w.addEventListener("mouseover",function(a){h.chart().onSeriesPointTitleMouseOver({originalEvt:a,vx:g,vy:n,dx:l,dy:p,title:q,series:h})});w.addEventListener("mouseout",function(a){h.chart().onSeriesPointTitleMouseOut({originalEvt:a,vx:g,vy:n,dx:l,dy:p,title:q,series:h})});w.addEventListener("click",function(a){h.chart().onSeriesPointTitleClick({originalEvt:a,vx:g,vy:n,dx:l,dy:p,title:q,series:h})});w.insertBefore(e,
r);this.showPointTitleLeg()&&(r=(new WAVE.Geometry.Point(g,n)).toPolarPoint(a.centerPoint()).theta(),r=WAVE.Geometry.findRayFromRectangleCenterSideIntersection(a,r),r=WAVE.SVG.createLine(r.x(),r.y(),g,n),w.insertBefore(r,e));c.appendChild(w)}};A.prototype.calcTitlePos=function(d,c,e,g){var n=null,l=null,p,q,r=e.width*e.height;p=d+5;q=c-5-e.height;var w=WAVE.Geometry.overlapAreaWH(g.left(),g.top(),g.width(),g.height(),p,q,e.width,e.height);w!==r?(p=d-5-e.width,q=c-5-e.height,w=WAVE.Geometry.overlapAreaWH(g.left(),
g.top(),g.width(),g.height(),p,q,e.width,e.height),w!==r?(p=d+5,q=c+5,w=WAVE.Geometry.overlapAreaWH(g.left(),g.top(),g.width(),g.height(),p,q,e.width,e.height),w!==r?(p=d-5-e.width,q=c+5,w=WAVE.Geometry.overlapAreaWH(g.left(),g.top(),g.width(),g.height(),p,q,e.width,e.height),w===r&&(n=p,l=q)):(n=p,l=q)):(n=p,l=q)):(n=p,l=q);return new WAVE.Geometry.Point(n,l)};A.prototype.drawPointCircle=function(d,c,e,g){e=this.pointSize();g=WAVE.SVG.createCircle(d,c,e,{class:this.pointClass()});this.chart().sZone().addVPoint(WAVE.Geometry.toRectWH(d-
e,c-e,2*e,2*e));return g};A.prototype.drawPointRect=function(d,c,e,g){e=this.pointSize();g=WAVE.SVG.createRect(d-e,c-e,2*e,2*e,{class:this.pointClass()});this.chart().sZone().addVPoint(WAVE.Geometry.toRectWH(d-e,c-e,2*e,2*e));return g};A.prototype.drawPointTriangle=function(d,c,e,g){e=this.pointSize();g=WAVE.SVG.createPath({d:"M"+(d-e)+","+(c+e)+" H"+(d+e)+" L"+d+","+(c-e)+" Z",class:this.pointClass()});this.chart().sZone().addVPoint(WAVE.Geometry.toRectWH(d-e,c-e,2*e,2*e));return g};A.prototype.toString=
function(){return"Series "+this.title()};p.DataSet=function(){var d=this;WAVE.extend(d,WAVE.EventManager);var c=[],e=WAVE.arrayWalkable(c);this.feedWalkable=function(e,n){if(!n||n>d.MAX_POINTS_QTY)n=d.MAX_POINTS_QTY;d.removeAllPoints();for(var l=e.getWalker(),m=0;l.moveNext()&&m++<n;){var p=l.current();c.push({x:p.x,y:p.y,t:p.t})}d.eventInvoke("EVT_CHANGED")};this.addPoint=function(e,n,l){c.push({x:e,y:n,title:l});d.eventInvoke("EVT_CHANGED")};this.forEach=function(c){e.wEach(c)};this.removeAllPoints=
function(){0<c.length&&(c.splice(0,c.length),d.eventInvoke("EVT_CHANGED"))};this.removePointIf=function(e){var n;do{n=!1;for(var l=0;l<c.length;l++)if(e(c[l])){c.splice(l,1);n=!0;break}}while(n);d.eventInvoke("EVT_CHANGED")};this.removePointByX=function(d){for(var e=0;e<c.length;e++)if(c[e].x===d){c.splice(e,1);break}};this.length=function(){return c.length};this.getPoint=function(d){return c[d]};this.getPointByX=function(d){for(var e=0;e<c.length;e++){var l=c[e];if(l.x===d)return l}};this.getMinX=
function(){return e.wSelect(function(c){return c.x}).wMin()};this.getMaxX=function(){return e.wSelect(function(c){return c.x}).wMax()};this.getMinY=function(){return e.wSelect(function(c){return c.y}).wMin()};this.getMaxY=function(){return e.wSelect(function(c){return c.y}).wMax()};this.getNearestNeighbours=function(d){if(0===c.length)return null;var n=c[0],l=c[c.length-1];if(d<n.x)return{left:null,right:n};if(d>l.x)return{left:l,right:null};n=e.wFirstIdx(function(c){return d<c.x});return{left:c[n-
1],right:c[n]}}};p.DataSet.prototype.MAX_POINTS_QTY=44100;var e=0;p.Chart=function(d){function c(){k&&0===f&&(n.draw(),k=!1)}function m(){k=!0;c()}function g(a){for(var b=0;b<a.childNodes.length;){var c=a.childNodes[b];"defs"!==c.nodeName?a.removeChild(c):b++}}var n=this;WAVE.extend(n,WAVE.EventManager);var l=++e;this.id=function(){return l};var r=d;this.svgEl=function(){return r};$(window).resize(function(){n.draw()});this.svgEl=function(a){"undefined"!==typeof a&&a!==r&&(r=a,n.draw());return r};
var q=new p.XZone(this);q.eventBind("EVT_CHANGED",m);this.xZone=function(){return q};var x=new p.YZone(this);x.eventBind("EVT_CHANGED",m);this.yZone=function(){return x};var w=new p.SZone(this);w.eventBind("EVT_CHANGED",m);this.sZone=function(){return w};var v=new p.LZone(this);v.eventBind("EVT_CHANGED",m);this.lZone=function(){return v};var a=new p.XAxis(n);a.eventBind("EVT_CHANGED",m);this.xAxis=function(b){"undefined"!==typeof b&&b!==a&&(a=b,n.draw());return a};var b=new p.YAxis(n);b.eventBind("EVT_CHANGED",
m);this.yAxis=function(a){"undefined"!==typeof a&&a!==b&&(b=a,n.draw());return b};var f=0,k=!0;this.beginUpdate=function(){f++};this.endUpdate=function(){0<f&&f--;c()};this.beginUpdate();var z=[],N=WAVE.arrayWalkable(z);this.seriesListWalkable=function(){return N};this.getSeries=function(a){return N.wFirst(function(b){return b.id()===a})};this.addSeries=function(a){a=new A(n,a);a.eventBind("EVT_CHANGED",m);z.push(a);m();return a};this.removeSeries=function(a){var b=N.wFirstIdx(function(b){return b===
a});-1!==b&&(z.splice(b,1),a.eventUnbind("EVT_CHANGED",m),m())};this.clearSeries=function(){if(0!==z.length){for(var a in z)z[a].eventUnbind("EVT_CHANGED",m);z.splice(0,z.length);m()}};this.draw=function(){var a=r.getBoundingClientRect(),b=a.width,c=a.height,d;try{d=n.splitArea(r,b,c)}catch(e){console.error(e.message);return}g(r,!0);b=WAVE.SVG.createRect(0,0,b,c,{class:"wvSvgBkgr"});r.appendChild(b);n.xZone().draw(r,d.xZone);n.yZone().draw(r,d.yZone);n.sZone().draw(r,d.sZone);n.lZone().draw(r,d.lZone);
var f=WAVE.Geometry.toRectWH(d.sZone.left()+a.left,d.sZone.top()+a.top,d.sZone.width(),d.sZone.height());d=n.sZone().rulerScopes();if(0<d.length)for(var k in d)WAVE.GUI.rulerSet({element:r,scope:d[k],elementCfg:{getTxt:function(b){var c=n.xAxis(),d=n.yAxis();n.sZone().lastArea();if(f.contains(b.clientPoint)){var e=b.clientPoint.x()-a.left,g=b.clientPoint.y()-a.top,e=c.v2d(e),g=d.v2d(g);b.divHint.style.visibility="visible";return c.labelValToStr(e)+"; "+d.labelValToStr(g)}b.divHint.style.visibility=
"hidden"},getMasterInfo:function(b){var c=n.xAxis(),d=n.yAxis();n.sZone();var e=b.clientPoint.x()-a.left,g=b.clientPoint.y()-a.top,c=c.v2d(e),d=d.v2d(g),d={dataPoint:new WAVE.Geometry.Point(c,d)};d.isInParentRc=f.contains(b.clientPoint);return d},getSlaveInfo:function(b){var c=n.xAxis(),d=n.yAxis(),e=n.sZone(),g=b.masterRes.dataPoint.x();b=b.masterRes.dataPoint.y();c=c.d2v(g)+a.left;d=d.d2v(b)+a.top;d={clientPoint:new WAVE.Geometry.Point(c,d)};d.isInParentRc=(!e.rulerCheckXContains()||d.clientPoint.x()>=
f.left()&&d.clientPoint.x()<=f.right())&&(!e.rulerCheckYContains()||d.clientPoint.y()>=f.top()&&d.clientPoint.y()<=f.bottom());return d},parentRc:f}});else WAVE.GUI.rulerUnset({element:r})};this.splitArea=function(a,b,c){var d=n.xZone().getHeight(a),e=n.yZone().getWidth(a),f=new y.Point(0,0),g=new y.Point(Math.round(b),Math.round(c));d.top&&f.y(f.y()+d.top);d.bottom&&g.y(g.y()-d.bottom);e.left&&f.x(f.x()+e.left);e.right&&g.x(g.x()-e.right);var d={top:new y.Rectangle(new y.Point(f.x(),0),new y.Point(g.x(),
f.y())),bottom:new y.Rectangle(new y.Point(f.x(),g.y()),new y.Point(g.x(),c))},e={left:new y.Rectangle(new y.Point(0,f.y()),new y.Point(f.x(),g.y())),right:new y.Rectangle(new y.Point(g.x(),f.y()),new y.Point(b,g.y()))},k=new y.Rectangle(f,g);0<f.x()&&(k.corner1().x(k.left()+1),d.top.corner1().x(k.left()),d.bottom.corner1().x(k.left()));0<f.y()&&(k.corner1().y(k.top()+1),e.left.corner1().y(k.top()),e.right.corner1().y(k.top()));g.x()<b&&(k.corner2().x(k.right()-1),d.top.corner2().x(k.right()),d.bottom.corner2().x(k.right()));
g.y()<c&&(k.corner2().y(k.bottom()-1),e.left.corner2().y(k.bottom()),e.right.corner2().y(k.bottom()));a=n.lZone().getSize(a);var l,m;switch(n.lZone().corner()){case p.RectCorner.LEFTTOP:l=k.left()+n.lZone().legendMargin();m=k.top()+n.lZone().legendMargin();break;case p.RectCorner.RIGHTTOP:l=k.right()-n.lZone().legendMargin()-a.w;m=k.top()+n.lZone().legendMargin();break;case p.RectCorner.LEFTBOTTOM:l=k.left()+n.lZone().legendMargin();m=k.bottom()-a.h-n.lZone().legendMargin();break;case p.RectCorner.RIGHTBOTTOM:l=
k.right()-n.lZone().legendMargin()-a.w,m=k.bottom()-a.h-n.lZone().legendMargin()}l=new y.Rectangle(new y.Point(l,m),new y.Point(l+a.w,m+a.h));return{xZone:d,yZone:e,sZone:k,lZone:l}};this.endUpdate()};p.Chart.prototype.onSeriesMouseOver=function(d){this.eventInvoke(p.EVT_SERIES_POINT_MOUSEOVER,d)};p.Chart.prototype.onSeriesMouseOut=function(d){this.eventInvoke(p.EVT_SERIES_POINT_MOUSEOUT,d)};p.Chart.prototype.onSeriesClick=function(d){this.eventInvoke(p.EVT_SERIES_POINT_CLICK,d)};p.Chart.prototype.onSeriesPointTitleMouseOver=
function(d){this.eventInvoke(p.EVT_SERIES_POINT_TITLE_MOUSEOVER,d)};p.Chart.prototype.onSeriesPointTitleMouseOut=function(d){this.eventInvoke(p.EVT_SERIES_POINT_TITLE_MOUSEOUT,d)};p.Chart.prototype.onSeriesPointTitleClick=function(d){this.eventInvoke(p.EVT_SERIES_POINT_TITLE_CLICK,d)};return p}();WAVE.Pay.Providers.Braintree=function(){var r={TYPE:"braintree",clientToken:null,initialize:function(p){if(WAVE.strEmpty(p.publicKey))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Braintree.initialize()","init.publicKey");r.clientToken=p.publicKey},tokenize:function(p,y,z){if(WAVE.strEmpty(r.clientToken))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Braintree.tokenize()","WAVE.Pay.Providers.Braintree.clientToken");if(WAVE.strEmpty(y.cardNumber)||WAVE.strEmpty(y.cardExpMonth)||
WAVE.strEmpty(y.cardExpYear))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Braintree.tokenize()","paymentData.cardNumber, paymentData.cardExpMonth, paymentData.cardExpYear");var d={number:y.cardNumber,expirationMonth:y.cardExpMonth,expirationYear:y.cardExpYear};WAVE.strEmpty(y.cardCVC)||(d.cvv=y.cardCVC);WAVE.strEmpty(y.cardHolder)||(d.cardholderName=y.cardHolder);WAVE.strEmpty(y.cardAddressZip)||(d.billingAddress={postalCode:y.cardAddressZip});var A=r.clientToken;r.clientToken=null;
(new braintree.api.Client({clientToken:A})).tokenizeCard(d,function(d,u){var c={requestContext:{facade:p,paymentData:y},OK:!0,httpStatus:null,providerType:r.TYPE,providerName:p.providerName(),errorCode:0,errorType:0,errorMessage:"",errorParams:null,rawError:null,tokenString:null,card:{}};if(WAVE.strEmpty(d))c.tokenString=u;else{c.OK=!1;var m;m=WAVE.strEmpty(d)?WAVE.Pay.CardErrors.OK:WAVE.Pay.CardErrors.GENERAL_ERROR;c.errorCode=m;m=WAVE.strEmpty(d)?WAVE.Pay.ErrorTypes.OK:WAVE.Pay.ErrorTypes.GENERAL_ERROR;
c.errorType=m;c.errorMessage=d;c.errorParams={};c.rawError=d}z(c)})}};return r}();WAVE.Pay.Providers.Stripe=function(){function r(d){switch(d){case "200":return z.HTTPStatus.STATUS200;case "400":return z.HTTPStatus.STATUS400;case "401":return z.HTTPStatus.STATUS401;case "402":return z.HTTPStatus.STATUS402;case "404":return z.HTTPStatus.STATUS404;case "429":return z.HTTPStatus.STATUS429;case "500":return z.HTTPStatus.STATUS50X;case "502":return z.HTTPStatus.STATUS50X;case "503":return z.HTTPStatus.STATUS50X;case "504":return z.HTTPStatus.STATUS50X}return d}function p(d){switch(d){case "api_connection_error":return WAVE.Pay.ErrorTypes.API_CONNECTION_ERROR;
case "api_error":return WAVE.Pay.ErrorTypes.API_ERROR;case "authentication_error":return WAVE.Pay.ErrorTypes.AUTHENTICATION_ERROR;case "card_error":return WAVE.Pay.ErrorTypes.CARD_ERROR;case "invalid_request_error":return WAVE.Pay.ErrorTypes.INVALID_REQUEST_ERROR;case "rate_limit_error":return WAVE.Pay.ErrorTypes.RATE_LIMIT_ERROR}return WAVE.Pay.ErrorTypes.OK}function y(d){switch(d){case "invalid_number":return WAVE.Pay.CardErrors.INVALID_NUMBER;case "invalid_expiry_month":return WAVE.Pay.CardErrors.INVALID_EXPIRY_MONTH;
case "invalid_expiry_year":return WAVE.Pay.CardErrors.INVALID_EXPIRY_YEAR;case "invalid_cvc":return WAVE.Pay.CardErrors.INVALID_CVC;case "incorrect_number":return WAVE.Pay.CardErrors.INCORRECT_NUMBER;case "expired_card":return WAVE.Pay.CardErrors.EXPIRED_CARD;case "incorrect_cvc":return WAVE.Pay.CardErrors.INCORRECT_CVC;case "incorrect_zip":return WAVE.Pay.CardErrors.INCORRECT_ZIP;case "card_declined":return WAVE.Pay.CardErrors.CARD_DECLINED;case "missing":return WAVE.Pay.CardErrors.MISSING;case "processing_error":return WAVE.Pay.CardErrors.PROCESSING_ERROR}return WAVE.Pay.CardErrors.OK}
var z={TYPE:"stripe",HTTPStatus:{STATUS200:"OK\tEverything worked as expected",STATUS400:"Bad Request\tThe request was unacceptable, often due to missing a required parameter",STATUS401:"Unauthorized\tNo valid API key provided",STATUS402:"Request Failed\tThe parameters were valid but the request failed",STATUS404:"Not Found\tThe requested resource doesn't exist",STATUS429:"Too Many Requests\tToo many requests hit the API too quickly",STATUS50X:"500, 502, 503, 504 - Server Errors\tSomething went wrong on Stripe's end. (These are rare.)"},
initialize:function(d){if(WAVE.strEmpty(d.publicKey))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Stripe.initialize()","init.publicKey");Stripe.setPublishableKey(d.publicKey)},tokenize:function(d,A,e){if(WAVE.strEmpty(A.cardNumber)||WAVE.strEmpty(A.cardExpMonth)||WAVE.strEmpty(A.cardExpYear))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Stripe.tokenize()","paymentData.cardNumber, paymentData.cardExpMonth, paymentData.cardExpYear");var u={number:A.cardNumber.replace(/\s+|-/g,
""),exp_month:2===A.cardExpMonth.length?"0"+A.cardExpMonth:A.cardExpMonth,exp_year:A.cardExpYear};WAVE.strEmpty(A.cardCVC)||(u.cvc=A.cardCVC);WAVE.strEmpty(A.cardHolder)||(u.name=A.cardHolder);WAVE.strEmpty(A.cardAddressLine1)||(u.address_line1=A.cardAddressLine1);WAVE.strEmpty(A.cardAddressLine2)||(u.address_line2=A.cardAddressLine2);WAVE.strEmpty(A.cardAddressCity)||(u.address_city=A.cardAddressCity);WAVE.strEmpty(A.cardAddressState)||(u.address_state=A.cardAddressState);WAVE.strEmpty(A.cardAddressZip)||
(u.address_zip=A.cardAddressZip);WAVE.strEmpty(A.cardAddressCountry)||(u.address_country=A.cardAddressCountry);Stripe.card.createToken(u,function(c,m){var g={requestContext:{facade:d,paymentData:A},OK:200<=c&&300>c,httpStatus:c,httpStatusDescr:r(c),providerType:z.TYPE,providerName:d.providerName(),errorCode:0,errorType:0,errorMessage:"",errorParams:null,rawError:null,tokenString:null,card:{}};if(WAVE.strEmpty(m.error)){g.tokenString=m.id;var n=m.card;g.card={providerID:n.id,addressCity:n.address_city,
addressCountry:n.address_country,addressLine1:n.address_line1,addressLine2:n.address_line2,addressState:n.address_state,addressZip:n.address_zip,brand:n.brand,CVCcheck:n.cvc_check,expirationMonth:n.exp_month,expirationYear:n.exp_year,fundingType:n.funding,last4:n.last4,holder:n.name}}else g.OK=!1,g.errorCode=y(m.error.code),g.errorType=p(m.error.type),g.errorMessage=m.error.message,g.errorParams={0:m.error.param},g.rawError=m.error;e(g)})}};return z}();
