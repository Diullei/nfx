<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Serialization </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Serialization ">
    <meta name="generator" content="docfx 2.12.1.0">
    
    <link rel="shortcut icon" href="../images/NFX.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse nfx-navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a href="../index.html">
                <img id="nfx-logo" src="../images/NFX.Logo.Source.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
              <h1 id="serialization">Serialization</h1>
              
<p><strong>NFX</strong> natively supports different serialization formats.</p>
<h2 id="jsonplus">JSONplus</h2>
<p>JSONplus is <strong>NFX’s</strong> superset of JSON, it is a regular JSON grammar that understands the following extra things</p>
<ul>
<li><p>One-line comments</p>
</li>
<li><p>Single-quoted strings</p>
</li>
<li><p>Absence of quotes (when not needed)</p>
</li>
<li><p><strong>NFX</strong> writes a 100% compliant JSON.</p>
</li>
</ul>
<p><code>JSONWritingOptions</code> class allows for precise control of</p>
<ul>
<li><p>Date Format</p>
</li>
<li><p>Row format: arrays vs maps</p>
</li>
<li><p>NLS - Native Language Support. When enabled only emits string values in the desired culture with fallback to default language</p>
</li>
<li><p>Pretty printing: tabifications and spacing</p>
</li>
</ul>
<p><strong>NFX</strong> JSON serializer automatically writes any <code>IEnumerable</code> as an array, IDictionary as a map and classes as maps (including anonymous classes). 
It also understands <code>IJSONWritable</code> interface that allows for custom entity representation in JSON.</p>
<p><strong>NFX</strong> JSON de-serializer can saturate bcak <code>IJSONDataObject</code> (with auto-cast to <code>dynamic</code>) be it <code>JSONDataArray</code> or <code>JSONDataMap</code>. 
It also maps JSON back to Row instances using their schema. 
JSON deserializer does not support deserialization into arbitrary .NET types as this capability was never needed in any practical application. 
Keep in mind: in <strong>NFX</strong>, JSON is ONLY used for Web Interfaces and never internally as there are more efficient/convenient textual formats (i.e. LACONIC).</p>
<h2 id="slim">SLIM</h2>
<p><strong>NFX</strong> Slim is the proprietary compressing binary format serializer. 
It does not support versioning (as it is not needed for problems that Slim solves). 
It is the most important piece of technology as Glue and Big Memory depend on it. </p>
<p>Slim serializer uses dynamically-created/compiled/cached expression trees for the purpose of IL generation. 
The expressions are created for every new type that Slim encounters. </p>
<p>Unlike Protobuff (and many others) Slim is the only fully-compatible CLR serializer as it supports true type descriptions/polymorphism, <code>ISerializable</code>, <code>IDeserializationCallback</code>, <code>OnSerialize/OnDeserialize</code> family methods.</p>
<p>Slim is very close to Protobuff in both size and speed and is the fastest full CLR binary serializer on the market Z(the only other full-CLR supporting serializer is MS BinaryFormatter which is orders of magnitude slower than Slim).</p>
<p>We call transparent CLR object serialization - “teleportation”. 
It is an act of moving any CLR object instance as long as it does not have unmanaged handles (or handles it using ISerializable). 
This process can not be compared to Thrift or Protobuf. 
It is very different from “zero-copy” serializers as the later are just a trick - they require you to pre-serialize data by using their APIs, whereas Slim works with native CLR objects (no APIs needed).</p>
<p>Slim also poses capability of injectable wire-format layer that allows for custom/native/by-hand serialization of custom types, for example NLSMap. 
This sometimes gives 2x-6x speed boost. </p>
<p>By default, slim uses variable bit encoding for integer types and sparse arrays.</p>
<h2 id="bson">BSON</h2>
<p><strong>NFX</strong> provides support for standard BSON format. 
It is used in MongoDB driver. 
Unlike the official MongoDB implementation, the one in <strong>NFX</strong> is more efficient as it creates less class instances in ram, thus relieving unnecessary GC pressure. 
Instead of holding Element and Value instances, <strong>NFX</strong> holds typed element instance i.e. <code>BSONIntegerElement</code> - this reduces the number of objects by a factor of 2.</p>
<h2 id="pod">POD</h2>
<p>Portable Object Document is akin to a version-enabled graph of objects which was designed to perform binary serialization of portable data. 
It is way slower that SLim and has way more overhead. The format found little practical application to date</p>

            </article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2006-2017 ITAdapter Corp Inc<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
